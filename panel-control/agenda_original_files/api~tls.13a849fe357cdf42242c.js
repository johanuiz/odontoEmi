(window.pf4f47fd4774cx=window.pf4f47fd4774cx||[]).push([[0],[,function(t,e,n){"use strict";function r(t,e,...n){return o(document.createElement(t),e,...n)}function o(t,e,...n){let r=null;r="string"==typeof t?document.querySelector(t):t;const o=["onclick","onchange","onkeydown","onkeyup","onfocus","onblur","oninput","onmousedown","onmousemove","onmouseup"];if("object"==typeof e)for(let t in e){if(-1!==o.indexOf(t.toLowerCase())){const n=t;t.startsWith("on")&&(t=t.substr(2)),r.addEventListener(t.toLowerCase(),e[n]);continue}if("$ref"===t){e[t](r);continue}const n=i(r,t);n.key?"style"===n.key?Object.assign(r[n.key],e[t]):r[n.key]=e[t]||null:r.setAttribute(t,e[t])}function i(t,e){let n=null,r=null;for(let o in t)o.toLowerCase()===e.toLowerCase()&&(n=o,r=t[o]);return{key:n,val:r}}return n&&function t(...e){for(let n of e)if(n)if("string"==typeof n){let t=document.createTextNode(n);r.appendChild(t)}else Array.isArray(n)?t(...n):r.appendChild(n)}(n),r}function i(t,e){return e.querySelector(t)}function s(t){return"string"==typeof t?"productfruits--"+t:t.push?t.filter(t=>!!t).map(t=>"productfruits--"+t).join(" "):void 0}function a(t,e="close",n=500){return t.classList.add("productfruits--animation-"+e),new Promise(r=>{setTimeout(()=>{t.remove(),t.classList.remove("productfruits--animation-"+e),r()},n)})}function c(t,e,{anim:n="fadein",animEndCallback:r=null,onBeforeAnimApplied:o=null,removeAnimationClassAfterDuration:i=0}={}){e.style.visibility="hidden",t.appendChild(e),e.classList.add("productfruits--animation-"+n),e.style.visibility=null,i&&setTimeout(()=>{!function(t,e){t.classList.remove("productfruits--animation-"+e)}(e,n)},i)}function d(t,e="fadein"){t.style.visibility="hidden",t.style.display=null,t.classList.add("productfruits--animation-"+e),t.style.visibility=null}function l(t,e=500){return t.classList.add("productfruits--animation-close"),new Promise(n=>{setTimeout(()=>{t.style.display="none",t.classList.remove("productfruits--animation-close"),n()},e)})}function u(t,e){if(!t)return;const n=[];return t.classList.forEach(r=>{r.startsWith(e)&&(t.classList.remove(r),n.push(r))}),n}function h(t,e){if(e||(e="50px"),"skip"!==e)if("jump"!==e)if("center"!==e){const n=t.style.scrollMargin;t.style.scrollMargin=e,t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),t.style.scrollMargin=n}else t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});else t.scrollIntoView()}function p(t,e=null){return"none"!=t.style.display?(t.style.display="none",!1):(t.style.display=e,!0)}function f(t,e){e&&t.appendChild(e)}function m(t,e){e&&t&&t.contains(e)&&t.removeChild(e)}function g(t){let e,n,r=t.contentWindow,o=[];for(;r!==window.top;){e=r.parent;for(let t=0;t<e.frames.length;t++)if(e.frames[t]===r){const t=Array.from(e.document.getElementsByTagName("iframe")).concat(Array.from(e.document.getElementsByTagName("frame")));for(let e of t)e.contentWindow===r&&(n=e.getBoundingClientRect(),o.push({x:n.x,y:n.y}));r=e;break}}return o.reduce((t,e)=>({x:t.x+e.x,y:t.y+e.y}),{x:0,y:0})}function b(t,e=null){var n,r;let o=t.getBoundingClientRect();if(e&&(o=e.getBoundingClientRect()),t.ownerDocument!==document&&null!=t&&null!==(n=t.ownerDocument)&&void 0!==n&&null!==(r=n.defaultView)&&void 0!==r&&r.frameElement){const e=g(t.ownerDocument.defaultView.frameElement),n={x:o.x+e.x,y:o.y+e.y,left:o.left+e.x,top:o.top+e.y,bottom:o.bottom+e.y,height:o.height,right:o.right+e.x,width:o.width};o={...n,toJSON:function(){return JSON.stringify(o)}}}return o}n.d(e,"h",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"m",(function(){return i})),n.d(e,"i",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"o",(function(){return l})),n.d(e,"j",(function(){return u})),n.d(e,"l",(function(){return h})),n.d(e,"n",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"k",(function(){return m})),n.d(e,"g",(function(){return g})),n.d(e,"f",(function(){return b}))},,,,function(t,e,n){"use strict";function r(t){return t+"px"}function o(t){return null==t?null:r(t)}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return F})),n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return N})),n.d(e,"d",(function(){return P}));var r=n(64),o=n(106),i=n(13),s=n(17),a=n(7);Object(a.d)("pfruits_reload_state",()=>{Object(i.a)(t=>{var e;t.announcements.descriptor=s.a.config.announcementsV2,t.announcements.fetchedAnnouncementIds=[],t.inAppCenter.descriptor=s.a.config.inAppCenter,t.surveys.descriptor=null!==(e=s.a.config.surveys)&&void 0!==e?e:{items:[]},t.surveys.answers=[],t.surveys.renderedSurveyId=null,t.surveys.fetchedSurveyIds=[]})});var c=n(9),d=n(4),l=n(24);const u=(t,e)=>({stage:"welcome",discoveryResult:{},interactionMode:null,isBoardingComplete:!1,setStage(t){Object(i.a)(e=>{e.aiStudio.discovery.stage=t})},setInteractionMode:t=>Object(i.a)(e=>{e.aiStudio.discovery.interactionMode=t}),setIsBoardingComplete:t=>Object(i.a)(e=>{e.aiStudio.discovery.isBoardingComplete=t}),advanceToNextTopic:()=>Object(i.a)(t=>{var e,n,r;const o=t.aiStudio.discovery.currentTopicId,i=null===(e=t.aiStudio.discovery.discoveryInfo)||void 0===e?void 0:e.topics.findIndex(t=>t.title===o);t.aiStudio.discovery.currentTopicId=null===(n=t.aiStudio.discovery.discoveryInfo)||void 0===n||null===(r=n.topics[i+1])||void 0===r?void 0:r.title}),getCompletedTopics:()=>{var t;const n=e().aiStudio.discovery.discoveryInfo,r=e().aiStudio.discovery.discoveryResult;return null!==(t=null==n?void 0:n.topics.filter(t=>r[t.title]).map(t=>t.title))&&void 0!==t?t:[]},fetchDiscoveryInfo:async()=>{const t=await Object(l.a)(`/api/v1/${d.a.code}/enduser/discovery`);if(!t)throw new Error("Failed to fetch discovery info");Object(i.a)(e=>{e.aiStudio.discovery.discoveryInfo=t,e.aiStudio.discovery.currentTopicId=t.topics[0].title})},setDiscoveryResult:(t,e)=>Object(i.a)(n=>{n.aiStudio.discovery.discoveryResult[t]=e}),storeDiscoveryResult:async t=>{const{discoveryResult:n}=e().aiStudio.discovery,r=c.a.user.username;if(!await Object(l.b)(`/api/v1/${d.a.code}/enduser/outcomes`,{username:r,results:{summary:t,answers:n}}))throw new Error("Failed to store discovery result");Object(i.a)(t=>{t.aiStudio.discovery.isBoardingComplete=!0})}});var h=n(47),p=n(2),f=n(20);const m=(t,e)=>{var n,r,o,c,d,l,u,h,m,g,b;return{descriptor:null===(n=s.a.config)||void 0===n?void 0:n.inAppCenter,isOpen:!("chat"!==localStorage.getItem("inAppCenter_currentSection")||null!==(r=s.a.config)&&void 0!==r&&null!==(o=r.inAppCenter)&&void 0!==o&&o.hasExceededCopilotResolutions||!Object(p.a)("ai_cplt")&&"t"!==(null===(c=s.a.config)||void 0===c?void 0:c.plan))&&"true"===localStorage.getItem("inAppCenter_isOpen"),lastOpenChatSession:localStorage.getItem("inAppCenter_lastOpenChatSession"),setLastOpenChatSession:t=>{Object(i.a)(e=>{e.inAppCenter.lastOpenChatSession=t,localStorage.setItem("inAppCenter_lastOpenChatSession",t)})},sizing:"lg"===localStorage.getItem("inAppCenter_sizing")?"lg":"std",mode:"btn",searchQ:"",previousStatId:void 0,summary:"",feedbackState:"initial",statId:void 0,isFinished:!1,isInTrial:"t"===(null===(d=s.a.config)||void 0===d?void 0:d.plan),hasExceededCopilotResolutions:null!==(l=null===(u=s.a.config)||void 0===u||null===(h=u.inAppCenter)||void 0===h?void 0:h.hasExceededCopilotResolutions)&&void 0!==l&&l,currentSection:"chat"!==localStorage.getItem("inAppCenter_currentSection")||null!==(m=s.a.config)&&void 0!==m&&null!==(g=m.inAppCenter)&&void 0!==g&&g.hasExceededCopilotResolutions||!Object(p.a)("ai_cplt")&&"t"!==(null===(b=s.a.config)||void 0===b?void 0:b.plan)?"home":"chat",setStatId(t){Object(i.a)(e=>{e.inAppCenter.statId=t})},setIsFinished(t){Object(i.a)(e=>{e.inAppCenter.isFinished=t})},setFeedbackState(t){Object(i.a)(e=>{e.inAppCenter.feedbackState=t})},setSummary(t){Object(i.a)(e=>{e.inAppCenter.summary=t})},setPreviousStatId(t){Object(i.a)(e=>{e.inAppCenter.previousStatId=t})},launcherElement:null,setLauncherElement(t,e){Object(i.a)(n=>{n.inAppCenter.launcherElement=t,n.inAppCenter.mode=e})},homeAnimated:[],setHomeAnimated(){Object(i.a)(t=>{t.inAppCenter.homeAnimated.push(t.inAppCenter.openSession)})},searchMode:!1,setSearchMode(t){Object(i.a)(e=>{e.inAppCenter.searchMode=t})},isFullyHidden:!1,setFullVisibility(t){Object(i.a)(e=>{e.inAppCenter.isFullyHidden=!t})},setSearchQ(t){Object(i.a)(e=>{e.inAppCenter.searchQ=t})},overrideHeaderConfiguration(t){Object(i.a)(e=>{e.inAppCenter.headerConfiguration=t})},setFocusedHomeItemId(t){Object(i.a)(e=>{e.inAppCenter.focusedHomeItemId=t})},togglePanelVisibility:t=>{Object(i.a)(e=>{e.inAppCenter.isOpen=t,localStorage.setItem("inAppCenter_isOpen",t.toString()),e.inAppCenter.openSession=Object(f.a)(),Object(p.a)("lrbrstop")&&(e.inAppCenter.focusedHomeItemId=null,e.inAppCenter.currentSection="home",e.inAppCenter.searchQ="",e.inAppCenter.searchMode=!1),t?Object(a.b)("pf-inappcenter-opened"):Object(a.b)("pf-inappcenter-closed")})},changeSizingMode:t=>{Object(i.a)(e=>{e.inAppCenter.sizing=t});"chat"===e().inAppCenter.currentSection?localStorage.setItem("inAppCenter_sizing",t):localStorage.removeItem("inAppCenter_sizing")},setCurrentSection:t=>{Object(i.a)(e=>{e.inAppCenter.currentSection=t,"chat"===t?localStorage.setItem("inAppCenter_currentSection",t):(localStorage.removeItem("inAppCenter_currentSection"),localStorage.removeItem("inAppCenter_isOpen"))})}}};var g=n(22),b=n(52);const v=(t,e)=>({displayed:[],push:(e,n)=>{function r(t){const r=t.filter(t=>t.id==e.id)[0],o=t.indexOf(r);if(r){const n=t.slice(0);return n[o]=e,n}return"end"==n?[...t.slice(0,3),{id:e.id,rawText:e.rawText,header:e.header,imageId:e.imageId,imagePos:e.imagePos,isActionable:e.isActionable,publishedAt:e.publishedAt,hasImage:e.hasImage&&e.imageId&&e.imageId.length>0}]:[{id:e.id,rawText:e.rawText,header:e.header,isActionable:e.isActionable,imageId:e.imageId,imagePos:e.imagePos,publishedAt:e.publishedAt,hasImage:e.hasImage&&e.imageId&&e.imageId.length>0},...t.slice(0,3)]}e.id&&(e.rawText||e.header)&&t(t=>({...t,notifications:{...t.notifications,displayed:r(t.notifications.displayed)}}))},consume:(n,r,o)=>{const i=Array.isArray(n)?n:[n],s=e().notifications.displayed.some(t=>i.includes(t.id));t(t=>({...t,notifications:{...t.notifications,displayed:t.notifications.displayed.filter(t=>!i.includes(t.id))}})),s&&(1===i.length?Object(a.b)(b.a,{id:i[0],nonDirectInteraction:r,withoutAction:o}):Object(a.b)(b.a,{id:i,nonDirectInteraction:r,withoutAction:o}))},consumeAll:()=>{const n=e().notifications.displayed.filter(t=>{return e=t,Object(g.e)({pFrom:e.pFrom,timeFrom:e.timeFrom,timeZone:e.timeZone});var e}).map(t=>t.id);t(t=>({...t,notifications:{...t.notifications,displayed:[]}})),Object(a.b)(b.a,{id:n,nonDirectInteraction:!1,withoutAction:!0})}});let w;!function(t){t[t.Open=1]="Open",t[t.ClosedDone=2]="ClosedDone",t[t.ClosedNotDone=3]="ClosedNotDone"}(w||(w={}));var y=n(78),C=n(96),O=n(32);function k(t,e,n,r){var o,s,a,u,h;if(window.ProductFruitsDesigner)return;const p=(null!==(o=null===(s=F.getState())||void 0===s||null===(a=s.surveys)||void 0===a?void 0:a.log)&&void 0!==o?o:[]).slice(-100);Object(i.a)(t=>{t.surveys.log=[]});const f={username:c.a.user.username,vds:n,sesId:t.sesId,sesIdSrc:t.sesIdSrc,sesState:e,hmac:null!==(u=null===c.a||void 0===c.a||null===(h=c.a.user)||void 0===h?void 0:h.hmac)&&void 0!==u?u:void 0,snooze:null==r?void 0:r.snoozeForInterval,log:0==p.length?null:JSON.stringify(p)};return Object(l.b)(`/api/v1/stats/${d.a.code}/surveys/${t.surveyId}/event`,f)}function j(t){return"string"==typeof t?null==t?void 0:t.replace(/^\s+|\s+$/g,""):t}var I=n(28);const E=(t,e)=>{var n,r;return{log:[],descriptor:null!==(n=null===s.a||void 0===s.a||null===(r=s.a.config)||void 0===r?void 0:r.surveys)&&void 0!==n?n:{items:[]},setRenderedSurveyId(e){t(t=>({...t,surveys:{...t.surveys,renderedSurveyId:e}}))},fetchedSurveyIds:[],fetchDetailsWithCaching:async n=>{const r=e().surveys.fetchedSurveyIds,o=n.filter(t=>-1===r.indexOf(t));if(o.length>0){var i,s,a,u;r.push(...n);var h=c.a.getCurrentIdentity();const e=null!=h&&null!==(i=h.user)&&void 0!==i&&i.username?"?username="+encodeURIComponent(h.user.username):"";return Object(l.b)(`/api/v2/stats/${d.a.code}/surveys/public-batch${e}`,{ids:o,username:null==h?void 0:h.user.username,hmac:null!==(s=null==h||null===(a=h.user)||void 0===a||null===(u=a.data)||void 0===u?void 0:u.hmac)&&void 0!==s?s:void 0}).then(e=>{const n=e.map(t=>t.id);t(t=>{var r,o;return{...t,surveys:{...t.surveys,descriptor:{items:null===(r=t.surveys.descriptor)||void 0===r||null===(o=r.items)||void 0===o?void 0:o.map(t=>{const r=e.filter(e=>e.id==t.id)[0];return-1!==n.indexOf(t.id)?{...t,questions:r.questions,groups:r.groups,branching:r.branching,clrBg:r.clrBg,clrBtnBg:r.clrBtnBg,clrBtnTxt:r.clrBtnTxt,clrTxt:r.clrTxt}:{...t}})}}}})})}return new Promise(t=>t())},stepsManagement:{goToNextStep(){let n,r,o,i;t(t=>{var e,s,a,c,d;const l=Object(O.a)(t),u=t.surveys.stepsManagement.currentStepId,h=null===(e=l.branching)||void 0===e?void 0:e.filter(t=>t.refId==u)[0];let p=null,f=!1;const m=Object(O.b)(l);if(h){const e=Object(y.a)(h,t.surveys.answers.filter(t=>t.sesId==l.sesId));"fin"==e?f=!0:p=m.find(t=>t.id==e)}if(!(h&&p||f)){const t=m.slice().sort(O.d),e=t.findIndex(t=>t.id==u);p=t[e+1]}return n=null!==(s=p)&&void 0!==s&&s.id?null:l.sesId,r=null!==(a=p)&&void 0!==a&&a.id?null:l.sesIdSrc,o=n?l.id:null,i=n?l.name:null,{...t,surveys:{...t.surveys,renderedSurveyId:n?null:t.surveys.renderedSurveyId,descriptor:{...t.surveys.descriptor,items:null===(c=t.surveys.descriptor.items)||void 0===c?void 0:c.map(t=>t.id==l.id&&n?{...t,sesId:null,usrSt:n&&o&&w.ClosedDone}:t)},stepsManagement:{...t.surveys.stepsManagement,currentStepId:null===(d=p)||void 0===d?void 0:d.id}}}}),n&&o&&(k({surveyId:o,sesId:n,sesIdSrc:r},w.ClosedDone,[]),x(e(),o,n),S(e(),o,n,!0,i))},startOrResume:()=>{let e=null;t(t=>{var n;const r=Object(O.a)(t),o=Object(O.b)(r);return e=null==o||null===(n=o[0])||void 0===n?void 0:n.id,{...t,surveys:{...t.surveys,stepsManagement:{...t.surveys.stepsManagement,currentStepId:e}}}})}},close(n){let r=null,o=null,i=null;t(t=>{var e,s;return{...t,surveys:{...t.surveys,renderedSurveyId:null,descriptor:{...t.surveys.descriptor,items:null===(e=t.surveys.descriptor)||void 0===e||null===(s=e.items)||void 0===s?void 0:s.map(t=>t.id==n?(r=t.sesId,o=t.sesIdSrc,i=t.name,{...t,sesId:null,usrSt:w.ClosedNotDone}):t)}}}}),k({surveyId:n,sesId:r,sesIdSrc:o},w.ClosedNotDone,[]),x(e(),n,r),S(e(),n,r,!1,i)},snooze(n){var r;let o=null,i=null,s=null,a=null;t(t=>{var e,r;return{...t,surveys:{...t.surveys,renderedSurveyId:null,descriptor:{...t.surveys.descriptor,items:null===(e=t.surveys.descriptor)||void 0===e||null===(r=e.items)||void 0===r?void 0:r.map(t=>t.id==n?(o=t.sesId,i=t.sesIdSrc,s=t.name,a=t.snooze,{...t,sesId:null,usrSt:w.Open}):t)}}}}),k({surveyId:n,sesId:o,sesIdSrc:i},w.Open,[],{snoozeForInterval:null!==(r=a)&&void 0!==r?r:1}),x(e(),n,o)},answers:[],answerQuestion(n,r,o){t(t=>{const e=Object(O.a)(t);return!!t.surveys.answers.find(t=>t.sId==e.id&&t.qId==n&&t.sesId==e.sesId)?{...t,surveys:{...t.surveys,answers:t.surveys.answers.map(t=>t.sId==e.id&&t.qId==n&&t.sesId==e.sesId?null!=o&&o.isOtherChoice?{...t,addit:r}:null!=o&&o.isArrayToggle?{...t,answer:Object(C.b)(t.answer,r)}:{...t,answer:r}:t)}}:{...t,surveys:{...t.surveys,answers:[...t.surveys.answers,{answer:null!=o&&o.isArrayToggle?[r]:r,qId:n,sId:e.id,sesId:e.sesId}]}}});const i=Object(O.a)(e()),s=Object(O.c)(e(),n);!0!==(null==o?void 0:o.skipServerSync)&&k({surveyId:i.id,sesId:i.sesId,sesIdSrc:i.sesIdSrc},w.Open,[{qId:n,stepId:e().surveys.stepsManagement.currentStepId,answer:j(s.answer),addit:j(s.addit)}])}}};function S(t,e,n,r,o){const i=t.surveys.answers.filter(t=>t.sesId==n),s=Object(p.a)("anlnms")?o:"";if(Object(a.b)("survey-closed",{surveyId:e,answers:i.map(t=>({sessionId:t.sesId,additText:t.addit,answer:t.answer,questionId:t.qId})),reason:r?"last_screen":"close_button"}),I.a.getInstance().trackEvent("Survey Closed",{answersCount:i.length,name:s}),Object(p.a)("ansrvnps")){var c,d;const n=null===(d=(null===(c=t.surveys.descriptor.items)||void 0===c?void 0:c.find(t=>t.id==e)).questions)||void 0===d?void 0:d.filter(t=>"nps"==t.type);for(const t of n){const e=i.find(e=>e.qId==t.id);if(e){I.a.getInstance().trackEvent("NPS response",{npsScore:e.answer,name:s});const t={};t[s+"_NPS Score"]=e.answer,I.a.getInstance().setUserProperty(t);break}}}}function x(t,e,n){var r,o,i,s,a;const c=null!==(r=null===(o=t.surveys.descriptor)||void 0===o||null===(i=o.items)||void 0===i||null===(s=i.find(t=>t.id==e))||void 0===s||null===(a=s.questions)||void 0===a?void 0:a.filter(t=>t.usrProp))&&void 0!==r?r:[];!function(t){var e,n;if(!window.productFruitsUser)return;if(!t||0==Object.keys(t).length)return;const r=structuredClone(window.productFruitsUser);r.props=Object.assign(null!==(e=r.props)&&void 0!==e?e:{},t),null===(n=window.productFruits)||void 0===n||n.identifyUser(r)}(t.surveys.answers.filter(t=>t.sesId==n).reduce((t,e)=>{const n=c.find(t=>t.id==e.qId);return n&&t.push({answer:e,usrProp:n.usrProp}),t},[]).reduce((t,e)=>(t[e.usrProp]=e.answer.answer,t),{}))}let _=!1;function T(){const t=Object(r.createStore)()(Object(o.subscribeWithSelector)((...t)=>({announcements:{...Object(h.a)(...t)},notifications:{...v(...t)},inAppCenter:{...m(...t)},surveys:{...E(...t)},legacyTours:{runningToursIds:[]},aiStudio:{discovery:{...u(...t)}}})));return t.getState().inAppCenter.isOpen||(localStorage.removeItem("inAppCenter_lastOpenChatSession"),localStorage.setItem("chat_historyShown","true")),t}let F=T();function A(){_=!0}function N(){_&&(F=T(),_=!1)}const P=t=>Object(r.useStore)(F,t)},,,,,,function(t,e,n){"use strict";var r=n(11),o=n(1),i=n(5),s=n(77),a=n(39);const c=new class{constructor(t=null){this.logs=[],this.onLogCallback=()=>{}}setLogCallback(t){this.onLogCallback=t}initializeUI(){this.container=r.a.getSubContainer("debugger"),this.rootEl=Object(o.h)("div",{className:Object(o.i)("debugger-holder")},Object(o.h)("div",{className:Object(o.i)("debugger-title"),onmousedown:t=>{this.isMoving=!0;const e=t.path[2].getBoundingClientRect();this.movingOffsetX=t.screenX-e.left,this.movingOffsetY=t.screenY-e.top,t.stopPropagation(),t.preventDefault()}},Object(o.h)("strong",null,"Product Fruits debugger"),Object(o.h)("div",{style:{marginLeft:"auto",cursor:"pointer"},onClick:()=>{this.detach()}},"Close"))),this.contentEl=Object(o.h)("div",{style:{display:"flex",flexDirection:"column"}}),this.rootEl.appendChild(this.contentEl),this.groups=new Map,this.isAttached&&this.attach(),window.onmousemove=t=>{if(this.isMoving){t.stopPropagation(),t.preventDefault();const e={x:t.screenX-this.movingOffsetX,y:t.screenY-this.movingOffsetY};e.x<0&&(e.x=0),e.x>window.innerWidth-50&&(e.x=window.innerWidth-50),e.y<0&&(e.y=0),e.y>window.innerHeight-50&&(e.y=window.innerHeight-50),this.rootEl.style.bottom="unset",this.rootEl.style.left=Object(i.a)(e.x),this.rootEl.style.top=Object(i.a)(e.y)}},window.onmouseup=t=>{this.isMoving=!1,s.a.setObject("debugger_position",{x:this.rootEl.style.left,y:this.rootEl.style.top})},this.rootEl.style.bottom="20px",this.rootEl.style.left="20px"}get isAttached(){return localStorage.getItem("productfruits_debugger")}set isAttached(t){t?localStorage.setItem("productfruits_debugger",1):localStorage.removeItem("productfruits_debugger")}logImportantMessage(t,e,n){this.logColored("important","#C8CDD0",null,t,e,n)}logSuccessMessage(t,e,n){this.logColored("success","#82DD55",null,t,e,n)}logInfoMessage(t,e,n){this.logColored("info",null,null,t,e,n)}logColored(t,e,n,r,i,s){const a={type:t,group:i,groupId:s,htmlContent:r};this.logs.push(a);try{this.onLogCallback(a)}catch(t){}if(this.groups)try{if(!this.isAttached)return;const t=this.getOrCreateGroupContentElement(i),s=Object(o.h)("div",null,r);s.innerHTML=r,t.appendChild(Object(o.h)("li",{style:{backgroundColor:e,color:n}},s))}catch(t){console.log("PF ERROR",t)}}getOrCreateGroupContentElement(t,e=!1){if(this.groups.has(t)){const e=this.groups.get(t),n=e.getElementsByClassName(Object(o.i)("debugger-group-header-counter"))[0],r=parseInt(n.textContent)+1;return n.textContent=r+" logs",e.getElementsByTagName("ul")[0]}const n=Object(o.h)("ul",{className:Object(o.i)("debugger-logs-list")}),r=Object(o.h)("div",{className:Object(o.i)("debugger-group")},Object(o.h)("div",{className:Object(o.i)("debugger-group-header"),onClick:()=>{const t=r.getElementsByClassName(Object(o.i)("debugger-group-header"))[0];"false"==t.getAttribute("data-pf-collapsed")?t.setAttribute("data-pf-collapsed","true"):t.setAttribute("data-pf-collapsed","false")}},Object(o.h)("div",null,t),Object(o.h)("div",{className:Object(o.i)("debugger-group-header-counter")},"1 log"),Object(o.h)("div",{className:Object(o.i)("debugger-clear-button"),onClick:t=>{n.innerHTML="",r.getElementsByClassName(Object(o.i)("debugger-group-header-counter"))[0].textContent="0 logs",t.stopPropagation()}},"Clear")));return r.getElementsByClassName(Object(o.i)("debugger-group-header"))[0].setAttribute("data-pf-collapsed","true"),r.appendChild(n),this.groups.set(t,r),this.contentEl.appendChild(r),n}attach(t){Object(a.b)()||(this.isAttached=!0,this.container.appendChild(this.rootEl),t&&(this.rootEl.style.top=null,this.rootEl.style.right=null,this.rootEl.style.bottom="20px",this.rootEl.style.left="20px"))}detach(){this.isAttached=!1,this.container.innerHTML=""}};e.a=c},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(91),o=n(6);function i(t){o.a.setState(e=>Object(r.a)(e,t))}Object(r.b)(!1)},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(9),o=n(23),i=n(4),s=n(2),a=n(72),c=n(16);function d(t,{skip:e}={}){if(!Object(s.a)("placeholders"))return t;if(!0===e)return t;if(!t)return t;if("string"!=typeof t)return t;if(t&&-1===t.indexOf("{{"))return t;Object(c.c)(Object(c.c)(Object(a.a)(t),"\\{","{"),"\\}","}");const n=/{{(.*?)}}/gim,d=[];let l=void 0;for(;null!==(l=n.exec(t));)d.push(l[0]);function u(){if(i.b.isEditorMode)return!0;if("undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id)return!0;if("undefined"!=typeof window&&window.location){if("chrome-extension:"===window.location.protocol)return!0}return!1}for(const e of d){let n=e.substring(2,e.length-2);let i="";if(-1!==n.indexOf("|")){const t=n.split("|");n=(t[0]||"").trim(),i=t[1]||""}var h;if("$language"==n)t=Object(c.c)(t,e,(null===(h=window.productFruits)||void 0===h?void 0:h.language)||i||e);else if("$hmac"==n){var p;if(u())continue;var f=r.a.getCurrentIdentity();f||(t=Object(c.c)(t,e,""));var m={username:f.user.username,hmac:{hash:f.user.data.hmac.hash,expiration:null!==(p=f.user.data.hmac.expiration)&&void 0!==p?p:void 0}};t=Object(c.c)(t,e,"hmac="+encodeURIComponent(JSON.stringify(m)))}else{const r=Object(o.c)(n,window.productFruitsUser);t=Object(c.c)(t,e,r||i||e)}}return t}},,function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return h}));var r=n(23),o=n(4),i=n(10),s=n(2),a=n(15),c=n(72);function d(t,e){if(!t)return!0;if(t.equals)return Object(a.a)(e).toLowerCase()===t.equals.toLowerCase();if(t.startsWith)return Object(a.a)(e).toLowerCase().startsWith(t.startsWith.toLowerCase());if(t.endsWith)return Object(a.a)(e).toLowerCase().endsWith(t.endsWith.toLowerCase());if(t.contains)return-1!==Object(a.a)(e).toLowerCase().indexOf(t.endsWith.toLowerCase());if(null!=t.parametrized){if(t.origParametrized=t.origParametrized?t.origParametrized:t.parametrized,!Object(s.a)("url_cmp2")&&t.parametrized.startsWith("/")){const e=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");t.parametrized=e+t.parametrized}if(Object(s.a)("url_cmp2")){if("[dynamic]"==t.parametrized)return!0;if(!t.parametrized.startsWith("http://")&&!t.parametrized.startsWith("https://")&&!o.b.useCustomNavigation){const e=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),n=t.parametrized.startsWith("/");t.parametrized=e+(n?"":"/")+t.parametrized}if(t.parametrized.endsWith("/")&&(t.parametrized=t.parametrized.slice(0,-1)),""!=t.parametrized||o.b.useCustomNavigation||(t.parametrized="/"),Object(s.a)("urlenc"))try{t.parametrized=decodeURI(t.parametrized)}catch(t){}}let n=h(h(Object(c.a)(t.parametrized.toString()),"\\[","["),"\\]","]"),d=/(\[[^\]]*\])/gim,l=void 0,p=[];for(;null!==(l=d.exec(t.parametrized));)p.push(l[0]);if(Object(s.a)("url_cmp2")&&(t.parametrized=t.parametrized.toLowerCase()),p&&p.length>0){for(let t=0;t<p.length;t++){const e=p[t];if(e.startsWith("[d.")){const t=u(e.replace("[d.",""),"]"),o=Object(r.c)(t,window.productFruitsUser);void 0===o&&i.a.verbose("Parametrized value not found:",t,o);const s=h(e,".","\\.");n=n.replace(s,o)}else"[dynamic]"===e?n=n.replace("[dynamic]","(.*)"):"[urlsegment]"===e?n=n.replace("[urlsegment]","([^/?]*)"):"[dynamic:num]"===e?n=n.replace("[dynamic:num]","(\\d+)"):"[dynamic:str]"===e&&(n=n.replace("[dynamic:str]","([^0-9]+)"))}Object(s.a)("url_cmp2")&&(n+="([/]?)$")}else t.parametrized.startsWith("http")||t.parametrized.startsWith("/")?n+="$":(n+="([/]?)$",n="([/])"+n);try{const r=new RegExp(n,"mi");if(Object(s.a)("url_cmp2")){let n=Object(a.a)(e),i=o.b.useCustomNavigation?n.toLocaleLowerCase():n.replace(/\/+$/,"").toLowerCase();if(Object(s.a)("urlenc"))try{i=decodeURI(i)}catch{}return t.parametrized=t.origParametrized,r.test(i)}return r.test(Object(a.a)(e).toLowerCase())}catch(t){return i.a.verbose("Error while testing URL:",t,n),!1}}return!1}function l(t){if(!t)return{success:!1};if(t.equals)return t.equals;if(t.startsWith)throw new Error("Cannot construct URL from startsWith");if(t.endsWith)throw new Error("Cannot construct URL from endsWith");if(t.contains)throw new Error("Cannot construct URL from contains");if(t.parametrized){let e=t.parametrized.toString(),n=/(\[[^\]]*\])/gim,o=null;for(;null!==(o=n.exec(t.parametrized));)if(o&&o.length>1)for(let t=1;t<o.length;t++){const n=o[t];if(n.startsWith("[d.")){const t=u(n.replace("[d.",""),"]"),o=Object(r.c)(t,window.productFruitsUser);e=e.replace(n,o)}}return{success:-1===t.parametrized.indexOf("[dynamic]"),url:e}}return{success:!1}}function u(t,e){for(var n=0,r=t.length;n<r&&e.indexOf(t[n])>=0;)++n;for(;r>n&&e.indexOf(t[r-1])>=0;)--r;return n>0||r<t.length?t.substring(n,r):t}function h(t,e,n){return t?t.split(e).join(n||""):t}},,,,,function(t,e,n){"use strict";let r,o,i;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),function(t){t[t.NewsFeed=1]="NewsFeed",t[t.Banner=2]="Banner",t[t.Popup=3]="Popup"}(r||(r={})),function(t){t[t.Unseen=1]="Unseen",t[t.Seen=2]="Seen"}(o||(o={})),function(t){t[t.Open=1]="Open",t[t.ClosedDone=2]="ClosedDone",t[t.ClosedNotDone=3]="ClosedNotDone"}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return l}));var r=n(36);const o=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];function i(t){var e;if(!t)return"";const n=new Intl.RelativeTimeFormat(null===(e=window.productFruits)||void 0===e?void 0:e.language,{numeric:"auto"});"string"!=typeof t||t.endsWith("Z")||(t+="Z");let r=(new Date(t).valueOf()-(new Date).valueOf())/1e3;for(let e=0;e<=o.length;e++){const s=o[e];if(!s){var i;return new Intl.DateTimeFormat(null===(i=window.productFruits)||void 0===i?void 0:i.language).format(new Date(t))}if(Math.abs(r)<s.amount)return n.format(Math.round(r),s.name);r/=s.amount}}function s(t){const e=t?new Date(t):new Date;return e.setHours(0,0,0,0),e}function a(t,e,n){const r=t?new Date(t):new Date;if(e){const[t,n]=e.split(":").map(Number);r.setHours(t,n,0,0)}if(n&&"local"!==n){const t=new Intl.DateTimeFormat([],{timeZone:n,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).formatToParts(r),e={};t.forEach(({type:t,value:n})=>{"literal"!==t&&(e[t]=Number(n))}),r.setFullYear(e.year),r.setMonth(e.month-1),r.setDate(e.day),r.setHours(e.hour,e.minute,e.second,0)}return r}function c(t){if(!(null!=t&&t.pFrom||null!=t&&t.pTo))return!0;if(t.timeFrom&&t.timeTo){const e=a();return(!t.pFrom||a(t.pFrom,t.timeFrom,t.timeZone)<=e)&&(!t.pTo||a(t.pTo,t.timeTo,t.timeZone)>=e)}{const e=s();return(!t.pFrom||s(t.pFrom)<=e)&&(!t.pTo||s(t.pTo)>=e)}}function d(t){if(null==t||!t.pFrom)return!0;if(null!=t&&t.timeFrom){const e=a();return a(t.pFrom,t.timeFrom,t.timeZone)<=e}{const e=s();return s(t.pFrom)<=e}}const l=(t,e=(()=>{var t,e,n;return null!==(t=null===(e=window)||void 0===e||null===(n=e.productFruits)||void 0===n?void 0:n.language)&&void 0!==t?t:"en"})())=>{if(null==t||!t.pFrom)return Object(r.a)(t.at,e);if(null!=t&&t.timeFrom){const n=a(t.pFrom,t.timeFrom,t.timeZone);return n>a()?"Just now":Object(r.b)(n,e)}{const n=s(t.pFrom);return n>s()?"Just now":Object(r.b)(n,e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return m}));var r=RegExp(['"(?:\\\\.|[^"])*"',"'(?:\\\\.|[^'])*'","`(?:\\\\.|[^`])*`","/\\*(?:[^*]|\\*+[^*/])*\\*+/","//.*\n","/(?:\\\\.|[^/])+/w*","[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]","[^\\s]"].join("|"),"g"),o=/[\])"'A-Za-z0-9_$]+$/,i={in:1,return:1,typeof:1};var s=n(10),a=n(14),c=n(2),d=(n(4),n(15)),l=n(59);function u(t,e,n,h,f){const m=f&&f.skipPlaceholderReplacement;var g=n||window.productFruits.language,b=[];if(t.hasAttribute("data-pfbind-icon")&&(t.textContent="ico"),t.hasAttribute("data-pfbind-text")){var v=p(t.getAttribute("data-pfbind-text"),e);t.innerHTML=v?Object(l.a)(v[g]?Object(a.a)(v[g],{skip:m}):""):""}if(t.hasAttribute("data-pfbind-visible")){var w=p(t.getAttribute("data-pfbind-visible"),e);t.style.display=!1===w?"none":""}if(t.hasAttribute("data-pfbind-visible-true")){w=p(t.getAttribute("data-pfbind-visible-true"),e);t.style.display=!0===w?"":"none"}if(t.hasAttribute("data-pfbind-youtube")){var y=p(t.getAttribute("data-pfbind-youtube"),e);if(y){t.innerHTML="";var C=document.createElement("iframe");C.allow="autoplay;fullscreen";var O=!0===h?0:1;C.src="https://www.youtube.com/embed/"+y[g]+"?autoplay="+O+"&modestbranding=1&controls=1&rel=0&loop=1&playlist="+y[g],C.className="pf-designer-video-youtube",t.appendChild(C),t.dataset.youtubeUrl=y[g]}}if(t.hasAttribute("data-pfbind-remove-el")&&t.addEventListener("click",()=>{var e=t.closest(t.getAttribute("data-pfbind-remove-el"));e&&e.remove()}),t.hasAttribute("data-pfbind-attr-placeholder")){let n=p(t.getAttribute("data-pfbind-attr-placeholder"),e);t.placeholder=n&&n[g]?n[g]:""}if(t.hasAttribute("data-pfbind-foreach")){var k=p(t.getAttribute("data-pfbind-foreach"),e),j=t.firstElementChild.content.cloneNode(!0),I=t.getAttribute("data-pfbind-foreach-clb");for(var E of(t.innerHTML="",k))if(!(I&&f&&f.callbacks&&f.callbacks[I])||f.callbacks[I]()){var S=document.importNode(j.firstElementChild,!0);t.appendChild(S),u(S,E,n),b.push(S)}}if(t.hasAttribute("data-pfbind-start-tour")){var x=parseInt(t.getAttribute("data-pfbind-start-tour"));t.addEventListener("click",t=>{try{if(window.ProductFruitsDesigner)return;window.productFruits.contextHelp.closeCurrentCard(),Object(c.a)("nvurldl")?setTimeout(()=>{window.productFruits.toursFactory.startTour(x,{forceForUser:!0,autoStartRedirect:!0,ignoreLaunchRules:!Object(c.a)("lgc_tr_evl")})},[500]):window.productFruits.toursFactory.startTour(x,{forceForUser:!0,autoStartRedirect:!0,ignoreLaunchRules:!Object(c.a)("lgc_tr_evl")})}catch(t){s.a.error(t)}Object(c.a)("btns_not_stpprop")||(t.preventDefault(),t.stopPropagation())})}if(t.hasAttribute("data-pfbind-link")||t.hasAttribute("data-pfbind-link-blank")||t.hasAttribute("data-pfbind-link-blank-adv")){const e=Object(a.a)(t.getAttribute("data-pfbind-link")||t.getAttribute("data-pfbind-link-blank")||t.getAttribute("data-pfbind-link-blank-adv"),{skip:m}),n=t.hasAttribute("data-pfbind-link-blank")||t.hasAttribute("data-pfbind-link-blank-adv");t.addEventListener("click",t=>{n?window.open(e,"_blank"):Object(c.a)("nvurldl")?setTimeout(()=>{Object(d.b)(e)},[500]):Object(d.b)(e),t.preventDefault(),t.stopPropagation()})}if(t.hasAttribute("data-pfbind-renderblocks")||t.hasAttribute("data-pfbind-renderblocksorcontent")){var _=p(t.getAttribute("data-pfbind-renderblocks")||t.getAttribute("data-pfbind-renderblocksorcontent"),e);if(_){var T=_[g];if(T&&T.meta&&T.meta.blocks){t.innerHTML="";let e=function(t){if(!t||!t.length)return;let e=document.createElement("div");for(let i of t)if("header"==i.type){let t=document.createElement("h"+i.data.level);t.innerHTML=i.data.text,t.style.textAlign=i.data.alignment,e.appendChild(t)}else if("paragraph"==i.type){let t=document.createElement("p");t.innerHTML=i.data.text,t.style.textAlign=i.data.alignment,e.appendChild(t)}else if("image"==i.type){let t=document.createElement("div"),n=document.createElement("div");t.style.textAlign=i.data.alignment||"center",n.style.display="inline-block",t.appendChild(n);let r=document.createElement("img");r.src=i.data.file.url,r.style.width=i.data.zoom,n.appendChild(r),e.appendChild(t)}else if("embed"==i.type){if(i.data.embed){var n=document.createElement("iframe");n.src=i.data.embed+"?autoplay=0&modestbranding=1&controls=1&rel=0",n.style.border="none",n.style.width="640px",n.style.height="385px",n.style.display="block",n.style.marginLeft="auto",n.style.marginRight="auto",e.appendChild(n)}}else if("list"==i.type){(r=document.createElement("unordered"===i.data.style?"ul":"ol")).className="productfruits--list";for(let t of i.data.items){let e=document.createElement("li");e.innerHTML=t,r.appendChild(e)}e.appendChild(r)}else if("quote"==i.type){var r;(r=document.createElement("div")).innerHTML=i.data.text,r.className="productfruits--quote",e.appendChild(r)}else if("delimiter"==i.type){var o=document.createElement("div");o.className="productfruits--delimiter",e.appendChild(o)}return e}(T.meta.blocks);e&&t.appendChild(e)}else T&&T.substring?t.innerHTML=t.hasAttribute("data-pfbind-renderblocksorcontent")?Object(a.a)(T,{skip:m}):"":t.innerHTML=""}else t.innerHTML=""}if(t.hasAttribute("data-pfbind-component")){var F=t.getAttribute("data-pfbind-component");if(t.innerHTML="",F){let e=window["___pf_registered_component_"+F];if(e){let n=new e,s=function(t){var e=t.trim();123===e.charCodeAt(0)&&(e=e.slice(1,-1));var n,s=[],a=(e+="\n,").match(r),c=[],d=0;if(a.length>1){for(var l,u=0;l=a[u];++u){var h=l.charCodeAt(0);if(44===h){if(d<=0){s.push(n&&c.length?{key:n,value:c.join("")}:{unknown:n||c.join("")}),n=d=0,c=[];continue}}else if(58===h){if(!d&&!n&&1===c.length){n=c.pop();continue}}else{if(47===h&&l.length>1&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;if(47===h&&u&&l.length>1){var p=a[u-1].match(o);p&&!i[p[0]]&&(a=(e=e.substr(e.indexOf(l)+1)).match(r),u=-1,l="/")}else 40===h||123===h||91===h?++d:41===h||125===h||93===h?--d:n||c.length||34!==h&&39!==h||(l=l.slice(1,-1))}c.push(l)}if(d>0)throw Error("Unbalanced parentheses, braces, or brackets")}return s}(t.getAttribute("data-pfbind-component-params")),a={};s.forEach(t=>{let e=t.value;e&&"'"===e[0]&&(e=e.substr(1,e.length-2)),a[t.key]=e}),t.appendChild(n.render(t,a))}else console.info("The required component '"+e+"' is not registered")}}for(var A of t.children)"TEMPLATE"===A.tagName||-1!==b.indexOf(A)||A.hasAttribute("data-pfbindstopparent")||u(A,e,n);return t}function h(t,e){window["___pf_registered_component_"+t]=e}function p(t,e){for(var n=t.split("."),r=e,o=0;o<n.length;o++){if(null==r)return;r=r[n[o]]}return r}function f(t,e){for(var n=t,r=e,o=0;o<n.length;o++){if(null==r)return;r=r[n[o]]}return r}function m(t,e,n,r=null){var o=null;o=r&&null!=r?r.getElementsByClassName(e):document.getElementsByClassName(e);for(let e of o)e.addEventListener(t,n);return()=>{for(let e of o)e.removeEventListener(t,n)}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var r=n(4);function o(t,e=null,n={}){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),...n})}function i(t,e=null,n={}){return fetch(Object(r.d)()+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),...n}).then(t=>t.json().catch(()=>{}))}function s(t,e={}){return fetch(Object(r.d)()+t,{method:"GET",headers:{"Content-Type":"application/json"},...e}).then(t=>t.json().catch(()=>{}))}},function(t,e,n){"use strict";n.d(e,"o",(function(){return d})),n.d(e,"n",(function(){return l})),n.d(e,"k",(function(){return u})),n.d(e,"m",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"h",(function(){return f})),n.d(e,"l",(function(){return m})),n.d(e,"j",(function(){return g})),n.d(e,"i",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"p",(function(){return w})),n.d(e,"b",(function(){return y})),n.d(e,"f",(function(){return C})),n.d(e,"e",(function(){return k})),n.d(e,"g",(function(){return j})),n.d(e,"a",(function(){return E}));var r=n(9),o=n(15),i=n(4),s=n(90),a=n(2),c=n(28);function d(t,e,n){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var o,s,a;const c=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/tours/"+t+"/start",{username:window.productFruitsUser.username,stopOtherTours:e,ignoreRules:n,hmac:null!==(o=null==c||null===(s=c.user)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.hmac)&&void 0!==o?o:void 0})}}function l(t,e,n,o,s,a){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var d,l,u;const h=r.a.getCurrentIdentity(),p=I("tour_card_read_time_"+n);k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/tours/"+t+"/cardhit",{username:window.productFruitsUser.username,cardId:n,isFinished:s,durationMs:p,hmac:null!==(d=null==h||null===(l=h.user)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.hmac)&&void 0!==d?d:void 0}),a||(c.a.getInstance().trackEvent("tour_card_read",{tourId:t,tourName:e,cardId:n,cardName:o,durationMs:p,durationS:p/1e3}),s&&c.a.getInstance().trackEvent("tour_finished",{tourId:t,tourName:e,cardId:n,cardName:o}))}}function u(t,e,n,o,s,a,c,d,l,u,h){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var p,f,m;const g=r.a.getCurrentIdentity(),b=u?function(t){try{const e=t+"_stamp";performance.measure(e,t);const n=performance.getEntriesByName(e,"measure")[0];return performance.clearMeasures(e),n?Math.round(n.duration):null}catch(t){return null}}(u):null;k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/cta",{username:window.productFruitsUser.username,hmac:null!==(p=null==g||null===(f=g.user)||void 0===f||null===(m=f.data)||void 0===m?void 0:m.hmac)&&void 0!==p?p:void 0,toolType:t,toolId:e,elementId:n,url:o,ctaType:s,ctaName:a,action:c,actionData:d,language:l,durationMs:b,toolSubtype:h})}}function h(t,e,n,o){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var s,a,d;const l=r.a.getCurrentIdentity(),u=I("tour_card_read_time_"+n);O(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/tours/"+t+"/skip",{username:window.productFruitsUser.username,cardId:n,durationMs:u,hmac:null!==(s=null==l||null===(a=l.user)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.hmac)&&void 0!==s?s:void 0}),c.a.getInstance().trackEvent("tour_card_read",{tourId:t,tourName:e,cardId:n,cardName:o,durationMs:u,durationS:u/1e3}),c.a.getInstance().trackEvent("tour_skipped",{tourId:t,tourName:e,cardId:n,cardName:o})}}function p(t,e){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var n,o,s;const a=r.a.getCurrentIdentity();O(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/tours/"+t+"/markas",{username:window.productFruitsUser.username,userState:e,hmac:null!==(n=null==a||null===(o=a.user)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.hmac)&&void 0!==n?n:void 0})}}function f(t,e,n,r,o,i){window.productFruitsUser&&!window.ProductFruitsDesigner&&(1===o&&c.a.getInstance().trackEvent("tour_started",{tourId:t,tourName:e,cardId:n,cardName:r,currentCardOrder:o,forced:i}),j("tour_card_read_time_"+n),c.a.getInstance().willTrackLater("tour_card_read"),c.a.getInstance().trackEvent("tour_card_loaded",{tourId:t,tourName:e,cardId:n,cardName:r,currentCardOrder:o,cardOrderWithName:o+" - "+r}))}function m(t,e,n){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var o,s,a;const d=r.a.getCurrentIdentity();O(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/changelogs/"+t+"/seen",{username:window.productFruitsUser.username,channelId:e,hmac:null!==(o=null==d||null===(s=d.user)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.hmac)&&void 0!==o?o:void 0});try{let t={};Object.keys(n).forEach(e=>{t["title_"+e]=n[e]}),c.a.getInstance().trackEvent("changelog_loaded",t)}catch(t){}}}function g(t,e,n){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var s,a,d;const l=r.a.getCurrentIdentity();O(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/contexthelps/0/seen",{username:window.productFruitsUser.username,cardId:e,url:Object(o.a)(),containerId:t,hmac:null!==(s=null==l||null===(a=l.user)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.hmac)&&void 0!==s?s:void 0}),c.a.getInstance().trackEvent("context_help_loaded",{containerId:t,cardId:e,cardName:n})}}function b(t,e,n){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var s,a,d;const l=r.a.getCurrentIdentity();O(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/contexthelps/0/dismiss",{username:window.productFruitsUser.username,cardId:e,url:Object(o.a)(),containerId:t,hmac:null!==(s=null==l||null===(a=l.user)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.hmac)&&void 0!==s?s:void 0}),c.a.getInstance().trackEvent("context_help_dismissed",{containerId:t,cardId:e,cardName:n})}}function v(t,e,n,s,d,l,u,h,p,f,m){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var g,b,v;const f=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/mood",{username:window.productFruitsUser.username,tag:t,source:{dataId:e,cardId:d,url:Object(o.a)()},tourId:n,contextHelpId:u,rating:h,followUp:p,hmac:null!==(g=null==f||null===(b=f.user)||void 0===b||null===(v=b.data)||void 0===v?void 0:v.hmac)&&void 0!==g?g:void 0});const m={tourId:n,tourName:s,cardId:d,cardName:l,containerId:u,rating:h,tag:t};Object(a.a)("mood_evnt_txt")&&(m.followUp=p),c.a.getInstance().trackEvent("mood_gathered",m)}}function w(t){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var e,n,o;const s=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/checklists/batch-state",{username:window.productFruitsUser.username,groupId:r.a.groupId,itemsToUpdate:t,hmac:null!==(e=null==s||null===(n=s.user)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.hmac)&&void 0!==e?e:void 0})}}function y(t,e){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var n,o,s;const a=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/checklists/dismiss",{username:window.productFruitsUser.username,groupId:r.a.groupId,checklistId:t,isGroup:e,hmac:null!==(n=null==a||null===(o=a.user)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.hmac)&&void 0!==n?n:void 0})}}function C(t,e){if(window.productFruitsUser&&!window.ProductFruitsDesigner){var n,o,s;const a=r.a.getCurrentIdentity();k(Object(i.d)()+"/api/v1/stats/"+window.productFruits.code+"/checklists/start",{username:window.productFruitsUser.username,groupId:r.a.groupId,checklistId:t,isGroup:e,hmac:null!==(n=null==a||null===(o=a.user)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.hmac)&&void 0!==n?n:void 0})}}function O(t,e){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(t=>{console.error("Product Fruits statistics endpoint failed",t)})}function k(t,e){Object(a.a)("kpalve")?fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}).catch(t=>{console.error("Product Fruits statistics endpoint failed",t)}):navigator.brave||Object(s.b)()||Object(a.a)("nobeacon")?fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(t=>{console.error("Product Fruits statistics endpoint failed",t)}):navigator.sendBeacon(t,JSON.stringify(e))}function j(t){performance.mark(t)}function I(t){try{performance.measure(t+"_measure",t);const e=performance.getEntriesByName(t+"_measure","measure")[0];return E(t),e?Math.round(e.duration):0}catch(t){return 0}}function E(t){performance.clearMarks(t),performance.clearMeasures(t+"_measure")}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(9),o=n(7),i=n(2),s=n(4),a=n(10),c=n(8),d=n(25);let l=null;class u{constructor(t){this.config=t,this.integrators=[],this.proxiedUsed=!1,this.init()}init(){if(this.config)for(const t of this.config)if("mixpanel"===t.type)this.integrators.push(new f);else if("ganalytics"===t.type)this.integrators.push(new m);else if("heap"===t.type)this.integrators.push(new b);else if("smartlook"===t.type)this.integrators.push(new v);else if("sessionstack"===t.type)this.integrators.push(new w);else if("customerio"===t.type)this.integrators.push(new y);else if("hubspot"===t.type)this.integrators.push(new C);else if("segment"===t.type)this.integrators.push(new O);else if("gtmev"===t.type)this.integrators.push(new g);else{if(this.proxiedUsed)continue;("acmpgn"===t.type||"hubspot_proxy"===t.type)&&(this.integrators.push(new k),this.proxiedUsed=!0)}else this.integrators=[];this.integrators.push(new p)}willTrackLater(t){this.integrators.forEach(e=>{try{e.willTrackEvent(t)}catch(t){}})}trackEvent(t,e,n){this.integrators.forEach(r=>{try{r.trackEvent(t,e,n)}catch(t){}}),this.integrators.length>0&&a.a.verbose("External event tracked",t,e)}setUserProperty(t){this.integrators.forEach(e=>{try{e.setUserProperty(t)}catch(t){}})}static build(t){const e=new u(t);l=e,a.a.verbose("Creating PFIntegratorInstance",e,l)}static getInstance(){return l||{trackEvent:()=>{},willTrackLater:()=>{}}}}class h{constructor(){this.translatedEvents=[{event:"tour_started",name:"Tour started"},{event:"tour_started_from_button",name:"Tour started (Life Ring button)"},{event:"tour_finished",name:"Tour finished"},{event:"tour_skipped",name:"Tour skipped"},{event:"tour_card_loaded",name:"Tour - Card open"},{event:"tour_card_read",name:"Tour - Card read"},{event:"tour_card_button_click",name:"Tour - Custom button clicked"},{event:"tour_card_back",name:"Tour - Card step back"},{event:"changelog_loaded",name:"Announcement open"},{event:"context_help_loaded",name:"Hint open"},{event:"context_help_dismissed",name:"Hint dismissed forever"},{event:"mood_gathered",name:"Mood gathered"},{event:"feedback_sent",name:"Feedback sent"},{event:"button_widget_click",name:"Life Ring button - Widget click"},{event:"button_changelogs_click",name:"Life Ring button - Announcements click"},{event:"checklist_done",name:"Checklist completed"},{event:"checklist_dismissed",name:"Checklist dismissed"},{event:"announcements_banner_opened",name:"Announcements Banner Opened"},{event:"announcements_banner_dismissed",name:"Announcements Banner Dismissed"},{event:"announcements_banner_action_consumed",name:"Announcements Banner Action Consumed"},{event:"announcements_popup_opened",name:"Announcements Popup Opened"},{event:"announcements_popup_dismissed",name:"Announcements Popup Dismissed"},{event:"announcements_popup_dismissed",name:"Announcements Popup Dismissed"},{event:"announcements_popup_action_consumed",name:"Announcements Popup Action Consumed"},{event:"announcements_popup_stack_dimissed",name:"Announcements Popups Stack Dismissed"},{event:"announcements_newsitem_action_consumed",name:"Announcements Newsfeed Item Consumed"}]}translateEvent(t){const e=this.translatedEvents.filter(e=>e.event==t)[0];return e?e.name:t}mapEventHubspot(t){const e=Object(c.e)(),n=null==e?void 0:e.integrations.filter(t=>"hubspot"===t.type)[0];if(!n)return null;const r=JSON.parse(n.publicData);if(null==r||!r.PropertyMappings||!r.PropertyMappings[t]||!r.PropertyMappings[t].HubSpotPropertyName||""===r.PropertyMappings[t].HubSpotPropertyName.trim())return null;return r.PropertyMappings[t].HubSpotPropertyName}willTrackEvent(t){}trackEvent(t,e){}setUserProperty(t){}}class p extends h{constructor(){super()}trackEvent(t,e){Object(o.b)("pf_custom_event_fired",{event:t,data:e})}}class f extends h{constructor(){super()}willTrackEvent(t){if(window.mixpanel&&window.mixpanel.track){window.mixpanel.time_event(this.translateEvent(t))}}trackEvent(t,e){if(window.mixpanel&&window.mixpanel.track){const n=window.mixpanel,r=Object.assign({},e,{pfVendorName:"Product Fruits",$source:"product_fruits"});n.track(this.translateEvent(t),r)}}}class m extends h{constructor(){super(),this.eventsMapper=[{eventPrefix:"tour_card_",eventLabel:t=>t.cardName},{eventPrefix:"tour_",eventLabel:t=>t.tourName},{eventPrefix:"context_help_loaded",eventLabel:t=>t.cardName},{eventPrefix:"context_help_dismissed",eventLabel:t=>t.cardName},{eventPrefix:"changelog_loaded",eventLabel:t=>t.title_en||t.title_cs},{eventPrefix:"mood_gathered",eventLabel:t=>t.rating},{eventPrefix:"checklist_done",eventLabel:t=>t.checklistName},{eventPrefix:"checklist_dismissed",eventLabel:t=>t.checklistName},{eventPrefix:"announcements_",eventLabel:t=>t.name},{eventPrefix:"Survey ",eventLabel:t=>t.name}]}getEventLabel(t,e){const n=this.eventsMapper.filter(e=>t.startsWith(e.eventPrefix))[0];return n?n.eventLabel(e):""}trackEvent(t,e,n){Object(i.a)("ga4cnsl")?window.gtag&&"function"==typeof window.gtag&&gtag("event",null!=n&&n.raw?"Product Fruits Custom Event":this.translateEvent(t),{event_category:"Product Fruits",event_label:null!=n&&n.raw?this.translateEvent(t):this.getEventLabel(t,e),...e}):Object(i.a)("ga4spr")&&window.google_tag_manager&&window.dataLayer?window.dataLayer.push({event:"PFruits - "+this.translateEvent(t),...e}):window.gtag&&"function"==typeof window.gtag?gtag("event",this.translateEvent(t),{event_category:"Product Fruits",event_label:null!=n&&n.raw?t:this.getEventLabel(t,e),...e}):window.ga&&"function"==typeof window.ga&&ga("send","event",{eventCategory:"Product Fruits",eventAction:this.translateEvent(t),eventLabel:null!=n&&n.raw?t:this.getEventLabel(t,e),...e})}}class g extends h{constructor(){super()}trackEvent(t,e){window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({event:this.translateEvent(t),...e})}}class b extends h{constructor(){super()}trackEvent(t,e){if(window.heap&&"function"==typeof window.heap.track){const n=window.heap,r=Object.assign({},e,{pfVendorName:"Product Fruits"});n.track(this.translateEvent(t),r)}}setUserProperty(t){window.heap&&"function"==typeof window.heap.addUserProperties&&window.heap.addUserProperties(t)}}class v extends h{constructor(){super()}trackEvent(t,e){if(window.smartlook){const n=window.smartlook,r=Object.assign({},e,{pfVendorName:"Product Fruits"});n("track",this.translateEvent(t),r)}}}class w extends h{constructor(){super()}trackEvent(t,e){if(window.SessionStack){const n=window.SessionStack,r=Object.assign({},e,{pfVendorName:"Product Fruits",eventName:this.translateEvent(t)});n.log(r)}}}class y extends h{constructor(){super()}trackEvent(t,e){if(window._cio&&_cio.track){const n=Object.assign({},e,{pfVendorName:"Product Fruits",$source:"product_fruits"});window._cio.track(this.translateEvent(t),n)}}}class C extends h{constructor(){super()}trackEvent(t,e){if(window._hsq){const n=Object.entries(e).reduce((t,[e,n])=>(t[e.toLowerCase()]=n,t),{}),r=Object.assign({},n,{pfvendorname:"product fruits",$source:"product_fruits"}),o=this.mapEventHubspot(t);o&&window._hsq.push(["trackCustomBehavioralEvent",{name:o,properties:r}])}}}class O extends h{constructor(){super()}trackEvent(t,e){if(window.analytics&&window.analytics.track){const n=window.analytics,r=Object.assign({},e,{pfVendorName:"Product Fruits",$source:"product_fruits"});n.track(this.translateEvent(t),r)}}}class k extends h{constructor(){super(),this.eventsMapper=[{eventPrefix:"tour_card_",eventLabel:t=>t.cardName},{eventPrefix:"tour_",eventLabel:t=>t.tourName},{eventPrefix:"context_help_loaded",eventLabel:t=>t.cardName},{eventPrefix:"context_help_dismissed",eventLabel:t=>t.cardName},{eventPrefix:"changelog_loaded",eventLabel:t=>t.title_en||t.title_cs},{eventPrefix:"mood_gathered",eventLabel:t=>t.rating},{eventPrefix:"checklist_done",eventLabel:t=>t.checklistName},{eventPrefix:"checklist_dismissed",eventLabel:t=>t.checklistName}],this.enabledEvents=["checklist_done","checklist_dismissed","tour_started","tour_finished","tour_skipped","mood_gathered","feedback_sent"]}getEventLabel(t,e){const n=this.eventsMapper.filter(e=>t.startsWith(e.eventPrefix))[0];return n?n.eventLabel(e):""}trackEvent(t,e){var n,o,i;if(-1===this.enabledEvents.indexOf(t))return;var a=r.a.getCurrentIdentity();const c=`${Object(s.d)()}/api/v1/proxy-events/${window.productFruits.code}/gather`,l=this.getEventLabel(t,e);Object(d.e)(c,{userName:window.productFruitsUser.username,email:window.productFruitsUser.email,eventName:this.translateEvent(t),eventData:e,label:l,hmac:null!==(n=null==a||null===(o=a.user)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.hmac)&&void 0!==n?n:void 0})}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));var r=n(2),o=n(75);function i(t){const{iframe:e,id:n}=t;let i=document;try{const s=Object(r.a)("iframes")&&e?document.querySelector(e):null;return i=s?s.contentDocument:document,n?i.getElementById(n):Object(o.b)(t,i)}catch(t){return null}}function s(t){const{iframe:e,id:n,query:i,textQueries:s,nestingLevel:a}=t;let c=document;try{const i=Object(r.a)("iframes")&&e?document.querySelector(e):null;return c=i?i.contentDocument:document,n?[c.getElementById(n)]:Object(o.a)(t,c)}catch(e){return console.log("Product Fruits - element selector problem",e,t),null}}},function(t,e,n){"use strict";n(28);var r=n(7);let o=new class{dispatchToursLoaded(t){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfToursLoaded",{detail:{tours:t}}))}dispatchTourFinished(t){window.ProductFruitsDesigner||(document.dispatchEvent(new CustomEvent("pfTourStateChanged",{detail:{tour:t}})),window.dispatchEvent(new CustomEvent("pfTourFinished",{detail:{tour:t}})))}dispatchTourSkipped(t){window.ProductFruitsDesigner||(document.dispatchEvent(new CustomEvent("pfTourStateChanged",{detail:{tour:t}})),window.dispatchEvent(new CustomEvent("pfTourSkipped",{detail:{tour:t}})))}dispatchTourAdvanced(t){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfTourAdvanced",{detail:{tour:t}}))}dispatchTourBeforeAdvanced(t){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfTourBeforeAdvanced",{detail:{tour:t}}))}dispatchTourAttemptingStart(t){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfTourAttemptingStart",{detail:{tour:t}}))}dispatchButtonReady(){window.ProductFruitsDesigner||document.dispatchEvent(new CustomEvent("pfButtonReady",{}))}dispatchAnnouncementBannerSpacing(t){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pfBannerSpacing",{detail:{target:"top",marginTop:t}}))}dispatchOneChecklistUpdated(t){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pf_one_checklist_updated",{detail:{checklistId:t}}))}dispatchAllChecklistsUpdated(t){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pf_all_checklists_updated",{detail:t}))}dispatchChecklistItemLaunched(t,e){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pfChecklistItemLaunched",{detail:{id:t,customId:e}}))}dispatchChecklistItemCompleted(t,e){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pfChecklistItemCompleted",{detail:{id:t,customId:e}}))}dispatchChecklistDismissed(t,e){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pf_checklist_dismissed",{detail:{id:t,source:e}}))}dispatchChecklistEligibilityChanged(t,e){window.ProductFruitsDesigner||window.dispatchEvent(new CustomEvent("pfChecklistEligibilityChanged",{detail:{id:t,eligibility:e}}))}attachTourStateChanged(t){document.addEventListener("pfTourStateChanged",t)}detachTourStateChanged(t){document.removeEventListener("pfTourStateChanged",t)}attachTourFinished(t){Object(r.d)("pfTourFinished",e=>{t(e.detail.tour)})}attachTourFinished_disposable(t){return Object(r.d)("pfTourFinished",e=>{t(e.detail.tour)})}attachChecklistItemLaunched_disposable(t){return Object(r.d)("pfChecklistItemLaunched",e=>{const n=e.detail;t({internalId:n.customId,id:n.id})})}attachChecklistItemCompleted_disposable(t){return Object(r.d)("pfChecklistItemCompleted",e=>{const n=e.detail;t({internalId:n.customId,id:n.id})})}detachTourFinished(t){window.removeEventListener("pfTourFinished",t)}attachTourSkipped(t){Object(r.d)("pfTourSkipped",e=>{t(e.detail.tour)})}attachTourSkipped_disposable(t){return Object(r.d)("pfTourSkipped",e=>{t(e.detail.tour)})}attachTourAdvanced(t){Object(r.e)("pfTourAdvanced",e=>{t(e.detail.tour)})}attachTourAdvanced_disposable(t){return Object(r.e)("pfTourAdvanced",e=>{t(e.detail.tour)})}attachTourBeforeAdvanced_disposable(t){return Object(r.e)("pfTourBeforeAdvanced",e=>{t(e.detail.tour)})}detachTourSkipped(t){window.removeEventListener("pfTourSkipped",t)}attachTourAttemptingStart(t){Object(r.e)("pfTourAttemptingStart",t)}attachButtonReady(t,e=!1){const n=()=>{t(),e&&document.removeEventListener("pfButtonReady",n)};Object(r.e)("pfButtonReady",n)}attachAnnouncementsBannerSpacing(t){Object(r.e)("pfBannerSpacing",t)}attachUserChanged_disposable(t){return Object(r.d)("pfruits_user_changed",()=>{t()})}attachOneChecklistUpdated_disposable(t){return Object(r.d)("pf_one_checklist_updated",e=>{t(e)})}attachAllChecklistsUpdated_disposable(t){return Object(r.d)("pf_all_checklists_updated",e=>{t(e.detail)})}attachChecklistDismissed_disposable(t){return Object(r.d)("pf_checklist_dismissed",e=>{const n=e.detail||{};t(n.id,n.source)})}attachChecklistEligibilityChanged_disposable(t){return Object(r.d)("pfChecklistEligibilityChanged",e=>{const n=e.detail||{};t(n.id,n.eligibility)})}};e.a=o},function(t,e,n){"use strict";n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return b}));var r=n(23),o=(n(24),n(42)),i=n(2),s=n(54),a=n(10),c=n(8),d=n(29),l=n(16),u=n(7),h=n(4),p=n(6),f=n(21);const m=new Map;function g(t,e){const n=function(t,e){const n=Object(c.e)();if(n&&n.rules)return n.rules.filter(n=>n.eId==t&&n.eTp==e)[0]}(t,e);return n?n.id:null}class b{constructor(t,e=null,n=null,r=null,o=null){if(this.rulesObject=t,this.rulesFound=!0,this.segmentId=e,this.rulesId=n,"be"==o&&(r||this.segmentId)){const t=Object(c.e)();if(t&&t.rules){const r=t.rules.filter(t=>t.eId==e&&"segment"==t.eTp)[0],o=t.rules.filter(t=>t.id==n)[0];r?(this.rulesId=r.id,this.rulesObject=r.rules):o?this.rulesObject=o.rules:this.rulesFound=!1}else this.rulesFound=!1}}shouldEvaluate(){return this.rulesObject&&this.rulesObject.rules&&0!==this.rulesObject.rules.length}passes(){if(!this.rulesFound)return!1;if(!this.rulesObject||!this.rulesObject.rules||0===this.rulesObject.rules.length)return!0;const t=this.rulesObject.condOp?this.rulesObject.condOp.toUpperCase():"";let e="AND"===t;for(let n of this.rulesObject.rules)e="AND"===t?e&&this.evalExpression(n.expression,n):e||this.evalExpression(n.expression,n);return e}async passesAsync(){if((t=this.rulesObject)&&t.rules&&t.rules.filter(t=>t.expression.prop.startsWith("event.")||t.expression.prop.startsWith("user.")||t.expression.prop.startsWith("segment.")).length>0)try{const t=await Object(s.c)().sendAndListenAsync(Object(s.b)("eval-rules",{rulesId:this.rulesId}),"rules-evaluated");if(this.rulesObject=t.evalRules,null!=this.rulesObject.evaluatedResult)return this.rulesObject.evaluatedResult}catch(t){return a.a.debug("Websocket events eval error",t),!1}var t;if(!this.rulesFound)return!1;if(!this.rulesObject||!this.rulesObject.rules||0===this.rulesObject.rules.length)return!0;const e=this.rulesObject.condOp?this.rulesObject.condOp.toUpperCase():"";let n="AND"===e;for(let t of this.rulesObject.rules){const r=await this.evalExpression(t.expression,t);n="AND"===e?n&&r:n||r}return n}evalExpression(t,e){if(e&&null!=e.evaluatedResult)return!!e.evaluatedResult;if(t.prop&&t.prop.startsWith("uiact"))return this.evalUiState(t);if("="===t.op){var n;const e=this.getValueWithMetadataFromProp(t.prop);return"boolean"==(null==e?void 0:e.type)?e.value==("true"==(null===(n=t.val)||void 0===n?void 0:n.toLowerCase())):this.getValueFromProp(t.prop,!0)==t.val}if("!="===t.op){var r;const e=this.getValueWithMetadataFromProp(t.prop);return"boolean"==(null==e?void 0:e.type)?e.value!=("true"==(null===(r=t.val)||void 0===r?void 0:r.toLowerCase())):this.getValueFromProp(t.prop,!0)!=t.val}if(">"===t.op)return this.getValueFromProp(t.prop,!0)>t.val;if("<"===t.op)return this.getValueFromProp(t.prop,!0)<t.val;if(">="===t.op)return this.getValueFromProp(t.prop,!0)>=t.val;if("<="===t.op)return this.getValueFromProp(t.prop,!0)<=t.val;if("contains"===t.op){let e=this.getValueFromProp(t.prop,!0);return!e&&!t.val||!(!e&&t.val)&&(!Object(i.a)("lgc_usr_ev_arr")&&Array.isArray(e)?e.filter(e=>e==t.val).length>0:-1!==e.toString().indexOf(t.val))}if("contains_not"===t.op){let e=this.getValueFromProp(t.prop,!0);return!(!e&&!t.val)&&(!(e||!t.val)||(!Object(i.a)("lgc_usr_ev_arr")&&Array.isArray(e)?0===e.filter(e=>e==t.val).length:-1===e.toString().indexOf(t.val)))}if("is_empty"===t.op){const e=this.getValueFromProp(t.prop,!0);return null==e||""===e||!!Array.isArray(e)&&0==e.length}if("is_empty_not"===t.op){const e=this.getValueFromProp(t.prop,!0);return null!=e&&""!==e&&(!Array.isArray(e)||e.length>0)}if("tour_state_valid"===t.op||"tour_state_invalid"===t.op)return this.evalTourOperatorExpression(t);if("d_ago"===t.op)return this.evalDAgo(t);if("d_ago_max"===t.op)return this.evalDAgoMax(t);if("segment_match"===t.op||"segment_match_not"==t.op)return this.evalSegment(t);if("chklst_state_valid"===t.op||"chklst_state_invalid"===t.op)return this.evalChecklistOperatorExpression(t);if("surv_is"===t.op||"surv_not"===t.op)return this.evalSurveyOperatorExpression(t);if("rgx"===t.op||"rgx_not"===t.op){let e=this.getValueFromProp(t.prop,!1);null==e&&(e="");try{const n=new RegExp(t.val,"m");return"rgx"==t.op?n.test(e):!n.test(e)}catch(t){return console.warn("PF eval - regex problem",t),!1}}}evalUiState(t){const e=(()=>{const e=Object(c.k)(t.data)||{},n={parametrized:e.url||""};if("uiact.elState"==t.prop){const r=Object(d.a)({query:e.sel});if(!Object(l.b)(n))return!1;if("exists"==t.op)return!!r;if("not_exists"==t.op)return!r}else if("uiact.inputVal"==t.prop){const r=Object(d.a)({query:e.sel});if(!r)return!1;const o=(r.value||"").toUpperCase(),i=(t.val||"").toUpperCase();if(!Object(l.b)(n))return!1;if("="==t.op)return i==o;if("!="==t.op)return i!=o;if("contains"==t.op)return-1!==o.indexOf(i);if("contains_not"==t.op)return-1===o.indexOf(i);if("empty"==t.op)return""==o;if("empty_not"==t.op)return""!=o}})();return e||this.attachChecker(t),e}attachChecker(t){if(m.has(t))return;const e=setInterval(()=>{this.evalUiState(t)&&(Object(u.b)("pf_ui_state_changed",t),m.get(t)())},1e3);m.set(t,()=>clearInterval(e))}evalDAgoMax(t){const e=this.getValueFromProp(t.prop);return!!e&&w(new Date(e),new Date)<=t.val}evalDAgo(t){const e=this.getValueFromProp(t.prop);return!!e&&w(new Date(e),new Date)>=t.val}evalSegment(t){if(Object(i.c)()){const e=new b(null,t.val,null,!1,"be");return"segment_match"==t.op?e.passesAsync():!e.passesAsync()}{if(!window.productFruits||!window.productFruits.segments)return!0;const e=window.productFruits.segments||[];if(0==e.length)return!1;const n=e.filter(e=>e.id==t.val)[0];if(!n||!n.rules)return!1;const r=new b(n.rules);return"segment_match"==t.op?r.passes():!r.passes()}}evalTourOperatorExpression(t){if(!window.productFruits||!window.productFruits.toursFactory)return!0;const e=window.productFruits.toursFactory.tours||[];if(0==e.length)return!1;const n=e.filter(e=>e.getId&&e.getId()==t.val)[0];if(!n)return!1;if("tour_state_valid"===t.op){if("tour.fin"===t.prop)return 1==n.userState;if("tour.skip"===t.prop)return Object(i.a)("lgc_tr_schd_skp")?2==n.userState:99==n.userState||2==n.userState;if("tour.fin_skip"===t.prop)return Object(i.a)("lgc_tr_schd_skp")?2==n.userState||1==n.userState:99==n.userState||2==n.userState||1==n.userState}else if("tour_state_invalid"===t.op){if("tour.fin"===t.prop)return 1!=n.userState;if("tour.skip"===t.prop)return(Object(i.a)("lgc_tr_schd_skp")||99!=n.userState)&&2!=n.userState;if("tour.fin_skip"===t.prop)return Object(i.a)("lgc_tr_schd_skp")?2!=n.userState&&1!=n.userState:99!=n.userState&&2!=n.userState&&1!=n.userState}return!1}evalChecklistOperatorExpression(t){if(!window.productFruits||!window.productFruits.checklistsFactory)return!0;const e=h.c.checklistsFactory.checklists||[];if(0==e.length)return!1;const n=e.filter(e=>e.getId&&e.getId()==t.val)[0];if(!n)return!1;if("chklst_state_valid"===t.op){if("chklst.compl"===t.prop)return 1==n.config.state&&n.isDismissed;if("chklst.dismis"===t.prop)return 1!=n.config.state&&n.isDismissed;if("chklst.compl_dismis"===t.prop)return 1==n.config.state||n.isDismissed;if("chklst.in_prgrs"===t.prop)return 1!=n.config.state&&!n.isDismissed}return!1}evalSurveyOperatorExpression(t){var e,n;const r=null===(e=p.a.getState().surveys.descriptor)||void 0===e||null===(n=e.items)||void 0===n?void 0:n.find(e=>e.id==t.val);if(!r)return!1;if("surv_is"==t.op){if("surv.fin"==t.prop)return r.usrSt==f.c.ClosedDone;if("surv.skip"==t.prop)return r.usrSt==f.c.ClosedNotDone}else if("surv_not"==t.op){if("surv.fin"==t.prop)return r.usrSt!=f.c.ClosedDone;if("surv.skip"==t.prop)return r.usrSt!=f.c.ClosedNotDone}return!1}getValueWithMetadataFromProp(t){let[e,n,...i]=t.split(".");if("user"===e){var s=window.productFruitsUser;if(!s)return;let t=null;return t=i.length>0?Object(r.b)([n,...i],s):s[n],{value:t,type:typeof t}}return"device"===e&&"type"===n?{value:Object(o.a)()}:"env"===e&&"language"===n&&window.productFruits?{value:window.productFruits.language}:void 0}getValueFromProp(t,e=!1){let[n,i,...s]=t.split(".");if("user"===n){var a=window.productFruitsUser;if(!a)return;let t=null;return t=s.length>0?Object(r.b)([i,...s],a):a[i],null!=t&&void 0!==t||(t=""),e?t:t.toString()}return"device"===n&&"type"===i?Object(o.a)():"env"===n&&"language"===i&&window.productFruits?window.productFruits.language:void 0}}function v(t){var e=new Date(t);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}function w(t,e){return(v(e)-v(t))/864e5}},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"o",(function(){return u})),n.d(e,"k",(function(){return h})),n.d(e,"i",(function(){return p})),n.d(e,"h",(function(){return f})),n.d(e,"f",(function(){return m})),n.d(e,"g",(function(){return g})),n.d(e,"m",(function(){return b})),n.d(e,"n",(function(){return v})),n.d(e,"j",(function(){return w})),n.d(e,"a",(function(){return y})),n.d(e,"d",(function(){return C})),n.d(e,"b",(function(){return O})),n.d(e,"e",(function(){return k})),n.d(e,"l",(function(){return j}));var r=n(3),o=n(46),i=n(49),s=n(2),a=n(83),c=(n(16),n(6)),d=n(78);function l(t,e){const n=y(t);return t.surveys.answers.find(t=>t.sId==n.id&&t.qId==e&&t.sesId==n.sesId)}function u(t){const e=Object(c.d)(e=>{var n;return null===(n=e.surveys.descriptor)||void 0===n?void 0:n.items.filter(t=>{var e;return null!==(e=null!=t.sesId)&&void 0!==e?e:[]}).filter(e=>null==t||!t.additionalFilter||(null==t?void 0:t.additionalFilter(e))).filter(t=>{var e;return-1!==(null!==(e=t.inclLocs)&&void 0!==e?e:[]).indexOf(window.productFruits.language)})}),[n,d]=Object(r.useState)([]),[l,u]=Object(r.useState)("loading"),h=e.filter(t=>-1!==n.indexOf(t.id)),p=Object(r.useRef)([]),f=Object(r.useCallback)(t=>{Object(a.a)(e.map(t=>t.id)),t.forEach(t=>{var e,n,r,i;p.current.push(Object(a.c)(t.id,async()=>{const e=await Object(o.a)([t],{log:!0});d(n=>{let r=n.slice();return e.length>0?r.push(t.id):r=r.filter(e=>e!=t.id),r}),u("loaded")},null!==(e=null===(n=t.trgrOpts)||void 0===n?void 0:n.delMs)&&void 0!==e?e:0,!(null!==(r=t.urlFilter)&&void 0!==r&&null!==(i=r.urls)&&void 0!==i&&i.length)))}),Object(s.a)("bnr_strct")&&0==t.length&&d([])},[]);return Object(r.useEffect)(()=>()=>{p.current.forEach(t=>t())},[]),Object(r.useEffect)(()=>{const t=Object(o.b)(()=>{const t=Object(i.a)(e).visibleIds;let n=e.filter(e=>-1!==t.indexOf(e.id));f(n)});return()=>{t()}},[e.map(t=>t.id).join("|"),f]),Object(r.useEffect)(()=>{u("loading");const t=Object(i.a)(e,async({visibleIds:t,hiddenIds:n})=>{let r=e.filter(e=>-1!==t.indexOf(e.id));f(r)});return()=>{t()}},[e.map(t=>t.id).join("|"),f]),window.ProductFruitsDesigner?{filteredItems:e,filteringState:"loaded"}:{filteredItems:h,filteringState:l}}function h(t,e){const n=Object(c.d)(e=>{var n,r;return null===(n=e.surveys.descriptor)||void 0===n||null===(r=n.items)||void 0===r?void 0:r.filter(e=>e.id==t)[0]}),o=Object(c.d)(t=>t.surveys.fetchDetailsWithCaching),[i,s]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{!1!==e&&(t?o([t]).finally(()=>s(!0)):s(!1))},[t,n,e]),[n,null!=n&&i]}function p(){var t;const e=Object(c.d)(y),n=Object(c.d)(t=>t.surveys.stepsManagement.currentStepId);return null===(t=O(e))||void 0===t?void 0:t.find(t=>t.id==n)}function f(){var t,e;const n=Object(c.d)(y),r=Object(c.d)(t=>t.surveys.stepsManagement.currentStepId);return null!==(t=null===(e=n.questions)||void 0===e?void 0:e.filter(t=>t.groupId==r))&&void 0!==t?t:[]}function m(){const t=f().filter(t=>t.required).map(t=>t.id),e=w(),n=Object(c.d)(t=>t.surveys.answers).filter(n=>n.sId==e.id&&t.includes(n.qId)&&n.sesId==e.sesId);return 0==t.length||t.length==n.length&&(n.length>0&&n.every(t=>null!=t.answer))}function g(){const t=p(),e=b(null==t?void 0:t.id);return!(null!=t&&t.required&&!e)}function b(t){const e=w(),n=Object(c.d)(n=>n.surveys.answers.find(n=>n.sId==e.id&&n.qId==t&&n.sesId==e.sesId));return null==n?void 0:n.answer}function v(t){const e=w(),n=Object(c.d)(n=>n.surveys.answers.find(n=>n.sId==e.id&&n.qId==t&&n.sesId==e.sesId));return null==n?void 0:n.addit}function w(){return Object(c.d)(y)}function y(t){var e,n,r;return null===(e=t.surveys.descriptor)||void 0===e||null===(n=e.items)||void 0===n||null===(r=n.filter(e=>e.id==t.surveys.renderedSurveyId))||void 0===r?void 0:r[0]}function C(t,e){return t.order>e.order?1:t.order<e.order?-1:0}function O(t){var e;return null!==(e="small"==t.layout?t.questions:t.groups)&&void 0!==e?e:[]}function k(t){const e=Object(c.d)(t=>t.surveys.answerQuestion),n=Object(c.d)(y),o="small"==(null==n?void 0:n.layout),[i,s]=Object(r.useState)(!1),a=Object(r.useRef)(),d=Object(c.d)(t=>t.surveys.stepsManagement.goToNextStep);Object(r.useEffect)(()=>()=>{clearTimeout(a.current)},[]);return{answerQuestion:Object(r.useCallback)((n,r,i)=>{o&&!t?(s(!0),e(n,r,i),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{d(),s(!1)},1100)):e(n,r,i)},[e,o,d,t]),answringInProgress:i}}function j(){var t,e;const n=w(),r=Object(c.d)(t=>t.surveys.stepsManagement.currentStepId),o=Object(c.d)(t=>t.surveys.answers.filter(t=>t.sesId==n.sesId)),i=null===(t=n.branching)||void 0===t?void 0:t.filter(t=>t.refId==r)[0];let s=null,a=!1;const l=O(n);if(i){const t=Object(d.a)(i,o);"fin"==t?a=!0:s=l.find(e=>e.id==t)}if(a)return!0;if(!(i&&s||a)){const t=l.slice().sort(C),e=t.findIndex(t=>t.id==r);s=t[e+1]}return!(null!==(e=s)&&void 0!==e&&e.id)}},,,,,function(t,e,n){"use strict";function r(t){return 0===t?0:t||null}n.d(e,"a",(function(){return r}))},,,,function(t,e,n){"use strict";function r(t){var e=document.createElement("template");return e.innerHTML=t,e.content.firstChild}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){return window.matchMedia("(max-width: 768px)").matches?"mobile":"desktop"}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(16);function o(t){return!t||!t.urls||0===t.urls.length||("exclude"===t.type?!t.urls.some(t=>Object(r.b)(t)):t.urls.some(t=>Object(r.b)(t)))}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(31);class o{constructor(t){this.segmentId=t,this.segmentRules=(window.productFruits&&window.productFruits.segments||[]).filter(e=>e.id==t)[0]}passes(){if(!this.segmentRules)return!0;return new r.a(this.segmentRules.rules).passes()}passesAsync(){if(!this.segmentRules)return!0;return new r.a(this.segmentRules.rules).passesAsync()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return b}));var r=n(7),o=n(2),i=n(30),s=n(54),a=n(31),c=n(45),d=n(17),l=n(13);let u;!function(t){t[t.TourStateChange=0]="TourStateChange",t[t.UserInfoChange=1]="UserInfoChange",t[t.EventTracked=2]="EventTracked",t[t.UIStateChange=3]="UIStateChange",t[t.ChecklistVisibilityChange=4]="ChecklistVisibilityChange",t[t.ServerSignal=5]="ServerSignal"}(u||(u={}));u.EventTracked,u.ServerSignal,u.UserInfoChange,u.TourStateChange;const h=new Map;async function p(t,e){const n=[];if(Object(o.a)("rlsevl")){if(Object(o.c)()){const o=[];for(const i of t){var r;if(h.has(i.id)){h.get(i.id).evalRes&&n.push(i);continue}const t=null!==(r=i.segment)&&void 0!==r?r:i.segmentId,s=new a.a(i.rules,t,null!=e&&e.getRulesId?e.getRulesId(i):i.rulesId,null!=e&&e.hasRules?e.hasRules(i):null!=i.rulesId,"be");o.push({promise:s.passesAsync(),item:i})}const i=await Promise.allSettled(o.map(t=>t.promise));let s=0;for(const t of o){const e=i[s],r=e.value;"fulfilled"==e.status&&h.set(t.item.id,{evalRes:r,rules:t.item.rules}),r&&n.push(t.item),s++}}else for(const e of t){var i;if(h.has(e.id)){h.get(e.id).evalRes&&n.push(e);continue}const t=null!==(i=e.segment)&&void 0!==i?i:e.segmentId,r=new a.a(e.rules).passes()&&new c.a(t).passes();h.set(e.id,{evalRes:r,rules:e.rules}),r&&n.push(e)}return n}for(const r of t){var s;if(h.has(r.id)){h.get(r.id).evalRes&&n.push(r);continue}const t=null!==(s=r.segment)&&void 0!==s?s:r.segmentId;if(Object(o.c)()){var d;const o=new a.a(r.rules,t,null!=e&&e.getRulesId?e.getRulesId(r):r.rulesId,null!=e&&e.hasRules?e.hasRules(r):null!=r.rulesId,"be"),i=await o.passesAsync();null!=e&&e.log&&Object(l.a)(t=>{var e;t.surveys.log.push({feAt:new Date,surveyId:r.id,rulesId:r.rulesId,segment:null!==(e=r.segment)&&void 0!==e?e:r.segmentId,reFound:o.rulesFound,reSegmentId:o.segmentId,reObject:o.rulesObject})}),m(r.id,r.rulesId,null!==(d=r.segment)&&void 0!==d?d:r.segmentId,null!=i&&i,"berules-eval",o),h.set(r.id,{evalRes:i,rules:o.rulesObject}),i&&n.push(r)}else{var u;const e=new a.a(r.rules).passes()&&new c.a(t).passes();m(r.id,r.rulesId,null!==(u=r.segment)&&void 0!==u?u:r.segmentId,null!=e&&e,"standard-eval"),h.set(r.id,{evalRes:e,rules:r.rules}),e&&n.push(r)}}return n}function f(t){Object(l.a)(e=>{e.announcements.log||(e.announcements.log=[]);const n={feAt:new Date,announcementId:t.announcementId,rulesId:t.rulesId,segment:t.segment,result:t.result,place:t.place};t.rulesEval&&(n.reFound=t.rulesEval.rulesFound,n.reSegmentId=t.rulesEval.segmentId,n.reObject=t.rulesEval.rulesObject),e.announcements.log.push(n)})}function m(t,e,n,r,i,s){try{const l={announcementId:t,rulesId:e,segment:n,result:r,place:i,rulesEval:s};if(Object(o.a)("ann_log_all"))f(l);else if(Object(o.a)("ann_log_htm")){var a,c;(null!==(a=null===d.a||void 0===d.a||null===(c=d.a.config)||void 0===c?void 0:c.bnrLogIds)&&void 0!==a?a:[]).includes(t)&&f(l)}}catch{}}const g={[u.ChecklistVisibilityChange]:"chklst.",[u.EventTracked]:"event.",[u.TourStateChange]:"tour.",[u.UIStateChange]:"uiact.",[u.UserInfoChange]:"user."};function b(t){const e=[];function n(e,n){if(Object(o.c)()){const n=[];for(const[t,o]of h){var r,i;const s=null!==(r=null===(i=o.rules)||void 0===i?void 0:i.rules)&&void 0!==r?r:[];e==u.ServerSignal?s.some(t=>{var e,n,r,o;return(null===(e=t.expression)||void 0===e||null===(n=e.prop)||void 0===n?void 0:n.startsWith("user."))||(null===(r=t.expression)||void 0===r||null===(o=r.prop)||void 0===o?void 0:o.startsWith("event."))})&&n.push(t):s.some(t=>{var n,r;return null===(n=t.expression)||void 0===n||null===(r=n.prop)||void 0===r?void 0:r.startsWith(g[e])})&&n.push(t)}n.forEach(t=>h.delete(t)),t&&t(n)}else{const e=Array.from(h.keys());h.clear(),t&&t(e)}}return e.push(i.a.attachTourFinished_disposable(t=>n(u.TourStateChange,t))),e.push(i.a.attachTourSkipped_disposable(t=>n(u.TourStateChange,t))),e.push(i.a.attachUserChanged_disposable(()=>n(u.UserInfoChange))),e.push(Object(r.c)("pf_event_tracked",t=>n(u.EventTracked,t))),e.push(Object(r.c)("pf_ui_state_changed",()=>n(u.UIStateChange))),e.push(i.a.attachChecklistDismissed_disposable(()=>Object(o.a)("chk_rls")&&n(u.ChecklistVisibilityChange))),Object(o.c)()&&e.push(Object(s.c)().listenTo("rules-source-data-updated",()=>{n(u.ServerSignal)})),()=>{e.forEach(t=>t())}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return O}));var r=n(3),o=n(9),i=n(46),s=n(49),a=n(4),c=n(7),d=n(24),l=n(77),u=n(22),h=n(2),p=n(21),f=n(20),m=n(6),g=n(17),b=n(13);function v(t){try{var e,n,r,i,s,c;if(window.ProductFruitsDesigner)return;const l=m.a.getState(),u=(null!==(e=null==l||null===(n=l.announcements)||void 0===n?void 0:n.log)&&void 0!==e?e:[]).slice(-100),h=null==l||null===(r=l.announcements)||void 0===r?void 0:r.sesId;if(!h)return void console.warn("No announcement session ID available");if(!u||0===u.length)return;const p=null===o.a||void 0===o.a||null===(i=o.a.user)||void 0===i?void 0:i.username;if(!p)return;Object(b.a)(t=>{t.announcements.log=[]});const f={username:p,sesId:h,hmac:null!==(s=null===o.a||void 0===o.a||null===(c=o.a.user)||void 0===c?void 0:c.hmac)&&void 0!==s?s:void 0,log:0==u.length?null:JSON.stringify(u)};return Object(d.b)(`/api/v1/stats/${a.a.code}/announcement/${t}/event`,f)}catch(t){return console.error("Error sending announcement event:",t),Promise.reject(t)}}var w=n(52);const y=(t,e)=>{var n,r;return{log:[],sesId:Object(f.a)(),descriptor:null!==(n=null===(r=g.a.config)||void 0===r?void 0:r.announcementsV2)&&void 0!==n?n:{items:[]},unreaadListenersCount:0,fetchedAnnouncementIds:[],renderedPopup:{inPrimaryLayerIds:[]},fetchDetailsWithCaching:async n=>{var r,i,s,c;const l=e().announcements.fetchedAnnouncementIds,u=n.filter(t=>-1===l.indexOf(t));var h=o.a.getCurrentIdentity();const p={ids:u,hmac:null!==(r=null==h||null===(i=h.user)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.hmac)&&void 0!==r?r:void 0,username:null==h||null===(c=h.user)||void 0===c?void 0:c.username};if(u.length>0){var f;l.push(...n);const e=null!=h&&null!==(f=h.user)&&void 0!==f&&f.username?"&username="+encodeURIComponent(h.user.username):"";return Object(d.b)(`/api/v2/stats/${a.a.code}/announcements/public-batch?fields=hdcnts&fields=cnts${e}`,p).then(e=>{const n=e.map(t=>t.id);t(t=>{var r,o;return{...t,announcements:{...t.announcements,descriptor:{items:null===(r=t.announcements.descriptor)||void 0===r||null===(o=r.items)||void 0===o?void 0:o.map(t=>{const r=e.filter(e=>e.id==t.id)[0];return-1!==n.indexOf(t.id)?{...t,cnts:null==r?void 0:r.cnts,hdCnts:null==r?void 0:r.hdCnts,pAct:null==r?void 0:r.pAct,sAct:null==r?void 0:r.sAct,title:null==r?void 0:r.title}:{...t}})}}}})})}return new Promise(t=>t())},markAsSeen:(n,r)=>{const i=Array.isArray(n)?n:[n];var s=o.a.getCurrentIdentity();if(r){var c;const h=null===(c=e().announcements.descriptor)||void 0===c?void 0:c.items.filter(t=>-1!==i.indexOf(t.id)&&!t.aTr).map(t=>t.id);var l,u,f;if(h.length>0)Object(d.b)(`/api/v1/stats/${a.a.code}/announcements/${n}/seen`,{username:o.a.user.username,ids:h,shallow:r,hmac:null!==(l=null==s||null===(u=s.user)||void 0===u||null===(f=u.data)||void 0===f?void 0:f.hmac)&&void 0!==l?l:void 0}),t(t=>{var e;return{...t,announcements:{...t.announcements,descriptor:{...t.announcements.descriptor,items:[...t.announcements.descriptor.items.map(t=>i.includes(t.id)?{...t,aTr:!0}:{...t})]}},notifications:{...t.notifications,displayed:((null===(e=t.notifications)||void 0===e?void 0:e.displayed)||[]).filter(t=>!i.includes(t.id))}}})}else{var m,b,w,y;const c=null===(m=e().announcements.descriptor)||void 0===m?void 0:m.items.filter(t=>-1!==i.indexOf(t.id)&&t.userState!=p.b.Seen).map(t=>t.id);Object(d.b)(`/api/v1/stats/${a.a.code}/announcements/${n}/seen`,{username:o.a.user.username,ids:c,shallow:r,hmac:null!==(b=null==s||null===(w=s.user)||void 0===w||null===(y=w.data)||void 0===y?void 0:y.hmac)&&void 0!==b?b:void 0});try{if(Object(h.a)("ann_log_all"))i.forEach(t=>{v(t)});else if(Object(h.a)("ann_log_htm")){var C,O;const t=null!==(C=null===g.a||void 0===g.a||null===(O=g.a.config)||void 0===O?void 0:O.bnrLogIds)&&void 0!==C?C:[];i.forEach(e=>{t.includes(e)&&v(e)})}}catch{}t(t=>{var e;return{...t,announcements:{...t.announcements,descriptor:{...t.announcements.descriptor,items:[...t.announcements.descriptor.items.map(t=>i.includes(t.id)?{...t,userState:p.b.Seen}:{...t})]}},notifications:{...t.notifications,displayed:((null===(e=t.notifications)||void 0===e?void 0:e.displayed)||[]).filter(t=>!i.includes(t.id))}}})}},markAllAsSeen:(n,r,i)=>{const s=n,c=Object(u.a)(),l=Object(u.b)();var h=o.a.getCurrentIdentity();const f=t=>{const e=void 0!==t.timeFrom?Object(u.b)(t.pFrom,t.timeFrom,t.timeZone)<=l:Object(u.a)(t.pFrom)<=c,n=void 0===t.pTo||(void 0!==t.timeTo?Object(u.b)(t.pTo,t.timeTo,t.timeZone)>=l:Object(u.a)(t.pTo)>=c);return e&&n};if(r){var m;const n=null===(m=e().announcements.descriptor)||void 0===m?void 0:m.items.filter(t=>-1!==s.indexOf(t.id)&&!t.aTr&&t.type===(null!=i?i:p.a.NewsFeed)&&f(t)).map(t=>t.id);var g,b,v;if(n.length>0)Object(d.b)(`/api/v1/stats/${a.a.code}/announcements/seen-all`,{username:o.a.user.username,ids:n,shallow:r,hmac:null!==(g=null==h||null===(b=h.user)||void 0===b||null===(v=b.data)||void 0===v?void 0:v.hmac)&&void 0!==g?g:void 0}),t(t=>({...t,announcements:{...t.announcements,descriptor:{...t.announcements.descriptor,items:[...t.announcements.descriptor.items.map(e=>s.includes(e.id)&&f(t)?{...e,aTr:!0}:{...e})]}},notifications:{...t.notifications,displayed:[]}}))}else{var w,y,C,O;const n=null===(w=e().announcements.descriptor)||void 0===w?void 0:w.items.filter(t=>-1!==s.indexOf(t.id)&&t.userState!=p.b.Seen&&t.type===(null!=i?i:p.a.NewsFeed)&&f(t)).map(t=>t.id);Object(d.b)(`/api/v1/stats/${a.a.code}/announcements/seen-all`,{username:o.a.user.username,ids:n,shallow:r,hmac:null!==(y=null==h||null===(C=h.user)||void 0===C||null===(O=C.data)||void 0===O?void 0:O.hmac)&&void 0!==y?y:void 0}),t(t=>({...t,announcements:{...t.announcements,descriptor:{...t.announcements.descriptor,items:[...t.announcements.descriptor.items.map(t=>s.includes(t.id)&&f(t)?{...t,userState:p.b.Seen}:{...t})]}},notifications:{...t.notifications,displayed:[]}}))}},markAllToastNewsAsSeen:()=>{var n;const r=Object(u.a)(),i=Object(u.b)();var s=o.a.getCurrentIdentity();const l=null===(n=e().announcements.descriptor)||void 0===n?void 0:n.items.filter(t=>{var e;return t.type===p.a.NewsFeed&&t.userState===p.b.Unseen&&(null===(e=t.cfg)||void 0===e?void 0:e.notif)&&(t=>{const e=void 0!==t.timeFrom?Object(u.b)(t.pFrom,t.timeFrom,t.timeZone)<=i:Object(u.a)(t.pFrom)<=r,n=void 0===t.pTo||(void 0!==t.timeTo?Object(u.b)(t.pTo,t.timeTo,t.timeZone)>=i:Object(u.a)(t.pTo)>=r);return e&&n})(t)}).map(t=>t.id);var h,f,m;l.length>0&&(Object(d.b)(`/api/v1/stats/${a.a.code}/announcements/seen-all`,{username:o.a.user.username,ids:l,hmac:null!==(h=null==s||null===(f=s.user)||void 0===f||null===(m=f.data)||void 0===m?void 0:m.hmac)&&void 0!==h?h:void 0}),t(t=>({...t,announcements:{...t.announcements,descriptor:{...t.announcements.descriptor,items:t.announcements.descriptor.items.map(t=>l.includes(t.id)?{...t,userState:p.b.Seen}:t)}},notifications:{...t.notifications,displayed:[]}})),Object(c.b)(w.a,{id:l,nonDirectInteraction:!1,withoutAction:!0}))},markListAsChecked:()=>{},setRenderedPopup:(e,n)=>{const r=Array.isArray(e)?e:[e];t("primary"==n?t=>({...t,announcements:{...t.announcements,renderedPopup:{...t.announcements.renderedPopup,inPrimaryLayerIds:[...r,...t.announcements.renderedPopup.inPrimaryLayerIds]}}}):t=>({...t,announcements:{...t.announcements,renderedPopup:{...t.announcements.renderedPopup,inSecondaryLayerId:r[0]}}}))},dismissRenderedPopup:(e,n)=>{const r=Array.isArray(e)?e:[e];t("primary"==n?t=>({...t,announcements:{...t.announcements,renderedPopup:{...t.announcements.renderedPopup,inPrimaryLayerIds:[...t.announcements.renderedPopup.inPrimaryLayerIds.filter(t=>-1===r.indexOf(t))]}}}):t=>({...t,announcements:{...t.announcements,renderedPopup:{...t.announcements.renderedPopup,inSecondaryLayerId:null}}}))},setRenderedBannerId:e=>{t(t=>({...t,announcements:{...t.announcements,renderedBannerId:e}})),l.a.setObject("rendered_banner",e)}}};function C(t,e){const n=Object(m.d)(e=>{var n,r,o;return null!==(n=null===(r=e.announcements.descriptor)||void 0===r||null===(o=r.items)||void 0===o?void 0:o.filter(e=>e.type==t))&&void 0!==n?n:[]}),o=Object(m.d)(n=>{var r,o,i;return null!==(r=null===(o=n.announcements.descriptor)||void 0===o||null===(i=o.items)||void 0===i?void 0:i.filter(n=>{var r;return n.type==t&&-1!==(null!==(r=n.lngs)&&void 0!==r?r:[]).indexOf(window.productFruits.language)&&(null==e||!e.onlyUnseen||n.userState==p.b.Unseen)&&(null==e||!e.additionalFilter||(null==e?void 0:e.additionalFilter(n)))}).slice().sort((t,n)=>"newTop"==(null==e?void 0:e.order)?t.at>n.at?-1:n.at<t.at?1:0:"oldTop"==(null==e?void 0:e.order)?t.at<n.at?-1:n.at>t.at?1:0:0))&&void 0!==r?r:[]}),[a,c]=Object(r.useState)([]),[d,l]=Object(r.useState)("loading"),u=o.filter(t=>-1!==a.indexOf(t.id)).slice(0,null==e?void 0:e.maxCount);return Object(r.useEffect)(()=>{const t=Object(i.b)(()=>{const t=Object(s.a)(n).visibleIds;Object(i.a)(n.filter(e=>-1!==t.indexOf(e.id))).then(t=>{c(t.map(t=>t.id)),l("loaded")})});return()=>{t()}},[n.map(t=>t.id).join("|")]),Object(r.useEffect)(()=>{l("loading");const t=Object(s.a)(o,async({visibleIds:t,hiddenIds:e})=>{const n=await Object(i.a)(o.filter(e=>-1!==t.indexOf(e.id)));c(n.map(t=>t.id)),l("loaded")});return()=>{t()}},[t,o.map(t=>t.id).join("|")]),{filteredItems:u,filteringState:d}}function O(t,e){const n=Object(m.d)(e=>{var n,r;return null===(n=e.announcements.descriptor)||void 0===n||null===(r=n.items)||void 0===r?void 0:r.filter(e=>e.id==t)[0]}),o=Object(m.d)(t=>t.announcements.fetchDetailsWithCaching),[i,s]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{!1!==e&&(t?o([t]).finally(()=>s(!0)):s(!1))},[t,n,e]),[n,null!=n&&i]}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(43),o=n(7);let i=[];function s(t){const e=t?[t]:i;for(const t of e){const e=[],n=[];if(t.items.forEach(t=>{Object(r.a)(t.urlFilter)?e.push(t.id):n.push(t.id)}),!t.callback)return{visibleIds:e,hiddenIds:n};t.callback({visibleIds:e,hiddenIds:n})}}function a(t,e){const n={items:t,callback:e};return e?(i.push(n),s(n),()=>{i=i.filter(t=>t!=n)}):s(n)}Object(o.d)("pfruits_locationchange",()=>{s()})},function(t,e,n){"use strict";function r(t,e,n=1e3,r="parent"){!function t(e,n,r,o,i){if((new Date).getTime()-o>r)return;("width"==i?e.offsetWidth:e.offsetParent)?n():window.requestAnimationFrame(()=>{t(e,n,r,o,i)})}(t,e,n,(new Date).getTime(),r)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(11),o=n(5),i=n(10),s=n(1),a=n(2),c=n(20),d=n(65);class l{constructor(t,{targetElements:e,boundingIsTextContent:n,clickHandler:o,transparentBgColor:i,solidBgColor:s,highlighterColor:l,highlighterSpacing:u,highlighterThickness:h,zIndex:p=null,useAnimations:f=!0,useFrameBuffer:m=!0,containerized:g=!1,cssId:b=""}={}){const v=Object(c.a)();this.isContainerized=g;const w=r.a.getSubContainer("ubackdrop-a"+(g?"-"+v:""),"start"),y=r.a.getSubContainer("ubackdrop-b"+(g?"-"+v:""),"start");this.contA=w,this.contB=y;try{this.contA.setAttribute("data-session",d.b.id),this.contB.setAttribute("data-session",d.b.id)}catch(t){}m?0===w.children.length?this.backdropContainer=w:(y.innerHTML="",this.backdropContainer=y):this.backdropContainer=w,this.useAnimations=f,this.backdropParts={left:null,top:null,right:null,bottom:null,highlighter:null},this.backdropMarginGap=Number(null!=u?u:Object(a.a)("pos_pop")?2:5),this.targetElements=e,this.boundingIsTextContent=n,this.backdropJson=t||{},this.transparentBgColor=i||"#00000066",this.solidBgColor=s||"#fff",this.blockingBgColor="transparent",this.highlighterColor=l||"#283593",this.highlighterThickness=Number(null!=h?h:3)+"px",this.clickHandler=o,this.zIndex=p,this.backdropContainer&&this.backdropContainer.setAttribute("data-entity-id",b),this.backdropContainer.classList.toggle("backdrop-container"),this.applyToElement()}reinit(t){this.backdropJson=t||{},this.removeBackdrop(),this.applyToElement()}get type(){return this.backdropJson.type}applyToElement(){if(this.type){if("boxed"==this.type||"boxed_bg"==this.type||"boxed_noblock"===this.type){if(!this.targetElements)return void i.a.verbose("Target element is required");if(1===this.targetElements.length){var t=this.targetElements[0];if(!t)return;var e=t.getBoundingClientRect();if(Object(a.a)("iframes")&&(e=Object(s.f)(t)),this.boundingIsTextContent){var n=Array.from(t.childNodes).filter(t=>!!t.textContent&&t.textContent.trim&&""!=t.textContent.trim())[0];if(n&&n.nodeType===Node.TEXT_NODE){var r=document.createRange();r.selectNode(n),e=Object(a.a)("iframes")?Object(s.f)(t,r):r.getBoundingClientRect(),r.detach()}}this.appendBackdropBlockingParts(e),this.backdropParts.highlighter||(this.backdropParts.highlighter=this.createBd("highlighter",this.useAnimations,this.type,this.zIndex));var c=Object(a.a)("pos_pop")?this.backdropMarginGap:this.backdropMarginGap+2;this.backdropParts.highlighter.style.left=Object(o.a)(e.left-c+window.scrollX),this.backdropParts.highlighter.style.top=Object(o.a)(e.top-c+window.scrollY),this.backdropParts.highlighter.style.width=Object(o.a)(e.width+2*c),this.backdropParts.highlighter.style.height=Object(o.a)(e.height+2*c),"boxed_bg"==this.type?this.backdropParts.highlighter.style.boxShadow=`${this.highlighterColor} 0px 0px 0px ${this.highlighterThickness}, ${this.transparentBgColor} 0px 0px 0px 4000px`:"boxed_noblock"==this.type?(this.backdropParts.highlighter.style.boxShadow=`${this.highlighterColor} 0px 0px 0px ${this.highlighterThickness}`,this.backdropParts.left.style.pointerEvents="none",this.backdropParts.top.style.pointerEvents="none",this.backdropParts.right.style.pointerEvents="none",this.backdropParts.bottom.style.pointerEvents="none"):this.backdropParts.highlighter.style.boxShadow=`${this.highlighterColor} 0px 0px 0px ${this.highlighterThickness}`}else 0===this.targetElements.length?console.error("Boxed backdrop must be bound to at least one target element."):console.info("Multi element highlighting is not supported.")}else if("blocking"==this.type)this.createSingleBackdrop(this.blockingBgColor);else if("solid"==this.type)this.createSingleBackdrop(this.solidBgColor);else if("transparent"==this.type)this.createSingleBackdrop(this.transparentBgColor);else if("glow"==this.type||"glow_block"==this.type){const t=this.targetElements[0],e=Object(a.a)("iframes")?Object(s.f)(t):t.getBoundingClientRect();this.glowBackdrop&&this.glowBackdrop.isConnected||(this.glowBackdrop=Object(s.h)("div",{class:Object(s.i)("glow-highlighter"),style:{"--h-s":"1000px","--b-t":Object(o.a)(e.top),"--b-l":Object(o.a)(e.left),"--b-w":Object(o.a)(e.width),"--b-h":Object(o.a)(e.height)}})),this.glowBackdrop.style.setProperty("--h-s","1600px"),this.glowBackdrop.style.setProperty("--b-t",Object(o.a)(e.top)),this.glowBackdrop.style.setProperty("--b-l",Object(o.a)(e.left)),this.glowBackdrop.style.setProperty("--b-w",Object(o.a)(e.width)),this.glowBackdrop.style.setProperty("--b-h",Object(o.a)(e.height)),this.glowBackdrop.style.setProperty("--h-c",this.transparentBgColor),this.glowBackdrop.style.zIndex=this.zIndex?this.zIndex:10000010,"glow_block"==this.type&&this.appendBackdropBlockingParts(e),this.glowBackdrop.isConnected||(this.useAnimations?Object(s.b)(this.backdropContainer,this.glowBackdrop,{anim:"fadein-fast",removeAnimationClassAfterDuration:500}):this.backdropContainer.appendChild(this.glowBackdrop))}}else this.removeBackdrop()}appendBackdropBlockingParts(t){var e=document.documentElement.clientWidth,n=(document.documentElement.clientHeight,document.documentElement.scrollHeight);this.backdropParts.left||(this.backdropParts.left=this.createBd("left",!1,"",this.zIndex)),this.backdropParts.top||(this.backdropParts.top=this.createBd("top",!1,"",this.zIndex)),this.backdropParts.right||(this.backdropParts.right=this.createBd("right",!1,"",this.zIndex)),this.backdropParts.bottom||(this.backdropParts.bottom=this.createBd("bottom",!1,"",this.zIndex)),this.backdropParts.left.style.left=0,this.backdropParts.left.style.top=0,this.backdropParts.left.style.right=Object(o.a)(e-t.left+this.backdropMarginGap),this.backdropParts.left.style.pointerEvents=null,this.backdropParts.top.style.top=0,this.backdropParts.top.style.left=Object(o.a)(t.left-this.backdropMarginGap),this.backdropParts.top.style.right=Object(o.a)(e-t.left-t.width-this.backdropMarginGap),this.backdropParts.top.style.pointerEvents=null,this.backdropParts.right.style.top=0,this.backdropParts.right.style.right=0,this.backdropParts.right.style.left=Object(o.a)(t.left+t.width+this.backdropMarginGap),this.backdropParts.right.style.pointerEvents=null,this.backdropParts.bottom.style.top=Object(o.a)(t.bottom+this.backdropMarginGap),this.backdropParts.bottom.style.left=Object(o.a)(t.left-this.backdropMarginGap),this.backdropParts.bottom.style.right=Object(o.a)(e-t.left-t.width-this.backdropMarginGap),this.backdropParts.bottom.style.pointerEvents=null,this.backdropParts.left.style.height=Object(o.a)(n),this.backdropParts.top.style.height=Object(o.a)(t.top-this.backdropMarginGap),this.backdropParts.right.style.height=Object(o.a)(n),this.backdropParts.bottom.style.height=Object(o.a)(n-t.top-t.height-window.scrollY-this.backdropMarginGap)}createSingleBackdrop(t){this.backdropContainer.innerHTML="",this.backdropEl=document.createElement("div"),this.backdropEl.style.position="fixed",this.backdropEl.style.top=0,this.backdropEl.style.left=0,this.backdropEl.style.right=0,this.backdropEl.style.bottom=0,this.backdropEl.style.zIndex=this.zIndex?this.zIndex:10000010,this.backdropEl.className="productfruits--single-backdrop",this.backdropEl.style.backgroundColor=t,this.backdropEl.addEventListener("click",t=>{this.clickHandler&&this.clickHandler(t),t.preventDefault(),t.stopImmediatePropagation()}),this.backdropContainer.appendChild(this.backdropEl)}removeBackdrop(){this.backdropEl&&Object(s.d)(this.backdropEl,"fadeout-fast",this.useAnimations?500:0),this.backdropParts.highlighter&&Object(s.d)(this.backdropParts.highlighter,"fadeout-fast",this.useAnimations?500:0),this.backdropParts.left&&this.backdropParts.left.remove(),this.backdropParts.bottom&&this.backdropParts.bottom.remove(),this.backdropParts.top&&this.backdropParts.top.remove(),this.backdropParts.right&&this.backdropParts.right.remove(),this.backdropParts.left=this.backdropParts.bottom=this.backdropParts.top=this.backdropParts.right=this.backdropParts.highlighter=null,this.glowBackdrop&&(Object(s.d)(this.glowBackdrop,"fadeout-fast",this.useAnimations?500:0),this.glowBackdrop=null),this.backdropContainer&&this.backdropContainer.removeAttribute("data-entity-id")}dispose(){this.removeBackdrop(),this.isContainerized&&(this.contA.remove(),this.contB.remove())}setVisibility(t){this.backdropContainer.style.display=t?null:"none"}detachFromViewport(){this.backdropContainer.style.visibility="hidden",this.backdropContainer.style.pointerEvents="none"}reattachToViewport(){this.backdropContainer.style.visibility=null,this.backdropContainer.style.pointerEvents=null}createBd(t,e=!1,n="",r=null){var o=document.createElement("div");return o.dataset.backdropType=n,o.className="productfruits--quadbackdrop productfruits--backdrop-"+t,null!=r&&(o.style.zIndex=r),o.addEventListener("click",t=>{this.clickHandler&&this.clickHandler(t),t.stopImmediatePropagation(),t.preventDefault()}),Object(a.a)("bgdrp_stp")&&(o.addEventListener("mousedown",t=>{t.stopImmediatePropagation(),t.preventDefault()}),o.addEventListener("mouseup",t=>{t.stopImmediatePropagation(),t.preventDefault()}),o.addEventListener("pointerdown",t=>{t.stopImmediatePropagation(),t.preventDefault()}),o.addEventListener("pointerup",t=>{t.stopImmediatePropagation(),t.preventDefault()})),e?Object(s.b)(this.backdropContainer,o,{anim:"fadein-fast",removeAnimationClassAfterDuration:500}):this.backdropContainer.appendChild(o),o}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="pf_notif_consumed"},,function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m}));var r=n(9),o=n(4),i=n(7),s=n(10),a=n(2),c=n(53),d=n(20);class l{constructor(){this.listeners=[],this.actionsQueue=[],this.lastReconnectAttempt=null,this.lastMessageSentTime=new Date,this.connectionAttemptCounter=0,this.messagesCounter=0,this.batchQueue=[],this.isWaitingForBatchSend=!1,Object(i.d)("beforeunload",()=>{this.disconnect()})}startPing(){this.pingInterval=setInterval(()=>{},6e4)}processQueuedMessages(){const t=[];this.actionsQueue.forEach(e=>{this.sendQueued(e)&&t.push(e)}),this.actionsQueue=this.actionsQueue.filter(e=>-1===t.indexOf(e))}connect(){if(this.ws&&1==this.ws.readyState)return;if(this.ws&&1!=this.ws.readyState&&this.ws.close(),this.isSessionDisposed)return;this.currentUsername==r.a.user.username&&this.currentGroup==r.a.groupId||(this.actionsQueue=[]),this.currentUsername=r.a.user.username,this.currentGroup=r.a.groupId;let t=Object(o.g)()+"?username="+encodeURIComponent(r.a.user.username)+"&projectCode="+encodeURIComponent(o.a.code);null!=r.a.groupId&&(t+="&groupId="+encodeURIComponent(r.a.groupId));if(t+=`${"&v="+Object(c.a)()}${"&t="+Object(c.b)()}`,clearTimeout(this.reconnectionTimeout),g(this.lastReconnectAttempt)>60&&(this.reconnectionWaiting=!1,this.connectionAttemptCounter=0),this.connectionAttemptCounter>7&&g(this.lastReconnectAttempt)<7)return this.reconnectionWaiting=!0,void(this.reconnectionTimeout=setTimeout(()=>{this.reconnectionWaiting=!1,this.connect()},8e3));this.ws=new WebSocket(t),this.isConnected=!0,this.lastReconnectAttempt=new Date,this.connectionAttemptCounter++,this.ws.onopen=t=>{clearInterval(this.pingInterval),this.startPing(),this.processQueuedMessages()},this.ws.onclose=t=>{if(this.disconnectingFlag)return this.disconnectingFlag=!1,void(this.isConnected=!1);this.connect()},this.ws.onmessage=t=>{if(t.data.startsWith('"primus::ping::')){const e='"primus::pong::'+t.data.replace('"',"").replace("primus::ping::","");try{this.ws.send(e)}catch{}return}if(t.data.startsWith('"a::'))return;const e=JSON.parse(t.data),n=t=>{t?"pong"!=t.action&&("killswitch"==t.action&&(this.isSessionDisposed=!0,this.disconnect()),this.listeners.filter(e=>e.action==t.action).forEach(e=>e.callback(t)),t._id&&this.listeners.filter(e=>e.msgUuid==t._id).forEach(e=>e.callback(t))):s.a.error("Socket message response - one of batch items is null")};if(Object(a.a)("lgc_sckt_btc"))n(e);else if("batch-response"==e.action)for(const t of e.msgs)n(t);else n(e)}}sendQueued(t,e=!1){if(!this.ws)return!1;if(this.isSessionDisposed)return!1;if(1!=this.ws.readyState)return!e&&!this.actionsQueue.includes(t)&&this.actionsQueue.push(t),!1;try{const e=2,n=Object(a.a)("sckhlmt")?1500:500;if(this.messagesCounter>n&&g(this.lastMessageSentTime)<=e)return void console.info("PF - too many messages");if(g(this.lastMessageSentTime)<=e?this.messagesCounter++:this.messagesCounter=0,this.lastMessageSentTime=new Date,Object(a.a)("lgc_sckt_btc"))this.ws.send(JSON.stringify(t));else{if(this.batchQueue.push(t),this.isWaitingForBatchSend)return!0;const e=parseInt(localStorage.getItem("pf_pref_tmout_sockets"))||40;setTimeout(()=>{try{this.ws.send(JSON.stringify(m("batch",{msgs:this.batchQueue}))),this.batchQueue=[]}finally{this.isWaitingForBatchSend=!1}},e),this.isWaitingForBatchSend=!0}return!0}catch(n){return 1!=this.ws.readyState?(!e&&!this.actionsQueue.includes(t)&&this.actionsQueue.push(t),this.connect()):s.a.error(n),!1}}sendAndListenAsync(t,e,n=1e4){return new Promise((e,r)=>{const o=Object(d.a)();let i=null;const s=this.listenToSpecific(o,t=>{clearTimeout(i),e(t),s()});t._id=o,this.sendQueued(t),i=setTimeout(()=>{s(),r("No response from PF server")},n)})}disconnect(){try{if(!this.ws||3==this.ws.readyState)return;this.disconnectingFlag=!0,this.isConnected=!1,this.ws.close()}catch(t){}}listenTo(t,e){const n={action:t,callback:e};return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(t=>t!=n)}}listenToSpecific(t,e){const n={msgUuid:t,callback:e};return this.listeners.push(n),()=>{this.listeners=this.listeners.filter(t=>t!=n)}}get isSessionDisposed(){return"1"==sessionStorage.getItem(b)}set isSessionDisposed(t){t?sessionStorage.getItem(b,"1"):sessionStorage.removeItem(b)}}const u=new Map;function h(){return r.a.user.username+r.a.groupId}function p(){const t=h(),e=u.get(t);if(e)return e;const n=new l;return n.connect(),u.set(t,n),n}function f(){const t=h(),e=u.get(t);e&&(e.disconnect(),u.delete(t))}function m(t,e){return{action:t,username:r.a.user.username,projectCode:o.a.code,...e}}function g(t){return(new Date-t)/1e3}const b="pf_sockets_session_disposed"},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(29),o=n(2);function i(t,e,{parent:n,recursive:i,onlyOnce:s=!0,includeDisplay:a=!0,showDelayMs:c}={}){let d=null,l=null,u=!1,h=null,p=setTimeout(()=>{const a=Object(r.a)(t);a?e([a]):(d=new MutationObserver((function(n){l=setTimeout(()=>{if(l&&clearTimeout(l),u)return;const n=Object(r.a)(t);let i=[];if(n&&i.push(n),i.length>0){this.disconnect(),window.requestAnimationFrame((function(){setTimeout((function(){u||(u=!0,e(i),s&&(d.disconnect(),Object(o.a)("iframes")&&h&&clearInterval(h)))}),100)}))}},c||0)})),d.observe(n||document,{subtree:!i,childList:!0,attributeFilter:Object(o.a)("mutattr")?["class","disabled"]:void 0}),Object(o.a)("iframes")&&(h=setInterval(()=>{const n=Object(r.a)(t);n&&(clearInterval(h),h=null,window.requestAnimationFrame(()=>{u||(e([n]),u=!0)}),s&&d&&d.disconnect())},1e3)))},c||0);return()=>{d&&d.disconnect(),p&&clearTimeout(p),l&&clearTimeout(l),h&&clearInterval(h)}}},function(t,e,n){"use strict";function r(t,e,n){try{t.setAttribute(e,n)}catch(t){console.info("PF - elementSetAttributeSafe problem",t)}}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(2);function o(t,e){let n=t;const r=e.split(/::shadow/).map(t=>t.trim().replace(/^>/,"").replace(/>$/g,"").trim());for(let t=0;t<r.length;t++){const e=r[t];if(!e)break;if(n=n.querySelector(e),!n)return null;if(t<r.length-1){if(!n.shadowRoot)return null;n=n.shadowRoot}}return n}function i(t,e){if(!Object(r.a)("shdwdm"))return t.querySelectorAll(e);let n=[t];const o=e.split(/::shadow/).map(t=>t.trim().replace(/^>/,"").replace(/>$/g,"").trim());for(let t=0;t<o.length;t++){const e=o[t];if(!e)break;const r=[];for(const t of n){const n=t.querySelectorAll(e);for(const t of n)r.push(t)}if(n=r,t<o.length-1){const t=[];for(const e of n)e.shadowRoot&&t.push(e.shadowRoot),t.push(e);n=t}}return n}function s(t){const e=[],n=Array.from(document.body.childNodes);if(document.body.shadowRoot)for(const t of document.body.shadowRoot.childNodes)n.push(t);for(;n.length>0;){const r=n.pop();1===r.nodeType&&(r.matches(t)&&e.push(r),r.shadowRoot&&n.push(...r.shadowRoot.childNodes),n.push(...r.childNodes))}return e}function a(t,e){if(!t||e<=0)return t;for(let n=0;n<Math.min(e,100);n++){if(!t.parentElement){const e=t.getRootNode();if(e instanceof ShadowRoot&&e.host){t=e.host;continue}break}t=t.parentElement}return t}function c(t,e=20,n=document){const r=[],o=[n];for(;o.length>0;){const t=o.pop();switch(t.nodeType){case Node.ELEMENT_NODE:i(t);break;case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:o.push(...t.childNodes);break;default:continue}if(r.length>=e)break}return r;function i(e){if(e.shadowRoot)for(const t of e.shadowRoot.childNodes)a(t)&&o.push(t);for(const t of e.children)a(t)&&o.push(t);a(e)&&s(e,t)&&(function(e){for(const n of e.childNodes)if(n.nodeType===Node.ELEMENT_NODE&&s(n,t)&&a(n))return!0;return!1}(e)||r.push(e))}function s(t,e){const n=t.textContent||"";for(const t of e){const e=t.isCaseSensitive?t.text:t.text.toLowerCase(),r=t.isCaseSensitive?n:n.toLowerCase();if(t.isExactMatch?r===e:r.includes(e))return!0}return!1}function a(t){if(!(t instanceof Element))return!1;const e=window.getComputedStyle(t);if(t.offsetWidth<=0||t.offsetHeight<=0||"none"===e.display||"hidden"===e.visibility||"0"===e.opacity)return!1;const n=t.getRootNode();return!(n instanceof ShadowRoot)||a(n.host)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(38),o=n(4),i=n(39),s=n(2);const a=[];function c(t){const e=t.replace(/style="(.*?)"/gi,(t,e)=>`data-style="${e}"`);const n=document.createElement("div");n.innerHTML=e;const o=function(t){const e=t.querySelectorAll("[data-style]"),n=Object(r.b)();return e.forEach((t,e)=>{const r=t.getAttribute("data-style"),o=((t,e=0)=>{let n=3735928559^e,r=1103547991^e;for(let e,o=0;o<t.length;o++)e=t.charCodeAt(o),n=Math.imul(n^e,2654435761),r=Math.imul(r^e,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)})(r),i="customStyle"+window.crypto.randomUUID();t.classList.add(i),t.removeAttribute("data-style"),a.includes(o)?a.push(o):n instanceof CSSStyleSheet?n.insertRule(`.${i} { ${r} }`,n.cssRules.length):n.textContent+=`.${i} { ${r} }`}),n}(n);return{html:n.innerHTML,sheet:o}}function d(t){try{if(!Object(s.a)("cspfx")||Object(i.a)())return t;if(!t)return"";const e=c(t);return Object(r.a)(o.a.shadowRoot,e.sheet),e.html}catch(e){return t}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(1),o=n(8);function i(t,e){var n,r;n=t,r=e.cardBackgroundColor,n.style.backgroundColor=r,r&&-1!==r.indexOf("gradient")?n.style.backgroundImage=r:n.style.backgroundImage=null;var i=t.getElementsByClassName("productfruits--card-header")[0],s=t.getElementsByClassName("productfruits--card-body")[0],a=t.getElementsByClassName("productfruits--card-footer")[0],c=t.getElementsByClassName("productfruits--card-arrow")[0];i.style.color=e.cardTextColor,a.style.color=e.cardTextColor,s.style.color=e.cardTextColor,c&&c.style.setProperty("--arrow-bg-color",e.cardBackgroundColor||"white"),Object(o.g)(["v2","v3"])?e.dividersColor&&(i.style.setProperty("--border-color",e.dividersColor),a.style.setProperty("--border-color",e.dividersColor)):(i.style.borderBottomColor=e.dividersColor,a.style.borderTopColor=e.dividersColor);var d=t.getElementsByClassName("productfruits--card-footer-next-button")[0],l=t.getElementsByClassName("productfruits--card-footer-back-button")[0],u=t.getElementsByClassName("productfruits--card-footer-skip-button")[0],h=t.getElementsByClassName("productfruits--card-footer-close-button")[0],p=t.getElementsByClassName("productfruits--card-footer-dismiss-button")[0];d&&(d.style.backgroundColor=e.nextButtonBackgroundColor,d.style.color=e.nextButtonTextColor),l&&(l.style.backgroundColor=e.nextButtonBackgroundColor,l.style.color=e.nextButtonTextColor),u&&(u.style.backgroundColor=e.skipButtonBackgroundColor,u.style.color=e.skipButtonTextColor),h&&(h.style.backgroundColor=e.skipButtonBackgroundColor,h.style.color=e.skipButtonTextColor),p&&(p.style.backgroundColor=e.dismissButtonBackgroundColor,p.style.color=e.dismissButtonTextColor),Array.from(t.getElementsByClassName("productfruits--btn-card-content")).forEach(t=>{t.hasAttribute("data-pf-skip-design")||(t.style.backgroundColor=e.nextButtonBackgroundColor,t.style.color=e.nextButtonTextColor)});var f=t.getElementsByClassName("productfruits--card-footer-steps-counter")[0];f&&(f.style.color=e.counterTextColor);var m=t.getElementsByClassName("productfruits--branding")[0];m&&(m.style.color=e.cardTextColor)}function s(t,e){var n,r;e||(e={}),t.style.position="fixed",t.style.right=0,t.style.bottom=(n=e.mainButtonBotomYOffset,r="200px",n?/^\d+$/.test(n)?n+"px":n:r),e.mainButtonTextColor&&(t.style.color=e.mainButtonTextColor),e.mainButtonBackgroundColor&&(t.style.backgroundColor=e.mainButtonBackgroundColor)}function a(t,e){if(e||(e={}),e.popupsBackgroundColor&&(t.style.background=e.popupsBackgroundColor),e.popupsTextColor&&(t.style.color=e.popupsTextColor,Object(o.g)(["v2","v3"]))){const n=t.getElementsByClassName(Object(r.i)("feedback-popup-sendfeedback"))[0];n&&(n.style.color=e.popupsTextColor)}if(e.popupsButtonBackgroundColor)if(Object(o.g)(["v2","v3"])){for(let n of t.querySelectorAll("button:not(.productfruits--feedback-popup-close):not(.productfruits--feedback-popup-attach-btn)"))n.style.background=e.popupsButtonBackgroundColor;for(let n of t.querySelectorAll(".productfruits--feedback-popup-attach-btn")){const t=n.querySelector(".productfruits--feedback-popup-attach-btn-icon");t&&(t.style.background=e.popupsButtonBackgroundColor)}for(let n of t.querySelectorAll(".productfruits--feedback-popup-close-std"))n.style.background=e.popupsButtonBackgroundColor}else{for(let n of t.querySelectorAll("button:not(.productfruits--feedback-popup-close)"))n.style.background=e.popupsButtonBackgroundColor;for(let n of t.querySelectorAll(".productfruits--feedback-popup-close-std"))n.style.background=e.popupsButtonBackgroundColor}if(e.popupsButtonTextColor){for(let n of t.querySelectorAll("button:not(.productfruits--feedback-popup-close)")){n.style.color=e.popupsButtonTextColor;for(let t of n.querySelectorAll(".productfruits--icon"))t.style.backgroundColor=e.popupsButtonTextColor}for(let n of t.querySelectorAll(".productfruits--feedback-popup-close-std"))n.style.color=e.popupsButtonTextColor}if(e.textInputsBackgroundColor)for(let n of t.querySelectorAll("textarea, input[type=text]"))n.style.background=e.textInputsBackgroundColor;if(e.textInputsTextColor)for(let n of t.querySelectorAll("textarea, input[type=text]"))n.style.color=e.textInputsTextColor;const n=t.getElementsByClassName("productfruits--feedback-popup-header")[0];if(n&&(n.style.background=e.popupsHeaderBackgroundColor,n.style.color=e.popupsHeaderTextColor,Object(o.g)(["v2","v3"]))){const n=t.getElementsByClassName("productfruits--feedback-popup-close")[0];n&&(n.style.backgroundColor=e.popupsHeaderTextColor)}if(e.popupsTextColor)for(let n of t.querySelectorAll(".productfruits--feedback-popup-attach-btn")){const t=n.querySelector(".productfruits--feedback-popup-attach-btn-text");t&&(t.style.color=e.popupsTextColor)}else for(let e of t.querySelectorAll(".productfruits--feedback-popup-attach-btn")){const t=e.querySelector(".productfruits--feedback-popup-attach-btn-text");t&&(t.style.color="rgb(106, 106, 106)")}}function c(t,e){if(e)if(t.firstElementChild&&"svg"==t.firstElementChild.tagName.toLowerCase()){for(const n of t.querySelectorAll(".hotspot-colored-element-stroke"))n.style.stroke=e.mainIconBeaconColor;for(const n of t.querySelectorAll(".hotspot-colored-element-fill"))n.style.fill=e.mainIconBeaconColor}else{const n=t.querySelector(".productfruits--context-help-help-icon-content"),r=t.querySelector(".productfruits--context-help-help-icon-content-ico");n&&(n.style.background=e.mainIconBackgroundColor),r&&(r.style.backgroundColor=e.mainIconColor)}}},,,function(t,e,n){"use strict";var r=n(34),o=n(35),i=n(68),s=n(66),a=n(4),c=n(67),d=n(8),l=n(42),u=n(2),h=n(37),p=n(5),f=n(1);function m(t){switch(t){case"ol":return"left";case"ot":return"top";case"ob":return"bottom";case"or":return"right";case"otr":return"top-start";case"obr":return"bottom-start";case"otl":return"top-end";case"obl":return"bottom-end";case"olt":return"left-end";case"olb":return"left-start";case"ort":return"right-end";case"orb":return"right-start"}return"bottom-start"}e.a=class{constructor(t,e,n,r=null,o={}){this.targetElement=t,this.cardElement=e,this.targetPositionElement=r,this.config=o||{},this.positionConfig=this.config.positionConfig||{},this.scrollMargin=this.positionConfig.scrollMargin,this.cardHolder=this.config.cardHolder,this.motionSenzor=new c.a(this.targetElement,()=>{this.applyPosition(!0),n&&n()}),!1!==this.config.useTimer&&(window.__pfTimers||(window.__pfTimers=0),window.__pfTimers++,this.positionTimer=setInterval(()=>{this.applyPosition(!0),n&&n()},700))}getFinalPositionIdent(){return this.positionConfig.position?this.positionConfig.position:"a"}updateCardElement(t,e){const n=this.cardElement.querySelector(t);n&&e(n)}applyPosition(t){var e,n,c;if(this.isDisposed)return;const g=this.cardElement.getElementsByClassName(Object(f.i)("card-arrow"))[0];Object(u.a)("crd_rsp_w")?(this.cardElement.style.width="var(--card-responsive-width)",this.cardElement.style.maxWidth=this.positionConfig.width||"340px"):this.cardElement.style.width=this.positionConfig.width,this.updateCardElement(".productfruits--card-body",t=>{t.style.minHeight=this.positionConfig.minHeight}),this.positionConfig.maxHeight&&this.cardElement.classList.contains(Object(f.i)("card"))&&(this.cardElement.style.maxHeight=this.positionConfig.maxHeight,this.cardElement.style.display="flex",this.cardElement.style.flexDirection="column",this.cardElement.style.overflow="hidden",this.updateCardElement(".productfruits--card-body",t=>{t.style.overflowY="auto"}));const b=this.targetPositionElement?this.targetPositionElement:this.targetElement;let v=b.getBoundingClientRect(),w=b;if(this.config.boundingIsTextContent){var y=Array.from(b.childNodes).filter(t=>!!t.textContent&&t.textContent.trim&&""!=t.textContent.trim())[0];if(y&&y.nodeType===Node.TEXT_NODE){var C=document.createRange();C.selectNode(y),v=C.getBoundingClientRect(),C.detach(),w=C}}b.isConnected&&!Object(d.h)(v)&&(this.lastKnownTargetElementRect=v),!b.isConnected&&Object(d.h)(v)&&(v=this.lastKnownTargetElementRect?this.lastKnownTargetElementRect:new DOMRect);const O=Object(a.i)()?15:10;let k="unknown";const j=()=>{const e=[Object(r.d)(O),Object(r.f)(Object(u.a)("crd_rsp_w")?{crossAxis:!0}:{}),Object(r.c)({fallbackPlacements:["bottom-start","bottom","bottom-end","right-start","right","right-end","top-start","top","top-end","left-start","left","left-end"],padding:10})];this.positionConfig.arrowToTarget&&e.push(Object(r.a)({element:g,padding:12})),Object(o.b)(w,this.cardElement,{middleware:e,placement:m(this.getFinalPositionIdent())}).then(e=>{if(this.cardElement.style.left=Object(p.a)(e.x),this.cardElement.style.top=Object(p.a)(e.y),e.middlewareData&&e.middlewareData.arrow){const t=10,n=e.middlewareData.arrow;let r=e.placement?e.placement.split("-")[0]:"";const o=({left:t,right:e,top:n,bottom:o})=>{Object(a.i)()?(this.cardElement.style.setProperty("--card-arrow-left",Object(h.a)(t)),this.cardElement.style.setProperty("--card-arrow-right",Object(h.a)(e)),this.cardElement.style.setProperty("--card-arrow-top",Object(h.a)(n)),this.cardElement.style.setProperty("--card-arrow-bottom",Object(h.a)(o)),this.cardElement.setAttribute("data-arrow-pos",r)):(g.style.left=Object(h.a)(t),g.style.right=Object(h.a)(e),g.style.top=Object(h.a)(n),g.style.bottom=Object(h.a)(o))};"right"==r?(r="left",Object(a.i)()?o({right:"100%",top:Object(p.a)(n.y)}):o({left:Object(p.a)(-t),top:Object(p.a)(n.y)})):"left"==r?(r="right",Object(a.i)()?o({left:"100%",top:Object(p.a)(n.y)}):o({right:Object(p.a)(-t),top:Object(p.a)(n.y)})):"top"==r?(r="bottom",Object(a.i)()?o({top:"100%",left:Object(p.a)(n.x)}):o({bottom:Object(p.a)(-t),left:Object(p.a)(n.x)})):"bottom"==r&&(r="top",Object(a.i)()?o({bottom:"100%",left:Object(p.a)(n.x)}):o({top:Object(p.a)(-t),left:Object(p.a)(n.x)}));const i=Object(f.i)("card-arrow-"+r);g.classList.contains(i)||(Object(f.j)(g,Object(f.i)("card-arrow-")),g.classList.add(i))}else Object(f.j)(g,Object(f.i)("card-arrow-"));!0!==t&&setTimeout(()=>{Object(f.l)(this.targetElement,this.scrollMargin)},200)})};if("a"==this.getFinalPositionIdent()){const e={height:this.cardElement.offsetHeight,width:this.cardElement.offsetWidth};if(Object(u.a)("pos_pop")||"mobile"!=Object(l.a)())if(Object(u.a)("old_positioning"))window.innerHeight/2>v.top?this.cardElement.style.top=Object(p.a)(v.top+v.height+20+window.scrollY):this.cardElement.style.top=Object(p.a)(v.top-e.height-20+window.scrollY),window.innerWidth/2>v.left?this.cardElement.style.left=Object(p.a)(v.left+window.scrollX-O):this.cardElement.style.left=Object(p.a)(v.left+v.width-e.width+window.scrollX+O),!0!==t&&setTimeout(()=>{Object(f.l)(this.targetElement,this.scrollMargin)},200);else if(Object(u.a)("pos_pop"))j();else{const n=.22*window.innerWidth,r=.78*window.innerHeight,o=v.right<n,i=v.left>r;function I(){const t=window.scrollY+v.top+e.height-(window.scrollY+window.innerHeight);return t>0?window.scrollY+v.top-t-O:window.scrollY+v.top-O}o?(this.cardElement.style.left=Object(p.a)(v.right+window.scrollX+20),this.cardElement.style.top=Object(p.a)(I()),k="left"):i?(this.cardElement.style.left=Object(p.a)(v.left-e.width-20-window.scrollX),this.cardElement.style.top=Object(p.a)(I()),k="right"):(window.innerWidth/2>v.left?this.cardElement.style.left=Object(p.a)(v.left+window.scrollX-O):this.cardElement.style.left=Object(p.a)(v.left+v.width-e.width+window.scrollX+O),window.innerHeight/2>v.top?(this.cardElement.style.top=Object(p.a)(v.top+v.height+20+window.scrollY),k="top"):(this.cardElement.style.top=Object(p.a)(v.top-e.height-20+window.scrollY),k="bottom")),!0!==t&&setTimeout(()=>{Object(f.l)(this.targetElement,this.scrollMargin)},200)}else window.innerHeight/2>v.top?this.cardElement.style.top=Object(p.a)(v.top+v.height+20+window.scrollY):this.cardElement.style.top=Object(p.a)(v.top-e.height-20+window.scrollY),this.cardElement.style.left=Object(p.a)(window.innerWidth/2-e.width/2+window.scrollX),!0!==t&&setTimeout(()=>{Object(f.l)(this.targetElement,this.scrollMargin)},200)}else if(this.getFinalPositionIdent().startsWith("_det")){this.cardHolder.style.position="fixed",this.cardElement.classList.add("productfruits--card-dialog-style"),this.cardElement.style.top=null,this.cardElement.style.left=null,this.cardElement.style.right=null,this.cardElement.style.bottom=null;const e=Object.assign({},this.positionConfig);e.position=e.position.replace("_det-",""),Object(i.a)(this.cardHolder,this.cardElement,e),Object(f.j)(g,Object(f.i)("card-arrow-")),!0!==t&&this.targetElement&&setTimeout(()=>{Object(f.l)(this.targetElement,this.scrollMargin)},200)}else Object(u.a)("pos_pop")?j():(this.cardElement.style.right=null,k=Object(s.b)(this.cardElement,v,this.positionConfig.position,{cardGap:20})),!0!==t&&setTimeout(()=>{Object(f.l)(this.targetElement,this.scrollMargin)},200);if(Object(u.a)("iframes")&&this.targetElement.ownerDocument!==document&&!this.targetPositionElement&&null!==(e=this.targetElement)&&void 0!==e&&null!==(n=e.ownerDocument)&&void 0!==n&&null!==(c=n.defaultView)&&void 0!==c&&c.frameElement){const t=Object(f.g)(this.targetElement.ownerDocument.defaultView.frameElement);if(this.cardElement.style.top){const e=parseInt(this.cardElement.style.top);this.cardElement.style.top=Object(p.a)(t.y+e)}if(this.cardElement.style.left){const e=parseInt(this.cardElement.style.left);this.cardElement.style.left=Object(p.a)(t.x+e)}}if(!Object(u.a)("pos_pop")&&g)if(this.positionConfig.arrowToTarget)if("unknown"==k)console.info("arrow unknown position");else{const t=({left:t,right:e,top:n,bottom:r})=>{g.style.left=Object(h.a)(t),g.style.right=Object(h.a)(e),g.style.top=Object(h.a)(n),g.style.bottom=Object(h.a)(r)},e=11,n=11,r=this.cardElement.getBoundingClientRect();if("left"==k){const o=Math.max(n,v.top-r.top)+Math.min(v.height/2,r.height/2-n)-e/2;t({top:Object(p.a)(o),left:Object(p.a)(-e)})}else if("right"==k){const o=Math.max(n,v.top-r.top)+Math.min(v.height/2,r.height/2-n)-e/2;t({top:Object(p.a)(o),right:Object(p.a)(-e)})}else if("top"==k){const o=Math.max(n,v.left-r.left)+Math.min(v.width/2,r.width/2-n)-e/2;t({top:Object(p.a)(-e),left:Object(p.a)(o)})}else if("bottom"==k){const o=Math.max(n,v.left-r.left)+Math.min(v.width/2,r.width/2-n)-e/2;t({bottom:Object(p.a)(-e),left:Object(p.a)(o)})}Object(f.j)(g,Object(f.i)("card-arrow-")),g.classList.add(Object(f.i)("card-arrow-"+k))}else Object(f.j)(g,Object(f.i)("card-arrow-"))}dispose(){this.isDisposed=!0,this.positionTimer&&(window.__pfTimers||(window.__pfTimers=1),window.__pfTimers--,clearInterval(this.positionTimer)),this.motionSenzor.detach()}}},,,function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var r=n(5);function o(t,e,n,o={}){const i=o.dependentElementRect||{height:t.offsetHeight,width:t.offsetWidth},s=i.height/2,a=i.width/2,c=e.height/2,d=e.width/2,l=void 0===o.compensation?10:o.compensation,u=void 0===o.gap?20:o.gap;o.invertedY&&("orb"==n?n="ort":"ort"==n?n="orb":"olb"==n?n="olt":"olt"==n&&(n="olb"));let h="unknown";return"or"==n?(t.style.left=Object(r.a)(e.left+e.width+u),t.style.top=Object(r.a)(e.top+c-s+window.scrollY),h="left"):"ol"==n?(t.style.left=Object(r.a)(e.left-i.width-u),t.style.top=Object(r.a)(e.top+c-s+window.scrollY),h="right"):"ot"==n?(t.style.left=Object(r.a)(e.left+d-a),t.style.top=Object(r.a)(e.top-i.height-u+window.scrollY),h="bottom"):"ob"==n?(t.style.left=Object(r.a)(e.left+d-a),t.style.top=Object(r.a)(e.top+e.height+u+window.scrollY),h="top"):"obl"==n?(t.style.left=Object(r.a)(e.left+e.width-i.width+l),t.style.top=Object(r.a)(e.top+e.height+u+window.scrollY),h="top"):"obr"==n?(t.style.left=Object(r.a)(e.left-l),t.style.top=Object(r.a)(e.top+e.height+u+window.scrollY),h="top"):"olb"==n?(t.style.left=Object(r.a)(e.left-i.width-u),t.style.top=Object(r.a)(e.top-l+window.scrollY),h="right"):"olt"==n?(t.style.left=Object(r.a)(e.left-i.width-u),t.style.top=Object(r.a)(e.top+e.height-i.height+l+window.scrollY),h="right"):"otr"==n?(t.style.left=Object(r.a)(e.left-l),t.style.top=Object(r.a)(e.top-i.height-u+window.scrollY),h="bottom"):"otl"==n?(t.style.left=Object(r.a)(e.left+e.width-i.width+l),t.style.top=Object(r.a)(e.top-i.height-u+window.scrollY),h="bottom"):"orb"==n?(t.style.left=Object(r.a)(e.left+e.width+u),t.style.top=Object(r.a)(e.top-l+window.scrollY),h="left"):"ort"==n&&(t.style.left=Object(r.a)(e.left+e.width+u),t.style.top=Object(r.a)(e.top+e.height-i.height+l+window.scrollY),h="left"),h}function i(t,e,n,o={}){const i=window.scrollY,s=window.scrollX,a=(o.dependentElementDesiredWidth||28)/2,c=e.height/2,d=e.width/2;"lt"==n?(t.style.left=Object(r.a)(e.left+s-a),t.style.top=Object(r.a)(e.top+i-a)):"l"==n?(t.style.left=Object(r.a)(e.left+s-a),t.style.top=Object(r.a)(e.top+c+i-a)):"lb"==n?(t.style.left=Object(r.a)(e.left+s-a),t.style.top=Object(r.a)(e.top+e.height+i-a)):"rt"==n?(t.style.left=Object(r.a)(e.left+e.width+s-a),t.style.top=Object(r.a)(e.top+i-a)):"r"==n?(t.style.left=Object(r.a)(e.left+e.width+s-a),t.style.top=Object(r.a)(e.top+c+i-a)):"rb"==n?(t.style.left=Object(r.a)(e.left+e.width+s-a),t.style.top=Object(r.a)(e.top+e.height+i-a)):"t"==n?(t.style.left=Object(r.a)(e.left+d+s-a),t.style.top=Object(r.a)(e.top+i-a)):"b"==n?(t.style.left=Object(r.a)(e.left+d+s-a),t.style.top=Object(r.a)(e.top+e.height+i-a)):"c"==n&&(t.style.left=Object(r.a)(e.left+d+s-a),t.style.top=Object(r.a)(e.top+c+i-a))}},function(t,e,n){"use strict";class r{constructor(t,e){this.callback=e,this.targetElement=t,this.observer=new ResizeObserver(t=>{for(const e of t)this.callback()}),this.observer.observe(t)}detachAll(){this.observer.disconnect()}}var o=n(105),i=n.n(o),s=n(82);e.a=class{constructor(t,e,n){this.targetElement=t,this.callback=e,window.ResizeObserver?this.resizeSenzor=new r(t,e):this.resizeSenzor=new i.a(t,e),this.scrollSenzor=new s.a(t,e);this.wndResizeCallback=(t=>{e()}).bind(this),window.addEventListener("resize",this.wndResizeCallback),n&&!1!==n.useTimer&&(window.__pfTimers||(window.__pfTimers=0),window.__pfTimers++,this.positionTimer=setInterval(()=>{e&&e()},700))}detach(){this.resizeSenzor.detachAll(),this.scrollSenzor.detach(),window.removeEventListener("resize",this.wndResizeCallback),clearInterval(this.positionTimer)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1),o=n(2);function i(t,e,n){Object(r.j)(e,"productfruits--card-pos-"),n||(n={});const i=n.position?n.position:"a";Object(o.a)("crd_rsp_w")?(e.style.width="var(--card-responsive-width)",e.style.maxWidth=n.width||"400px"):e.style.width=n.width;const s=e.getElementsByClassName("productfruits--card-body")[0];s&&(s.style.minHeight=n.minHeight),"a"!=i?(e.classList.add("productfruits--card-pos-"+i),i.startsWith("l")?t.style.justifyContent="flex-start":i.startsWith("r")?t.style.justifyContent="flex-end":t.style.justifyContent=null,i.endsWith("t")?t.style.alignItems="flex-start":i.endsWith("b")?t.style.alignItems="flex-end":t.style.alignItems=null):(t.style.justifyContent=null,t.style.alignItems=null)}},,,function(t,e,n){"use strict";function r(t,e,n){var r,o;return e||(e=250),function(){var i=n||this,s=+new Date,a=arguments;r&&s<r+e?(clearTimeout(o),o=setTimeout((function(){r=s,t.apply(i,a)}),e)):(r=s,t.apply(i,a))}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t,e){this.keys=t,this.targetElementForPointerEvents=e,this.preventDefault=!1,this.handler=this.blockerHandler.bind(this)}block(){window.addEventListener("keypress",this.handler,!0),window.addEventListener("keydown",this.handler,!0),window.addEventListener("keyup",this.handler,!0),this.targetElementForPointerEvents&&this.keys&&-1!==this.keys.indexOf("_pointer-events")&&(this.oldPointerEvents=window.getComputedStyle(this.targetElementForPointerEvents).pointerEvents,this.targetElementForPointerEvents.style.pointerEvents="none")}unblock(){window.removeEventListener("keypress",this.handler,!0),window.removeEventListener("keydown",this.handler,!0),window.removeEventListener("keyup",this.handler,!0),this.targetElementForPointerEvents&&this.keys&&-1!==this.keys.indexOf("_pointer-events")&&(this.targetElementForPointerEvents.style.pointerEvents=this.oldPointerEvents)}blockerHandler(t){this.keys&&0!=this.keys.length?-1!==this.keys.indexOf(t.key)&&(t.stopImmediatePropagation(),t.stopPropagation(),this.preventDefault&&t.preventDefault()):(t.stopImmediatePropagation(),t.stopPropagation(),this.preventDefault&&t.preventDefault())}}const o=new r;e.b=o},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var r=n(2),o=n(58);function i(t,e=document){const{query:n,textQueries:i,nestingLevel:s,textQueryMode:c}=t;let u;if(n)try{u=Object(r.a)("shdwdm")?Object(o.e)(e,n):e.querySelector(n)}catch(t){console.error("Invalid query selector:",t)}return u=function(t,e,n,r){if(!r||0===r.length)return e;if("AND"===n)return a(r,e);if(e)return e;const o=l(r,1,t);if(o.length>0)return o[0]}(e,u,c,null==i?void 0:i.filter(t=>!!t.text)),u=d(u,s),u}function s(t,e=document){const{query:n,textQueries:i,nestingLevel:s,textQueryMode:d}=t;let u=null;if(n)try{u=Array.from(Object(r.a)("shdwdm")?Object(o.c)(e,n):e.querySelectorAll(n))}catch(e){console.log("Product Fruits - element selector problem",e,t)}const h=null==i?void 0:i.filter(t=>!!t.text);if("AND"===d&&h&&h.length>0&&u){const t=u.map(t=>a(h,t));return c(t,s),t}return(!u||0===u.length)&&h&&h.length>0&&(u=l(h,1,e)),c(u,s),u}function a(t,e){const n=l(t,1,e);if(0!==n.length)return n[0]}function c(t,e){for(let n=0;n<(null==t?void 0:t.length);n++)t[n]=d(t[n],e)}function d(t,e){if(Object(r.a)("shdwdm"))return Object(o.a)(t,e);if(!t||e<=0)return t;for(let n=0;n<Math.min(e,100);n++){const e=t.parentElement;if(!e)break;t=e}return t}function l(t,e=20,n){if(Object(r.a)("shdwdm"))return Object(o.b)(t,e,n);let i=[];try{if(!n)return i;for(let r of t){const t=u(r),o=document.evaluate(t,n,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);let s=o.iterateNext();for(;s&&i.length<e;)p(s)&&i.push(s),s=o.iterateNext();if(i.length>=e)break}}catch(t){console.error("Invalid text selector:",t)}return i}function u(t){const e=t.isCaseSensitive?t.text:t.text.toLowerCase();if(t.isExactMatch){if(t.isCaseSensitive)return`self::node()[text() = "${e}"] | .//*[text() = "${e}"]`;{const t=h(e);return`self::node()[${t} = "${e.toLowerCase()}"] | .//*[${t} = "${e.toLowerCase()}"]`}}if(t.isCaseSensitive)return`self::node()[contains(text(), "${e}")] | .//*[contains(text(), "${e}")]`;{const t=h(e);return`self::node()[contains(${t}, "${e.toLowerCase()}")] | .//*[contains(${t}, "${e.toLowerCase()}")]`}}function h(t){return`translate(text(), "${t.toUpperCase()}", "${t.toLowerCase()}")`}function p(t){if(t.offsetWidth<=0||t.offsetHeight<=0)return!1;const{display:e,visibility:n,opacity:r}=window.getComputedStyle(t);return"none"!==e&&"hidden"!==n&&"0"!==r}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={getObject(t){const e=localStorage.getItem("PF_STRG_"+t);return e?JSON.parse(e):null},setObject(t,e){e?localStorage.setItem("PF_STRG_"+t,JSON.stringify(e)):localStorage.removeItem("PF_STRG_"+t)}}},function(t,e,n){"use strict";function r(t,e){const n=t.rulesets.map(t=>({res:t.rules.map(t=>{var n;const r=null===(n=e.find(e=>e.qId==t.qId))||void 0===n?void 0:n.answer;if("eq"==t.op)return r==t.val;if("neq"==t.op)return r!=t.val;if("gt"==t.op)return r>t.val;if("gte"==t.op)return r>=t.val;if("lt"==t.op)return r<t.val;if("lte"==t.op)return r<=t.val;if("is"==t.op||"in"==t.op){if(Array.isArray(r)){if(0==r.length)return!1;if(Array.isArray(t.val)){const e="is"==t.op?"every":"some";return t.val[e](t=>r.includes(t))}return o(4),!1}return r==t.val}if("isnt"==t.op)return Array.isArray(r)?(o(3),!1):r!=t.val;o(99)}).every(t=>t),set:t}));for(const t of n)if(t.res)return t.set.target;return t.else}function o(t){console.log("PF surveys - not supported branching #"+t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(7),o=n(2);function i(t,e,{parent:n,recursive:i,onlyOnce:s=!0,includeDisplay:a=!0}={}){let c=null;var d=new MutationObserver((function(e){e.forEach(e=>{const n=e.removedNodes;n&&n.forEach(e=>{(function t(e,n){if(e===n)return!0;for(let r=0;r<n.childNodes.length;r++){let o=n.childNodes[r];if(o===e)return!0;if(t(e,o))return!0}return!1})(t,e)&&h(t)})})}));if(d.observe(document,{subtree:!i,childList:!0}),a){var l=new MutationObserver(e=>{e.forEach(e=>{"none"!==t.style.display&&"hidden"!==t.style.visibility||h(t)})});l.observe(t,{attributes:!0,attributeFilter:["style"]})}Object(o.a)("iframes")&&t.ownerDocument!=document&&(c=setInterval(()=>{t.isConnected||(clearInterval(c),h(t))},1e3));let u=null;function h(t){e(t),s&&(d&&d.disconnect(),l&&l.disconnect())}return Object(o.a)("lchadvrm")&&(u=Object(r.c)("pfruits_locationchange_prio",()=>{h(t)})),()=>{d.disconnect(),l&&l.disconnect(),c&&clearInterval(c),u&&u()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2);class o{constructor(t,e,{threshold:n}={}){this.targetElement=t,this.observer=new IntersectionObserver(t=>{for(let n of t)e(n.isIntersecting)},{threshold:n}),this.observer.observe(t),Object(r.a)("opctwtch")&&(this.interval=setInterval(()=>{e(t.checkVisibility({opacityProperty:!0,visibilityProperty:!0}))},500))}dispose(){this.observer.unobserve(this.targetElement),this.interval&&clearInterval(this.interval)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(6),o=n(4),i=n(14),s=n(23),a=n(1),c=n(7),d=n(2),l=n(87),u=n(17);class h{constructor(t,e,{markCardAsReadHandler:n,tourId:r,tourName:i,cardId:a,cardName:c,continueHandler:l,skipHandler:u,buttonClickTrackHandler:h,prevStepHandler:y,blockClickBubbling:C}={}){this.cardEl=t,this.contentJson=e,this.markCardAsReadHandler=n,this.continueHandler=l,this.prevStepHandler=y,this.skipHandler=u,this.buttonClickTrackHandler=h,this.tourId=r,this.cardId=a,this.tourName=i,this.cardName=c,this.dataGatherSections=[],Object(o.i)()&&(t.classList.toggle("modern-widget",!0),t.classList.toggle("modern-widget-responsive",!0)),Object(s.a)(t,e);var O=t.getElementsByClassName("productfruits--card-body-section-template")[0].content,k=t.getElementsByClassName("productfruits--card-body-youtube-section-template")[0].content,j=window.productFruits.language;if(e&&e.body&&e.body[j]&&e.body[j].length)for(var I of e.body[j]){const t=S(I.row);if(I.youTube){var E=document.importNode(k,!0);Object(s.a)(E.firstElementChild,I),t.appendChild(E)}else I.video?v(t,I):I.button?f(t,I,j,this.markCardAsReadHandler,this.continueHandler,this.skipHandler,this.buttonClickTrackHandler,this.prevStepHandler):I.hero?m(t,I,j):I.mood?this.dataGatherSections.push(g(t,I,j,this.tourId,this.cardId,this.tourName,this.cardName)):I.typeform?b(t,I,j,this.continueHandler):I.html?w(t,I):p(t,I,O)}function S(e){const n=t.getElementsByClassName("productfruits--card-body")[0];if(void 0!==e){const t=n.getElementsByClassName("productfruits--section-row")[e];if(t)return t}const r=document.createElement("div");return r.className="productfruits--section-row",n.appendChild(r),r}C&&(Object(d.a)("lgc_cards_block_click_bubbling")||this.cardEl.addEventListener("click",t=>{t.stopPropagation()}))}getHeader(){return this.cardEl.getElementsByClassName("productfruits--card-header")[0]}getFooter(){return this.cardEl.getElementsByClassName("productfruits--card-footer")[0]}getHeaderTextElement(){return this.cardEl.getElementsByClassName("productfruits--card-header-text")[0]}getFooterNextButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-next-button")[0]}getFooterBackButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-back-button")[0]}getFooterSkipButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-skip-button")[0]}getHeaderSkipButton(){return this.cardEl.getElementsByClassName("productfruits--card-header-skip-button")[0]}getHeaderMinimizeButton(){return this.cardEl.getElementsByClassName("productfruits--card-header-minimize-button")[0]}getStepsCounter(){return this.cardEl.getElementsByClassName("productfruits--card-footer-steps-counter")[0]}getFooterCloseButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-close-button")[0]}getFooterDismissButton(){return this.cardEl.getElementsByClassName("productfruits--card-footer-dismiss-button")[0]}setNextButtonsState(t){"disabled"==t?this.getFooterNextButton().classList.add(Object(a.i)("btn-disabled")):this.getFooterNextButton().classList.remove(Object(a.i)("btn-disabled"))}getNextButtonsState(t){return this.getFooterNextButton().classList.contains(Object(a.i)("btn-disabled"))?"disabled":"enabled"}}function p(t,e,n){const r=document.importNode(n,!0),o=r.firstElementChild,i=r.firstElementChild.firstElementChild;Object(s.a)(o,e),e.bgColor&&(o.style.background=e.bgColor),i&&e.padding&&(i.style.paddingTop=e.padding.top,i.style.paddingRight=e.padding.right,i.style.paddingBottom=e.padding.bottom,i.style.paddingLeft=e.padding.left),e.sizing&&(o.style.width=e.sizing.width,o.style.flexGrow=e.sizing.width?0:1,o.style.flexBasis=e.sizing.width?"auto":0),e.sizing&&e.sizing.alignment?(o.style.display="flex",o.style.alignItems=e.sizing.alignment,i&&(i.style.flexGrow=1)):(o.style.display=null,o.style.alignItems=null,i&&(i.style.flexGrow=null)),t.appendChild(r)}function f(t,e,n,d,l,u,h,p){const f=Object(a.h)("div",{className:"pf-body-section"}),m=Object(a.h)("div",{className:"productfruits--btn productfruits--btn-card-content"});m.innerHTML=Object(i.a)(e.button.text[n]),"tour"==e.button.action?m.setAttribute("data-pfbind-start-tour",e.button.tourId):"surv"==e.button.action?m.addEventListener("click",()=>{try{const t=e.button.trgtId;window.productFruits?(window.productFruits.surveys.startSurvey(t),d&&d(),window.productFruits.toursFactory.killAllTours(),window.productFruits.contextHelp.closeCurrentCard()):console.log("PF object not attached")}catch(t){console.error(t)}}):"link"==e.button.action&&e.button.opts?m.setAttribute("data-pfbind-link",e.button.opts.url):"link_blank"==e.button.action&&e.button.opts?m.setAttribute("data-pfbind-link-blank",e.button.opts.url):"link_blank_adv"==e.button.action&&e.button.opts?m.setAttribute("data-pfbind-link-blank-adv",e.button.opts.url):"feedback"==e.button.action?m.addEventListener("click",()=>{try{window.productFruits?(window.productFruits.api.feedback.showModal(),d&&d(),window.productFruits.toursFactory.killAllTours(),window.productFruits.contextHelp.closeCurrentCard()):console.log("PF object not attached")}catch(t){console.error(t)}}):"lifering"==e.button.action&&m.addEventListener("click",()=>{try{var t,e,n;if(window.productFruits)null!==(t=r.a.getState())&&void 0!==t&&null!==(e=t.inAppCenter)&&void 0!==e&&null!==(n=e.descriptor)&&void 0!==n&&n.isActive?o.c.inAppCenter.open():window.productFruits.api.button.showModal(),d&&d(),window.productFruits.toursFactory.killAllTours(),window.productFruits.contextHelp.closeCurrentCard();else console.log("PF object not attached")}catch(t){console.error(t)}}),h&&m.addEventListener("click",()=>{var t,r;const o=document.createElement("div");o.innerHTML=null!==(t=e.button.text[n])&&void 0!==t?t:"";const i=null!==(r=o.textContent)&&void 0!==r?r:"";h(i,{action:e.button.action,tourId:e.button.tourId,url:e.button.opts?e.button.opts.url:null})}),"continue_tour"==e.button.action&&l?m.addEventListener("click",l):"previous_step"==e.button.action&&p?m.addEventListener("click",p):"skip_tour"==e.button.action&&u?m.addEventListener("click",u):"tour"!=e.button.action&&"link"!=e.button.action||!d?"link_blank_adv"==e.button.action?m.addEventListener("click",l):"js"==e.button.action&&m.addEventListener("click",()=>{Object(c.b)("productfruits_card_custom_btn_click",{id:e.button.opts?e.button.opts.ident:""})}):"link"==e.button.action&&l?m.addEventListener("click",l):m.addEventListener("click",d),Object(s.a)(m,e.button,n),e.bgColor&&(m.style.background=e.bgColor,m.setAttribute("data-pf-skip-design","")),e.textColor&&(m.style.color=e.textColor,m.setAttribute("data-pf-skip-design",""));const g=Object(a.h)("div",{className:Object(a.i)("card-body-button")});g.appendChild(m),e.padding&&(g.style.paddingTop=e.padding.top,g.style.paddingRight=e.padding.right,g.style.paddingBottom=e.padding.bottom,g.style.paddingLeft=e.padding.left),e.sizing&&(f.style.width=e.sizing.width,f.style.flexGrow=e.sizing.width?0:1,f.style.flexBasis=e.sizing.width?"auto":0),e.sizing&&e.sizing.alignment?(f.style.display="flex",f.style.alignItems=e.sizing.alignment,g.style.flexGrow=1):(f.style.display=null,f.style.alignItems=null,g.style.flexGrow=null),g.style.justifyContent=e.objAlignment,f.appendChild(g),t.appendChild(f)}function m(t,e,n){const r=Object(a.h)("div",{className:"pf-body-section productfruits--card-body-hero-header"}),o=Object(a.h)("div",{className:"productfruits--card-hero-header-text"});o.innerHTML=e.hero.text[n],Object(a.a)(r,{style:{display:"flex",justifyContent:"center"}}),e.bgColor&&(r.style.background=e.bgColor),e.textColor&&(o.style.color=e.textColor),r.appendChild(o),t.appendChild(r)}function g(t,e,n,r,o,i,s){const c=Object(a.h)("div",{className:"pf-body-section productfruits--card-body-mood-meter"}),d=new l.a(e,n,{tourId:r,cardId:o,tourName:i,cardName:s});return c.appendChild(d.getRootElement()),t.appendChild(c),d}function b(t,e,n,r){const o=Object(a.h)("div",{className:"pf-body-section productfruits--card-body-typeform"});o.style.height=e.typeform.height+"px",t.appendChild(o);const i=window.productFruitsUser?encodeURIComponent(window.productFruitsUser.username):"",s=window.productFruitsUser?encodeURIComponent(window.productFruitsUser.email):"";let c="";try{var d;if(window.productFruitsUser&&window.productFruitsUser.props)for(const t in window.productFruitsUser.props)c+="&pf_prop_"+t+"="+window.productFruitsUser.props[t];if(null!==(d=u.a.config.user)&&void 0!==d&&d.props)for(const t in u.a.config.user.props)c+="&pf_prop_"+t+"="+u.a.config.user.props[t]}catch(t){console.error(t)}!function(t){if(window.typeformEmbed)t();else{var e=document.createElement("script");e.type="text/javascript",e.setAttribute("src","https://embed.typeform.com/embed.js"),e.onload=t;var n=document.getElementsByTagName("head")[0];n.appendChild(e,n)}}(()=>{window.typeformEmbed?typeformEmbed.makeWidget(o,e.typeform.url+"#pf_username="+i+"&pf_email="+s+"&pf_language="+n+c,{onSubmit:t=>{e.typeform.continueOnSubmit&&r()}}):console.log("PF - TypeformSection - typeformEmbed SDK not found.")})}function v(t,e){const n=Object(a.h)("div",{className:"productfruits--section-video-parent-holder"}),r=Object(a.h)("iframe",{src:e.video.url,allowfullscreen:!0,frameborder:"0",allow:"autoplay *; fullscreen *",className:"pf-designer-video-youtube"});e.video.height?(r.style.height=e.video.height+"px",r.style.minHeight="unset"):(r.style.height=null,r.style.minHeight=null),n.appendChild(r),t.appendChild(n)}function w(t,e){if(!e.html.content)return;const n=Object(a.h)("div",{className:"productfruits--section-html-holder"});if(Object(d.a)("alwscrpt")){const r=document.createRange().createContextualFragment(e.html.content);n.append(r),t.appendChild(n)}else n.innerHTML=Object(i.a)(e.html.content),t.appendChild(n)}},function(t,e,n){"use strict";var r=n(2),o=n(71),i=n(7);const s=new Map;let a=!1;Object(i.d)("scroll",Object(o.a)((t,e,n)=>{!a&&Object(r.a)("glob_scroll")&&(requestAnimationFrame(()=>{for(const r of s.values())r(t,e,n);a=!1}),a=!0)},15),!0);const c={load:[],scroll:[]},d=Object(o.a)((t,e,n)=>{requestAnimationFrame(()=>{for(const r of s.values())r(t,e,n)})},15);function l(){function t(t){try{t.contentWindow.removeEventListener("scroll",d,!0),t.contentWindow.addEventListener("scroll",d,!0)}catch(t){}}document.querySelectorAll("iframe").forEach(e=>{-1===c.load.indexOf(e)&&(e.addEventListener("load",()=>{t(e)}),t(e),c.load.push(e))})}window.__pfTmpBindIframes=l,Object(r.a)("iframes")&&l(),e.a=class{constructor(t,e){this.element=t,this.callback=e,this.parentScrollElement=null,this.attachedListener=this.fireScrollEvent,this.handleScrollEventHandler=this.handleScrollEvent.bind(this),this.init()}init(){if(Object(r.a)("glob_scroll"))s.set(this,this.handleScrollEventHandler),Object(r.a)("iframes")&&l();else{for(var t=this.element;t;){var e=window.getComputedStyle(t);if(this.isScrollElement(e.overflow)||this.isScrollElement(e.overflowX)||this.isScrollElement(e.overflowY)){this.parentScrollElement=t;break}t=t.parentElement}this.parentScrollElement&&this.parentScrollElement.addEventListener("scroll",this.handleScrollEventHandler),window.addEventListener("scroll",this.handleScrollEventHandler)}}detach(){Object(r.a)("glob_scroll")?s.delete(this):(this.parentScrollElement&&this.parentScrollElement.removeEventListener("scroll",this.handleScrollEventHandler),window.removeEventListener("scroll",this.handleScrollEventHandler))}handleScrollEvent(t){this.attachedListener(t)}fireScrollEvent(){this.callback()}isScrollElement(t){return"auto"==t||"scroll"==t}}},,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1);const o={0:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><g fill="#6d4c41"><circle cx="7" cy="10" r="2"/><circle cx="17" cy="10" r="2"/><path d="m17.25 19.675c-.192 0-.384-.073-.53-.22-1.261-1.261-2.937-1.955-4.72-1.955s-3.459.694-4.72 1.955c-.293.293-.768.293-1.061 0s-.293-.768 0-1.061c1.545-1.544 3.597-2.394 5.781-2.394s4.236.85 5.78 2.395c.293.293.293.768 0 1.061-.146.146-.338.219-.53.219z"/><path d="m9.25 7.333c-.143 0-.288-.041-.416-.126l-2.5-1.667c-.345-.229-.438-.695-.208-1.04.229-.345.695-.438 1.04-.208l2.5 1.667c.345.23.438.695.208 1.04-.145.217-.382.334-.624.334z"/><path d="m14.75 7.333c-.242 0-.48-.117-.625-.334-.23-.345-.137-.81.208-1.04l2.5-1.667c.343-.23.81-.138 1.04.208.23.345.137.81-.208 1.04l-2.5 1.667c-.127.086-.271.126-.415.126z"/></g></svg>',3:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><g fill="#6d4c41"><circle cx="7" cy="9" r="2"/><circle cx="17" cy="9" r="2"/><path d="m17 19.536c-.192 0-.384-.073-.53-.22-1.194-1.194-2.781-1.852-4.47-1.852s-3.276.658-4.47 1.852c-.293.293-.768.293-1.061 0s-.293-.768 0-1.061c1.477-1.478 3.441-2.291 5.53-2.291s4.053.813 5.53 2.291c.293.293.293.768 0 1.061-.145.146-.337.22-.529.22z"/></g></svg>',5:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><g fill="#6d4c41"><circle cx="7" cy="9" r="2"/><circle cx="17" cy="9" r="2"/><path d="m15.25 18h-6.5c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h6.5c.414 0 .75.336.75.75s-.336.75-.75.75z"/></g></svg>',7:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><g fill="#6d4c41"><circle cx="7" cy="9" r="2"/><circle cx="17" cy="9" r="2"/><path d="m12 20.036c-2.089 0-4.053-.813-5.53-2.291-.293-.293-.293-.768 0-1.061s.768-.293 1.061 0c1.194 1.194 2.781 1.852 4.47 1.852s3.276-.658 4.47-1.852c.293-.293.768-.293 1.061 0s.293.768 0 1.061c-1.479 1.477-3.443 2.291-5.532 2.291z"/></g></svg>',10:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" fill="#ffd54f" r="12"/><circle cx="7" cy="9" fill="#6d4c41" r="2"/><circle cx="17" cy="9" fill="#6d4c41" r="2"/><path d="m20.354 14.305c-.142-.192-.366-.305-.604-.305h-15.5c-.238 0-.462.113-.604.305-.141.192-.183.439-.112.667 1.159 3.737 4.562 6.248 8.466 6.248s7.307-2.511 8.466-6.248c.071-.227.029-.475-.112-.667z" fill="#e53935"/></svg>'};var i=n(5),s=n(20),a=n(25);class c{constructor(t,e,n){this.rootElement=Object(r.h)("div",{className:Object(r.i)("mood-meter-root"),style:d()}),this.contentJson=t,this.moodContent=this.contentJson.mood||{},this.language=e,this.opts=n||{},this.dataId=this.contentJson.dataId||Object(s.a)(),this.rootElement.dataset.dataid=this.dataId,this.tag=this.moodContent.tag,this.hasDedicatedSendButton=this.moodContent.dedicatedSend,this.questionHolderEl=Object(r.h)("div",{style:u()}),this.questionEl=Object(r.h)("div",{className:Object(r.i)("mood-meter-question"),contenteditable:this.opts.editable?this.opts.editable:"false"}),this.followUpHolder=Object(r.h)("div",{style:h()}),this.followUpQuestionEl=Object(r.h)("div",{className:Object(r.i)("mood-meter-followup"),contenteditable:this.opts.editable?this.opts.editable:"false"}),this.followUpAnswerEl=Object(r.h)("textarea",{rows:3,style:{resize:"none",border:"1px solid #00000066",borderRadius:"5px"}}),this.followUpHolder.appendChild(this.followUpQuestionEl),this.followUpHolder.appendChild(this.followUpAnswerEl),this.hasDedicatedSendButton&&this.appendSendButton(),this.initQuestions(),this.moodsHolderEl=Object(r.h)("div",{style:l()}),this.moodsHolderEl.appendChild(this.createMoodIcon(0)),this.moodsHolderEl.appendChild(this.createMoodIcon(3)),this.moodsHolderEl.appendChild(this.createMoodIcon(5)),this.moodsHolderEl.appendChild(this.createMoodIcon(7)),this.moodsHolderEl.appendChild(this.createMoodIcon(10)),this.questionHolderEl.appendChild(this.questionEl),this.questionHolderEl.appendChild(this.moodsHolderEl),this.rootElement.appendChild(this.questionHolderEl),this.selectedRating=null}appendSendButton(){this.sendNotif=Object(r.h)("div",{className:Object(r.i)("mood-meter-sent"),style:{display:"none"}}),this.sendButton=Object(r.h)("button",{className:Object(r.i)("mood-meter-send-button"),onclick:()=>{!this.opts.editable&&this.sendToServer()}},""),this.followUpHolder.appendChild(this.sendNotif),this.followUpHolder.appendChild(this.sendButton)}destroySendButton(){this.sendNotif&&this.sendNotif.remove(),this.sendButton&&this.sendButton.remove()}initQuestions(){this.questionEl.textContent=(this.moodContent.question?this.moodContent.question[this.language]:null)||"How easy was this flow?",this.followUpQuestionEl.textContent=(this.moodContent.followUp?this.moodContent.followUp[this.language]:null)||"Do you want to add something?"}sendToServer(){this.sendNotif&&(this.sendNotif.style.display=null,this.sendButton.style.display="none",this.followUpAnswerEl.style.visibility="hidden");const t=this.gatherData();Object(a.c)(t.mood.tag,t.dataId,this.opts.tourId,this.opts.tourName,this.opts.cardId,this.opts.cardName,this.opts.contextHelpId,t.mood.rating,t.mood.followUp,t.mood.question,t.mood.followUpQuestion)}createMoodIcon(t){const e=Object(r.h)("div",{className:Object(r.i)("mood-meter-icon")});return e.innerHTML=o[t],e.style.width=Object(i.a)(35),e.style.height=Object(i.a)(35),e.style.cursor="pointer",this.opts.editable||e.addEventListener("click",()=>{this.selectedRating=t,this.showFollowUp()}),e}showFollowUp(){this.questionHolderEl.remove(),this.rootElement.appendChild(this.followUpHolder),this.followUpAnswerEl.focus()}getRootElement(){return this.rootElement}gatherData(){return null==this.selectedRating?null:{mood:{dataId:this.dataId,tag:this.tag,rating:this.selectedRating,followUp:this.followUpAnswerEl.value,question:this.questionEl.textContent,followUpQuestion:this.followUpQuestionEl.textContent}}}}const d=()=>({display:"flex",flexDirection:"column",width:"100%"}),l=()=>({display:"flex",justifyContent:"space-evenly",width:"100%",paddingTop:Object(i.a)(10),paddingBottom:Object(i.a)(10)}),u=()=>({display:"flex",flexDirection:"column"}),h=()=>({display:"flex",flexDirection:"column",paddingLeft:Object(i.a)(10),paddingRight:Object(i.a)(10),position:"relative"})},,,,,,,,,function(t,e,n){"use strict";async function r(t,e){const n=await function(t,e){return Promise.all(t.map(e))}(t,e);return t.filter((t,e)=>n[e])}function o(t,e){return Array.isArray(t)||(t=[]),t.includes(e)?t.filter(t=>t!==e):[...t,e]}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}))},function(t,e,n){"use strict";var r=n(29);e.a=class{constructor(t,e){this.originalJson=t,this.order=e}injectContent(t){this.originalJson.content=t}getId(){return this.originalJson.id}getName(){return this.originalJson.name}hasKeyBlocking(){return null!=this.originalJson.blockedKeys&&this.originalJson.blockedKeys.length>0}getSingleTargetElementSelector(){const t=this.originalJson.elements[0];return t?t.query:null}getTargetElements(){return this.originalJson.elements.map(r.a)}getSingleTargetElement(){if(!this.isSingleTarget())throw new Error("Cannot use getSingleTargetElement on multiple targets.");return Object(r.a)(this.originalJson.elements[0])}hasTargetElements(){return this.originalJson.elements&&this.originalJson.elements.length>0}isSingleTarget(){return this.originalJson.elements&&1===this.originalJson.elements.length}isDialog(){return"dialog"==this.originalJson.displayType}isTitleVisible(){var t=this.originalJson.content;return!!t.title&&!0===t.title.visible}isFooterVisible(){var t=this.originalJson.content;return!!t.footer&&!1!==t.footer.visible}}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return Q}));var r=n(9),o=n(13),i=n(33),s=n(7),a=n(24),c=n(22),d=n(15);function l(t,e){var n=e.type,r=e.funcChain;function o(){t.classList.remove(this),"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend".split(" ").forEach(t=>{document.removeEventListener(t,o)})}function i(t,e){setTimeout((function(){e()}),t)}function s(t,e){for(var n=0;n<t;n++)e()}function a(t,e,n){var r=0,o=setInterval(i,t);function i(){n(),++r===e&&clearInterval(o)}i()}this.run=function(){var e=null;function c(){t.classList.add(e),"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend".split(" ").forEach(t=>{document.addEventListener(t,o.bind(e))})}"shake"===n?e="productfruits--animation-shake":"rubberBand"==n?e="productfruits--animation-rubberband":"flash"==n&&(e="productfruits--animation-flash"),e&&(r?(r.push(["runAnimation",c]),function t(e){for(var n of e){var r=e.slice(1);if("delay"===n[0]){i(n[1],(function(){t(r)}));break}if("repeat"===n[0]){2===n.length?s(n[1],(function(){t(r)})):a(n[2],n[1],(function(){t(r)}));break}if("runAnimation"===n[0]){n[1]();break}}}(r)):c())}}var u=n(31),h=n(45),p=n(4),f=n(10),m=n(54),g=n(2),b=n(12);var v=function(t,e){var n=null;let r=null,o=!1;if(this.dispose=()=>{o=!0,r&&r()},"onclick"===t.type)(n=getDocumentElementByDef(t.element))?i(n):waitForAddedNode(t.element,(function(t){i(t[0])}));else if("onload"===t.type||"always"===t.type||"scheduled"===t.type){if("loading"!==document.readyState?(b.a.logImportantMessage("Checking if the tour should run after page immediately loaded.",e.getName()),e.tryRun()):Object(s.e)("DOMContentLoaded",(function(){o||(b.a.logImportantMessage("Checking if the tour should run after page loaded.",e.getName()),e.tryRun())})),Object(s.d)("pfruits_locationchange",n=>{o||(b.a.logImportantMessage(`Location change detected <small>${Object(d.a)()}</small>`,e.getName()),f.a.verbose(`TourId: ${e.getId()} - location changed detected`,Object(d.a)()),Object(g.a)("trflw1")?(e.isRunning()||0==e.userState||!e.isRunning()&&"always"===t.type)&&e.tryRun():(e.isRunning()||0==e.userState)&&e.tryRun())}),Object(s.c)("pf_event_tracked",()=>{o||(b.a.logImportantMessage("Event tracked, trying to launch",e.getName()),f.a.verbose(`TourId: ${e.getId()} - custom event tracked`,Object(d.a)()),0!=e.isRunning()&&0!=e.userState||e.tryRun())}),Object(g.a)("trs_rltm")&&Object(g.c)()&&Object(m.c)().listenTo("rules-source-data-updated",()=>{o||(0==e.isRunning()&&0==e.userState||!e.isRunning()&&"always"===t.type)&&e.tryRun()}),Object(g.a)("trs_rltm_2")){const t=()=>{o||0==e.isRunning()&&0==e.userState&&e.tryRun()};Object(s.c)("pfTourFinished",t),Object(s.c)("pfTourSkipped",t),Object(s.c)("survey-closed",t)}}else if("manually"===t.type||"onclicked"===t.type){if("loading"!==document.readyState?(b.a.logImportantMessage("Checking if the tour should run after page immediately loaded.",e.getName()),e.isRunning()&&e.tryRun(!0)):Object(s.e)("DOMContentLoaded",(function(){o||(b.a.logImportantMessage("Checking if the tour should run after page loaded.",e.getName()),e.isRunning()&&e.tryRun(!0))})),Object(s.d)("pfruits_locationchange",t=>{o||(f.a.verbose(`TourId: ${e.getId()} - manual trigger - location changed detected`),e.isRunning()&&e.tryRun(!0,!1,{locationChange:!0}))}),"onclicked"===t.type){const n=t.options||{};this.onClickedDisposer&&this.onClickedDisposer();const i=(t,r)=>{r&&t.composedPath&&-1!==t.composedPath().indexOf(r)&&p.c.toursFactory.startTour(e.getId(),{forceForUser:!0!==n.oneTime,autoStartRedirect:!0})},a=()=>{if(n.parentIframeSelector&&Object(g.a)("tr_iframe_trg")){const t=document.querySelector(n.parentIframeSelector);if(t&&t.contentDocument){const e=t.contentDocument.querySelector(n.selector);if(!e)return void setTimeout(a,100);const r=t=>{i(t,e)};t.contentDocument.addEventListener("click",r,!0),this.onClickedDisposer=Object(s.f)(()=>{t.contentDocument.removeEventListener("click",r,!0)})}}else if(n.selector){const t=document.querySelector(n.selector);if(!t)return void setTimeout(a,100);this.onClickedDisposer=Object(s.e)("click",e=>{i(e,t)},!0)}},c=t=>{"loading"!==document.readyState?t():r=Object(s.e)("DOMContentLoaded",t)};c(a),Object(s.d)("pfruits_locationchange",()=>{o||c(a)})}}else if("customjs"===t.type&&Object(g.b)("tourjstrgr")){const n={listenEventForSelector:(t,e,n)=>Object(s.d)(t,t=>{t&&t.target&&t.target.matches&&t.target.matches(e)&&n&&n(t)}),useElement:(t,e,n)=>{const r=document.querySelector(t);r?e&&e(r):n&&n()},tryStartThisTour:(t=!1)=>{productFruits.toursFactory.startTour(e.getId(),{forceForUser:t})},api:window.productFruits?window.productFruits.api:null};"loading"!==document.readyState?new Function(t.code).bind(n)():Object(s.e)("DOMContentLoaded",(function(){o||new Function(t.code).bind(n)()}))}function i(n){var r=n;n.addEventListener("click",(function n(o){e.init(),e.start(),t.preventDefault&&o.preventDefault(),t.stopPropagation&&o.stopPropagation(),t.oneTime&&r.removeEventListener("click",n)}))}},w=n(29),y=n(68),C=n(97),O=n(11),k=n(51),j=n(1),I=n(41),E=n(56),S=n(63),x=n(55);var _=n(79),T=n(50),F=n(80),A=n(8),N=n(37),P=n(48),B=n(16),L=n(20);var R=n(19),D=n(74),M=n(30),z=n(25);function U(t){return"issueCandidateReported:1:"+t}function H(){return window.productFruitsUser&&!window.ProductFruitsDesigner&&Object(g.a)("ex_dia")}function q(t,e,n){H()&&window.productFruits.siteConfig.experienceDiagnosticEnabled&&(Object(z.e)(Object(p.d)()+"/api/v1/experience-diagnostic/"+window.productFruits.code+"/missing-candidate",{username:window.productFruitsUser.username,entityType:1,entityId:e,stepId:n.getId(),stepName:n.getName(),selector:n.getSingleTargetElementSelector(),urlTemplate:n.originalJson.url.parametrized,url:Object(d.a)(),reason:t,stepOrder:n.order}),function(t,e){sessionStorage.setItem(U(t),e.order.toString())}(e,n))}function $(t,e){H()&&function(t,e){const n=sessionStorage.getItem(U(t));return!!n&&(parseInt(n)>=e.order&&(sessionStorage.removeItem(U(t)),!0))}(t,e)&&Object(z.e)(Object(p.d)()+"/api/v1/experience-diagnostic/"+window.productFruits.code+"/dismiss-candidate",{entityType:1,entityId:t,username:window.productFruitsUser.username,stepOrder:e.order})}var J=n(81),W=n(60),V=n(28);class Q{constructor(t,e,{skipTriggers:n,onEnd:r,onCardShown:o,onCardRead:i,onNoCardsLeft:s,onCustomButtonClick:a}={skipTriggers:!1}){this.originalConfig=t,this.originalIsRunning=t&&t.userIsRunning,this.tourConfig=t,this.cardHtml=e,this.skipTriggers=n,this.onEnd=r,this.onCustomButtonClick=a,this.onCardShown=o,this.onCardRead=i,this.onNoCardsLeft=s,this.triggerInstances=[],this.tourContentLoaded=!Object(g.a)("crdsldc"),this.userShownCards=t.userShownCards||[],this.tourCards=[],this.tourContainer=O.a.getSubContainer("tour"+Object(L.a)()+" productfruits--tour-container"),this.currentCardInfo=new G;try{this.tourCards=[];const e=t.cards||[];let n=0;for(var c of e)this.tourCards.push(new C.a(c,n)),n++}catch(t){console.error(t)}this.userShownCardsLocalBackup=null,this.waitingForNextCard=!1}initialize(){setTimeout(()=>{if(this.tourConfig.triggers)for(var t of this.tourConfig.triggers){const e=new v(t,this);this.triggerInstances.push(e)}},1)}dispose(t=!1){var e,n;(this.isDisposed=!0,t)&&(null===(e=this.currentCardInfo)||void 0===e||e.clearWaiters(),null===(n=this.currentCardInfo)||void 0===n||n.disposeAll());t&&this.triggerInstances.forEach(t=>t.dispose&&t.dispose())}get triggerType(){return this.tourConfig.triggers[0]?this.tourConfig.triggers[0].type:""}get userState(){return this.tourConfig.userState}set userState(t){this.tourConfig.userState=t}allRulesValid(){if(this.launchRulesIgnored())return!0;const t=new u.a(this.tourConfig.rules);if(t.shouldEvaluate())return t.passes();if(this.tourConfig.segment){return new h.a(this.tourConfig.segment).passes()}return!0}async allRulesValidAsync(){if(this.launchRulesIgnored())return!0;const t=new u.a(this.tourConfig.rules,this.tourConfig.segment,this.tourConfig.rulesId,this.tourConfig.hasRules,"be");return await t.passesAsync()}getCards(){return this.tourCards}getId(){return this.tourConfig.id}getName(){return this.tourConfig.name}isRunning(){return this.tourConfig.userIsRunning}setIsRunning(t=!0){this.tourConfig.userIsRunning=t}tryRun(t,e,n){if(!this.isDisposed)if(Object(c.f)(this.tourConfig)){if(t||!this.isSomeCardShown||!Object(g.a)("trs_evfl")){f.a.verbose(`TourId: ${this.getId()} - tryRun START, forced: `,!0===t),M.a.dispatchTourAttemptingStart(this);try{window.localStorage.getItem("pfdbgflg_trace")&&console.trace()}catch(t){}this.forceForUser=t,t&&b.a.logInfoMessage("Forcing launch.",this.getName()),Object(i.c)(["changelog"]).then(()=>{(e||this.originalConfig.sesNoRules)&&(R.a.logState("tour",this.getId(),"segment_ignored"),this.turnOnIgnoreLaunchRules()),Object(g.c)()?this.showNextCard():this.allRulesValid()?(this.showNextCard(),R.a.logState("tour",this.getId(),"segment_match")):R.a.logState("tour",this.getId(),"segment_not_match")},()=>{})}}else f.a.verbose(`TourId: ${this.getId()} - not withing time bounds`)}turnOnIgnoreLaunchRules(){this.ignoreRules=!0}turnOffIgnoreLaunchRules(){this.originalConfig.sesNoRules=!1,this.ignoreRules=!1}launchRulesIgnored(){return!0===this.ignoreRules}prepareForForceRunning(){window.productFruits&&window.productFruits.toursFactory&&window.productFruits.toursFactory.stopAllTours(),this.tourConfig.userIsRunning=!0}resetShownCardsLocally(t){b.a.logInfoMessage("Reseting the tour stats for user (locally).",this.getName()),t&&t.length||(t=[]),this.userShownCardsLocalBackup=this.userShownCards.slice(),this.userShownCards=t,this.tourConfig.userState=0,this.waitingForNextCard=!1}takeResetBack(){this.userShownCardsLocalBackup&&(this.userShownCards=this.userShownCardsLocalBackup.slice(),this.userShownCardsLocalBackup=null)}getPrevCard(){if(this.currentCardInfo&&this.currentCardInfo.currentCard){const t=this.currentCardInfo.currentCard.getId();let e=null;for(const n of this.tourCards){if(t==n.getId())break;e=n}return e}}getNextCard(){if(0!=this.tourConfig.userState)return b.a.logInfoMessage("The tour is not in the unread state, the tour won't show for this user.",this.getName()),f.a.verbose(`TourId: ${this.getId()} - Tour is not in the notfinished state, skipping`),null;if(Object(g.a)("nxtcrd")){let e=null;for(var t of this.tourCards.slice().reverse()){const n=-1===this.userShownCards.indexOf(t.getId());if(!n)break;n&&(e=t)}return e&&b.a.logInfoMessage(`Unread card '${e.originalJson.name}' found NXT flag.`,this.getName()),e}for(var t of this.tourCards)if(-1===this.userShownCards.indexOf(t.getId()))return b.a.logInfoMessage(`Unread card '${t.originalJson.name}' found.`,this.getName()),t;return b.a.logInfoMessage("There are no unread cards left, stopping this tour.",this.getName()),f.a.verbose(`TourId: ${this.getId()} - No cards left for the tour.`),this.onNoCardsLeft&&this.onNoCardsLeft(),null}showNextCard({logSource:t,showPrevious:e}={}){if(f.a.verbose(`TourId: ${this.getId()} - showNextCard START (${t})`),this.tourContainer.innerHTML="",this.isSomeCardShown=!1,this.currentCardInfo&&this.currentCardInfo.disposeAll(),this.isDisposed)return void f.a.verbose(`TourId: ${this.getId()} - Already disposed, won't continue.`);var n=e?this.getPrevCard():this.getNextCard();if(this.currentCardAdept=n,n&&0==n.order&&(Object(g.a)("trflw1")&&(this.waitingForNextCard=!1),this.currentCardInfo.clearWaiters()),e&&n&&(this.userShownCards=this.userShownCards.filter(t=>t!=n.getId())),this.waitingForNextCard)return void f.a.verbose(`TourId: ${this.getId()} - Wont run, waiting for the next card.`);if(!n||!Object(B.b)(n.originalJson.url)){if(n){f.a.verbose(`TourId: ${this.getId()} - A card found, but URL does not match, will wait a moment for URL change.`,n,Object(d.a)());const[t,r]=function(t,e,n){let r=null;return[new Promise((o,i)=>{const s=()=>{Object(B.b)(t)&&(window.removeEventListener("pfruits_locationchange",s),n&&n(),o())};window.addEventListener("pfruits_locationchange",s),e&&(r=setTimeout(()=>{f.a.verbose("URL change detection timeouted."),window.removeEventListener("pfruits_locationchange",s),i()},e))}),()=>{}]}(n.originalJson.url,1500,()=>{f.a.verbose(`TourId: ${this.getId()} - URL change detected, continue!`),this.showNextCard({logSource:"URL change detected",showPrevious:e})});this.currentCardInfo.waitForUrlChange=r,t.catch(()=>{f.a.verbose(`TourId: ${this.getId()} - URL change not detected, stopping!`),b.a.logInfoMessage(n.originalJson.name+" - URL doesn't match - stopping.",this.getName()),r.rejected=!0,(this.forceForUser||n.order>0)&&q("wrong_url",this.getId(),n)})}return void this.clear()}P.a.dequeue("startTour");const r=this.launchRulesIgnored();if(Object(g.a)("trs_flw3")||window.productFruits&&window.productFruits.toursFactory&&window.productFruits.toursFactory.killAllTours(),r&&this.turnOnIgnoreLaunchRules(),this.waitingForNextCard=!0,this.currentCardAdept=n,n.hasTargetElements()&&!n.isDialog()){b.a.logImportantMessage(n.originalJson.name+" - Waiting for the target element to be on the page.",this.getName()),f.a.verbose(`TourId: ${this.getId()} - Get or wait for the next element. Card ID: ${n.getId()}, delay: ${n.originalJson.showDelayMs}`);const t=setTimeout(()=>{n.originalJson.advanceIfElMissing||q("missing_element",this.getId(),n)},4e3);this.currentCardInfo.waitForAddedNode=Object(x.a)(n.originalJson.elements[0],e=>{Object(w.a)(n.originalJson.elements[0]);b.a.logInfoMessage(n.originalJson.name+" - Target element found, proceeding to rendering.",this.getName()),this.missingElTimeout&&clearTimeout(this.missingElTimeout),clearTimeout(t),new Promise((t,e)=>{t()}).then(()=>{Object(g.c)()?this.renderNextCard(n,e):this.loadTourContent().then(()=>{this.handleCurrentCard(n,e)})})},{showDelayMs:n.originalJson.showDelayMs}),this.missingElTimeout&&clearTimeout(this.missingElTimeout),n.originalJson.advanceIfElMissing&&(this.missingElTimeout=setTimeout(()=>{if(!Object(w.a)(n.originalJson.elements[0])){this.currentCardInfo.clearWaiters(),this.waitingForNextCard=!1,this.currentCardInfo.currentCard=n;const t=this.tourCards.indexOf(n)+1;Object(g.a)("tur_run_skppd")&&!this.originalIsRunning&&1==t&&Object(z.o)(this.getId(),this.forceForUser,this.ignoreRules),this.sendStatAndShowNextCard({noEvent:!0})}},n.originalJson.advanceIfElMissingDelay||0))}else b.a.logInfoMessage(n.originalJson.name+" - Proceeding to rendering.",this.getName()),f.a.verbose(`TourId: ${this.getId()} - Doesn't have target elements, proceeding. Card ID: ${n.getId()}`),setTimeout(()=>{Object(g.c)()?this.renderNextCard(n,null):this.loadTourContent().then(()=>{this.handleCurrentCard(n)})},n.originalJson.showDelayMs||0)}renderNextCard(t,e){const n=()=>{this.loadTourContent().then(()=>{Object(g.a)("vissnzr")&&t.originalJson.elements&&t.originalJson.elements[0]?(this.currentCardInfo.waitForAddedNode&&this.currentCardInfo.waitForAddedNode(),this.currentCardInfo.waitForAddedNode=Object(x.a)(t.originalJson.elements[0],e=>{Object(w.a)(t.originalJson.elements[0]);b.a.logInfoMessage(t.originalJson.name+" - (double sure) Target element found, proceeding to rendering.",this.getName()),this.handleCurrentCard(t,e)})):this.handleCurrentCard(t,e)})};this.rulesCheckedForSession?n():this.allRulesValidAsync().then(t=>{t?(this.rulesCheckedForSession=!0,n(),R.a.logState("tour",this.getId(),"segment_match")):(b.a.logInfoMessage("Launch rules are not met, won't advance.",this.getName()),R.a.logState("tour",this.getId(),"segment_not_match"))})}loadTourContent(){var t,e,n,o,i,s;if(this.tourContentLoaded)return Promise.resolve();const c=r.a.getCurrentIdentity();return Object(a.b)(`/api/v2/stats/${p.a.code}/tours/public-batch`,{id:this.getId(),hmac:null!==(t=null==c||null===(e=c.user)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.hmac)&&void 0!==t?t:void 0,username:null!==(o=null==c||null===(i=c.user)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.username)&&void 0!==o?o:void 0}).then(t=>{this.tourCards.forEach(e=>{const n=t[e.getId()];n&&e.injectContent(n)}),this.tourContentLoaded=!0})}handleCurrentCard(t,e){if(Object(g.a)("trs_url_chk")&&!Object(B.b)(t.originalJson.url))return f.a.verbose(`TourId: ${this.getId()} - URL is still not qualified`,t.getId()),R.a.logState("tour",this.getId(),"url_not_match"),void this.clear();var n,r;if(Object(g.a)("trs_dbl_chk")&&(null===(n=this.currentCardInfo)||void 0===n||null===(r=n.currentCard)||void 0===r?void 0:r.getId())==(null==t?void 0:t.getId()))return;if(!this.forceForUser&&this.isSomeCardShown&&Object(g.a)("trs_evfl"))return;if(Object(g.a)("trs_flw4")&&window.productFruits&&window.productFruits.toursFactory&&window.productFruits.toursFactory.killAllTours(),this.isDisposed)return;f.a.verbose(`TourId: ${this.getId()} - Render the tour card.`,t.getId());var i=Object(I.a)(this.cardHtml),s=this.tourCards.length,a=this.tourCards.indexOf(t)+1,c=t.originalJson.cardPosition?t.originalJson.cardPosition.boundingIsTextContent:null,d=new J.a(i,t.originalJson.content,{markCardAsReadHandler:()=>{this.sendStat(t)},continueHandler:()=>{x(),this.sendStatAndShowNextCard()},prevStepHandler:()=>{x(),this.trackBackButtonClick(t,a),this.showNextCard({showPrevious:!0})},skipHandler:()=>{"skip_cncl"!=this.skip()&&x()},buttonClickTrackHandler:(e,n)=>{this.trackCardButtonClick(t,a,e,n),this.onCustomButtonClick&&this.onCustomButtonClick(e,n)},tourId:this.getId(),cardId:t.getId(),tourName:this.getName(),cardName:t.getName(),blockClickBubbling:!0});this.waitingForNextCard=!1,Object(E.a)(i,"data-pf-card-step",a),Object(E.a)(i,"data-pf-card-tour",this.getId());const u=(t={})=>{const e=P();return t.transparentBgColor=e&&e.cardBackdropColor?e.cardBackdropColor:void 0,t.solidBgColor=e&&e.cardBackdropSolidColor?e.cardBackdropSolidColor:void 0,t.highlighterColor=e&&e.cardHighlighterColor?e.cardHighlighterColor:void 0,t.highlighterSpacing=e?e.cardHighlighterSpacing:void 0,t.highlighterThickness=e?e.cardHighlighterThickness:void 0,t};if(this.currentCardInfo.dataGatherSections=d.dataGatherSections||[],this.currentCardInfo.currentCard=t,t.isDialog())this.currentCardInfo.backdrop&&this.currentCardInfo.backdrop.dispose(),this.currentCardInfo.backdrop=new k.a(t.originalJson.backdrop,u({zIndex:t.originalJson.cardPosition?t.originalJson.cardPosition.zIndex:null,cssId:t.getId()})),this.currentCardInfo.cardPositioner&&this.currentCardInfo.cardPositioner.dispose(),this.tourContainer.style.position="fixed",i.classList.add("productfruits--card-dialog-style"),Object(y.a)(this.tourContainer,i,t.originalJson.cardPosition);else if(this.tourContainer.style.position=null,t.isSingleTarget()){this.currentCardInfo.backdrop&&this.currentCardInfo.backdrop.dispose(),this.currentCardInfo.backdrop=new k.a(t.originalJson.backdrop,u({targetElements:t.getTargetElements(),boundingIsTextContent:c,zIndex:t.originalJson.cardPosition?t.originalJson.cardPosition.zIndex:null,cssId:t.getId()}));var h=e&&1===e.length?e[0]:t.getSingleTargetElement();if(this.currentCardInfo.nodeRemWaiterDisposal=Object(_.a)(h,()=>{f.a.verbose(`TourId: ${this.getId()} - Node removed.`),this.clear(),t.originalJson.advanceOnRemove?setTimeout(()=>{x(),this.sendStatAndShowNextCard()},20):setTimeout(()=>{this.showNextCard({logSource:"Node removal"})},20)}),Object(g.a)("tr_adv_aft_hid")&&t.originalJson.advanceOnHide&&(this.currentCardInfo.nodeHideWaiterDisposal=function(t,e,{onlyOnce:n=!0,detectCSS:r=!0}={}){let o=!0,i=[];const s=t=>{if(!t)return!0;if(Object(g.a)("opctwtch")&&"function"==typeof t.checkVisibility)return!t.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0});const e=getComputedStyle(t);return"none"===t.style.display||"hidden"===t.style.visibility||"none"===e.display||"hidden"===e.visibility||"0"===e.opacity};if(r){const e=new MutationObserver(()=>{const e=s(t);o&&e?(o=!1,c(t)):o||e||n||(o=!0)});e.observe(t,{attributes:!0,attributeFilter:["style","class"]}),i.push(()=>e.disconnect())}const a=new IntersectionObserver(e=>{for(const r of e)o&&!r.isIntersecting?(o=!1,c(t)):o||!r.isIntersecting||n||(o=!0)});function c(t){e(t),n&&d()}function d(){i.forEach(t=>t()),i=[]}return a.observe(t),i.push(()=>a.disconnect()),setTimeout(()=>{s(t)&&(o=!1)},0),d}(h,()=>{f.a.verbose(`TourId: ${this.getId()} - Node hidden.`),this.clear(),setTimeout(()=>{x(),this.sendStatAndShowNextCard()},20)})),this.currentCardInfo.cardPositioner&&this.currentCardInfo.cardPositioner.dispose(),this.currentCardInfo.cardPositioner=new S.a(h,i,()=>{this.currentCardInfo.backdrop.applyToElement()},null,{autoTopByScroll:!0,boundingIsTextContent:c,positionConfig:t.originalJson.cardPosition,cardHolder:this.tourContainer}),this.currentCardInfo.cardPositioner.applyPosition(),this.currentCardInfo.visibilitySenzor=new F.a(h,e=>{if(h instanceof SVGElement)return void f.a.verbose(`TourId: ${this.getId()} - Target is SVG, skipping visibility senzor`,e);if(f.a.verbose(`TourId: ${this.getId()} - Target element in the view changed`,e),t.originalJson.reloadOnHide&&!e)return void this.showNextCard({logSource:"Node hidden (restart mode on)"});Object(g.a)("opctwtch")&&!i.style.__originalDisplay&&(i.style.__originalDisplay=i.style.display);let n=Object(g.a)("opctwtch")?i.style.__originalDisplay:null;i.style.display=e?n:"none",this.currentCardInfo.cardIsVisible=e,this.currentCardInfo.backdrop.setVisibility(e),Object(g.a)("adv_hid")&&t.originalJson.advanceIfElMissing&&(e||(this.currentCardInfo.clearWaiters(),this.waitingForNextCard=!1,this.currentCardInfo.currentCard=t,this.sendStatAndShowNextCard()))}),t.originalJson.continueOnElementClick)h.addEventListener("mouseup",w);else if(t.originalJson.advanceAction){const e=t.originalJson.advanceAction;"onclick"==e.type?Object(g.a)("adv_pntd")?h.addEventListener("pointerdown",w,!0):Object(g.a)("adv_glb")?window.addEventListener("pointerdown",C,!0):h.addEventListener("mouseup",w):"oninput"==e.type?(e.disableNextTilInput&&d.setNextButtonsState("disabled"),h.addEventListener(e.confirmKey?"keyup":"input",O)):"onhover"==e.type&&h.addEventListener("mouseenter",w,!0)}if(t.originalJson.elementAnimation)new l(h,t.originalJson.elementAnimation).run()}else i.style.left=0,i.style.top=0,f.a.info("PF: multitargets are not supported");d.getFooterNextButton().addEventListener("click",()=>{"disabled"!=d.getNextButtonsState()&&(x(),this.sendStatAndShowNextCard())}),d.getFooterBackButton().addEventListener("click",()=>{x(),this.trackBackButtonClick(t,a),this.showNextCard({showPrevious:!0})}),a!==s?d.getFooterSkipButton().addEventListener("click",()=>{"skip_cncl"!=this.skip(t.getId())&&x()}):Object(g.a)("skip_on_last")?d.getFooterSkipButton()&&d.getFooterSkipButton().addEventListener("click",()=>{"skip_cncl"!=this.skip(t.getId())&&x()}):(d.getFooterSkipButton().style.display="none",d.getHeaderSkipButton().style.display="none"),d.getHeaderSkipButton()&&d.getHeaderSkipButton().addEventListener("click",()=>{"skip_cncl"!=this.skip(t.getId())&&x()}),this.tourConfig.minimization&&this.tourConfig.minimization.enabled&&d.getHeaderMinimizeButton()&&(d.getHeaderMinimizeButton().style.display="block",d.getHeaderMinimizeButton().addEventListener("click",()=>{this.minimizeTour()})),t.isTitleVisible()||(d.getHeader().classList.add("productfruits-hidden"),Object(E.a)(i,"data-pf-header","hidden")),t.isFooterVisible()||(d.getFooter().classList.add("productfruits-hidden"),Object(E.a)(i,"data-pf-footer","hidden")),d.getStepsCounter().textContent=s>1?a+"/"+s:"";const m=P();m&&Object(W.a)(i,m),t.originalJson.cardPosition&&(i.style.zIndex=t.originalJson.cardPosition.zIndex,this.tourContainer.style.zIndex=Object(N.a)(t.originalJson.cardPosition.zIndex)),this.isSomeCardShown=!0,this.setIsRunning(!0),t.hasKeyBlocking()&&(this.currentCardInfo.keyboardBlocker&&this.currentCardInfo.keyboardBlocker.unblock(),this.currentCardInfo.keyboardBlocker=new D.a(t.originalJson.blockedKeys,e?e[0]:null),Object(g.a)("kbrd_blck_def")&&(this.currentCardInfo.keyboardBlocker.preventDefault=!0),this.currentCardInfo.keyboardBlocker.block()),b.a.logSuccessMessage(t.originalJson.name+" - The card is shown.",this.getName(),"Tours",!0),Object(z.h)(this.getId(),this.getName(),t.getId(),t.getName(),a,this.forceForUser),$(this.getId(),t),1==a&&Object(z.o)(this.getId(),this.forceForUser,this.ignoreRules),Object(j.b)(this.tourContainer,i,{}),Object(g.a)("lgc_chk_sp1")||Object(A.b)(()=>{p.c.checklistsFactory.closeAllChecklists()}),M.a.dispatchTourAdvanced(this),Object(T.a)(i,()=>{this.currentCardInfo.cardPositioner&&this.currentCardInfo.cardPositioner.applyPosition(),this.onCardShown&&this.onCardShown(t.getId())}),Object(o.a)(t=>{t.legacyTours.runningToursIds.push(this.getId())});const v=this;function w(){v.sendStatAndShowNextCard(),h.removeEventListener("mouseup",w),h.removeEventListener("mousedown",w,!0),h.removeEventListener("mouseenter",w,!0),h.removeEventListener("pointerdown",w,!0),f.a.verbose(`TourId: ${v.getId()} - handling advance on click, force:`,v.forceForUser)}function C(t){t.composedPath&&-1!==t.composedPath().indexOf(h)&&(v.sendStatAndShowNextCard(),window.removeEventListener("pointerdown",C,!0),f.a.verbose(`TourId: ${v.getId()} - handling advance on click glb, force:`,v.forceForUser))}function O(e){const n=t.originalJson.advanceAction||{},r=1!=n.caseSensitive;let o=(n.targetValue||"").trim(),i=(e.target.value||"").trim();if(r&&(i=i.toUpperCase(),o=o.toUpperCase()),n.disableNextTilInput){let t=""!=i;n.regex&&(t=new RegExp(n.regex).test(i)),d.setNextButtonsState(t?"enabled":"disabled")}else(!0===n.anyTargetValue||i==o&&(!n.confirmKey||n.confirmKey&&e.key==n.confirmKey))&&(h.removeEventListener("keyup",O),h.removeEventListener("input",O),v.sendStatAndShowNextCard())}function x(){h&&(h.removeEventListener("mouseup",w),h.removeEventListener("mousedown",w,!0),h.removeEventListener("pointerdown",w,!0),h.removeEventListener("keyup",O),h.removeEventListener("input",O)),window.removeEventListener("pointerdown",C,!0)}function P(){return window.productFruits&&window.productFruits._design?window.productFruits._design.tour:window.productFruits&&window.productFruits.toursFactory&&window.productFruits.toursFactory.toursConfig&&window.productFruits.toursFactory.toursConfig.design?window.productFruits.toursFactory.getToursConfig().design:void 0}this.currentClearAdvanceHandlersFn=x}sendStat(t=null,e){let n=this.tourCards[this.tourCards.length-1],r="";n&&(r=n.originalJson.id),t||(t=this.currentCardInfo.currentCard),this.userShownCards.push(t.getId()),b.a.logInfoMessage(t.originalJson.name+" - Sending step statistics to PF servers.",this.getName());let o=t.getId()===r;if(o&&(this.originalConfig.userState=1,this.originalConfig.userIsRunning=!1,this.rulesCheckedForSession=!1,M.a.dispatchTourFinished(this),b.a.logInfoMessage(t.originalJson.name+" - Tour is finished!",this.getName()),this.takeResetBack(),this.onEnd&&this.onEnd({reason:"done"})),this.onCardRead&&this.onCardRead(t.getId()),Object(z.n)(this.tourConfig.id,this.tourConfig.name,t.getId(),t.getName(),o,null==e?void 0:e.noEvent),Object(g.a)("trflw1")&&o&&"always"==this.triggerType)return this.resetShownCardsLocally(),this.turnOffIgnoreLaunchRules(),{dontDoNextCard:!0}}sendStatAndShowNextCard(t){const e=this.sendStat(null,t);if(this.currentCardInfo&&this.currentCardInfo.dataGatherSections){const t=this.currentCardInfo.dataGatherSections.map(t=>!t.hasDedicatedSendButton&&t.gatherData&&t.gatherData());t[0]&&void 0!==t[0].mood&&Object(z.c)(t[0].mood.tag,t[0].dataId,this.getId(),this.getName(),this.currentCardInfo.currentCard.getId(),this.currentCardInfo.currentCard.getName(),null,t[0].mood.rating,t[0].mood.followUp,t[0].mood.question,t[0].mood.followUpQuestion)}if(this.currentCardInfo&&this.currentCardInfo.currentCard&&this.currentCardInfo.currentCard.originalJson.pauseTillReload)return b.a.logInfoMessage(this.currentCardInfo.currentCard.getName()+" - Paused until reload.",this.getName()),R.a.logState("tour",this.getId(),"paused_reload"),void this.clear();Object(g.a)("trflw1")&&e&&!1!==e.dontDoNextCard?this.clear():(M.a.dispatchTourBeforeAdvanced(this),this.showNextCard())}clear(t=!1){t||f.a.verbose(`TourId: ${this.getId()} - Clearing the tour`),Object(o.a)(t=>{t.legacyTours.runningToursIds=t.legacyTours.runningToursIds.filter(t=>t!=this.getId())}),this.isSomeCardShown=!1,this.waitingForNextCard=!1,this.tourContainer.innerHTML="",this.currentCardInfo&&this.currentCardInfo.disposeAll();try{sessionStorage.getItem("productfruits_tour_previewmode")&&this.currentClearAdvanceHandlersFn&&this.currentClearAdvanceHandlersFn()}catch(t){}}skip(t=null){if(this.tourConfig.confirmation&&this.tourConfig.confirmation.enabled){const t=this.tourConfig.confirmation.text&&this.tourConfig.confirmation.text[window.productFruits.language]?this.tourConfig.confirmation.text[window.productFruits.language]:"Are you sure?";if(!confirm(t))return"skip_cncl"}t||(t=this.currentCardInfo.currentCard.getId()),this.userShownCards.push(t),Object(z.m)(this.tourConfig.id,this.tourConfig.name,t,this.currentCardInfo.currentCard.getName()),this.clear(),this.turnOffIgnoreLaunchRules(),b.a.logInfoMessage("User is skipping the tour.",this.getName()),this.tourConfig.userState=2,this.tourConfig.userIsRunning=!1,this.rulesCheckedForSession=!1,this.takeResetBack(),M.a.dispatchTourSkipped(this),this.onEnd&&this.onEnd({reason:"skip"}),Object(g.a)("trflw1")&&"always"==this.triggerType&&this.resetShownCardsLocally(),Object(g.a)("trs_dbl_chk")&&(this.currentCardInfo.currentCard=null)}kill(t=!1){t||f.a.verbose(`TourId: ${this.getId()} - Killing the tour`),this.turnOffIgnoreLaunchRules(),this.clear(t)}serialize(){return{id:this.getId(),currentUserShownCards:this.userShownCards,forceForUser:this.forceForUser}}minimizeTour(){this.setIsRunning(!1),this.minimizationLastKnownUrl=Object(d.a)(),this.tourContainer.style.display="none",this.currentCardInfo.backdrop&&this.currentCardInfo.backdrop.detachFromViewport&&this.currentCardInfo.backdrop.detachFromViewport();const t=O.a.getSubContainer("pf-minimize-btn");Object(j.b)(t,this.createMaximizeButtonElement(),{anim:"bounce-down"})}maximizeTour(){this.setIsRunning(!0),this.minimizationLastKnownUrl&&this.minimizationLastKnownUrl!=Object(d.a)()&&Object(d.b)(this.minimizationLastKnownUrl),this.currentCardInfo.backdrop&&this.currentCardInfo.backdrop.reattachToViewport(),this.tourContainer.style.display=null,O.a.removeSubContainer("pf-minimize-btn")}createMaximizeButtonElement(){const t=(this.tourConfig.minimization.text||{})[window.productFruits.language]||"Resume";return Object(j.h)("div",{className:Object(j.i)("tour-maximize-button"),onClick:t=>{this.maximizeTour()}},t)}trackCardButtonClick(t,e,n,r){if(window.productFruitsUser&&!window.ProductFruitsDesigner){const o=t.getId();let i={tourId:this.getId(),tourName:this.getName(),cardId:o,cardName:t.getName(),currentCardOrder:e,cardOrderWithName:e+" - "+t.getName(),buttonTitle:n,buttonAction:r.action};r.tourId&&(i.connectedTourId=r.tourId),r.url&&(i.url=r.url),V.a.getInstance().trackEvent("tour_card_button_click",i),Object(z.k)(1,this.getId().toString(),o,Object(d.a)(),"button",n,r.action,r.url||r.tourId,window.productFruits.language,"tour_card_read_time_"+o)}}trackBackButtonClick(t,e){if(window.productFruitsUser&&!window.ProductFruitsDesigner){let n={tourId:this.getId(),tourName:this.getName(),cardId:t.getId(),cardName:t.getName(),currentCardOrder:e,cardOrderWithName:e+" - "+t.getName()};V.a.getInstance().trackEvent("tour_card_back",n)}}}class G{constructor(){this.backdrop=null,this.cardPositioner=null,this.singleBackdrop=null,this.nodeRemWaiterDisposal=null,this.nodeHideWaiterDisposal=null,this.visibilitySenzor=null,this.currentCard=null,this.dataGatherSections=null,this.keyboardBlocker=null,this.waitForUrlChange=null,this.waitForAddedNode=null,this.cardIsVisible=!0}disposeAll(){this.cardPositioner&&this.cardPositioner.dispose(),this.backdrop&&this.backdrop.removeBackdrop(),this.singleBackdrop&&this.singleBackdrop.dispose(),this.nodeRemWaiterDisposal&&this.nodeRemWaiterDisposal(),this.nodeHideWaiterDisposal&&this.nodeHideWaiterDisposal(),this.visibilitySenzor&&this.visibilitySenzor.dispose(),this.keyboardBlocker&&(this.keyboardBlocker.unblock(),this.keyboardBlocker=null),this.cardIsVisible=!0,O.a.removeSubContainer("pf-minimize-btn")}clearWaiters(){this.waitForAddedNode&&(this.waitingForNextCard=!1,this.waitForAddedNode()),this.waitForUrlChange&&this.waitForUrlChange()}}},,,,,function(t,e,n){var r,o;this||window,void 0===(o="function"==typeof(r=function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)};function e(t,e){var n=Object.prototype.toString.call(t),r="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,o=0,i=t.length;if(r)for(;o<i;o++)e(t[o]);else e(t)}var n=function(r,o){function i(){var t,e,n=[];this.add=function(t){n.push(t)},this.call=function(){for(t=0,e=n.length;t<e;t++)n[t].call()},this.remove=function(r){var o=[];for(t=0,e=n.length;t<e;t++)n[t]!==r&&o.push(n[t]);n=o},this.length=function(){return n.length},this.clear=function(){n=[]}}function s(e,n){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(n)}else e.resizedAttached=new i,e.resizedAttached.add(n);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var r="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",o="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=r,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+r+'"><div style="'+o+'"></div></div><div class="resize-sensor-shrink" style="'+r+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),"static"==function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(e,"position")&&(e.style.position="relative");var s=e.resizeSensor.childNodes[0],a=s.childNodes[0],c=e.resizeSensor.childNodes[1],d=function(){a.style.width="100000px",a.style.height="100000px",s.scrollLeft=1e5,s.scrollTop=1e5,c.scrollLeft=1e5,c.scrollTop=1e5};d();var l,u,h,p,f=!1,m=function(){e.resizedAttached&&(f&&(e.resizedAttached.call(),f=!1),t(m))};t(m);var g=function(){(h=e.offsetWidth)==l&&(p=e.offsetHeight)==u||(f=!0,l=h,u=p),d()},b=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)};b(s,"scroll",g),b(c,"scroll",g)}e(r,(function(t){s(t,o)})),this.detach=function(t){n.detach(r,t)},this.detachAll=function(){n.detachAll(r)}};return n.detach=function(t,n){e(t,(function(t){t.resizedAttached&&"function"==typeof n&&(t.resizedAttached.remove(n),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)}))},n.detachAll=function(t){e(t,(function(t){t.resizedAttached&&(t.resizedAttached.clear(),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)}))},n})?r.call(e,n,e,t):r)||(t.exports=o)}]]);
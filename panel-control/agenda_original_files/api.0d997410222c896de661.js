(window.pf4f47fd4774cx=window.pf4f47fd4774cx||[]).push([[2],{158:function(e,t,n){"use strict";n.r(t),n.d(t,"ApiObject",(function(){return h}));var i=n(9),s=n(4),r=n(24),o=n(71),c=n(7),a=n(8),d=n(2),u=(n(100),n(30)),l=n(25);class h{constructor(){this.tours=new m,this.feedback=new C,this.button=new F,this.announcements=new k,this.hints=new b,this.checklists=new f,this.analytics=new w,this.announcementsV2=new y,this.surveys=new v,this.inAppCenter=new p,Object(d.c)()&&(this.events=new g)}}class p{open(e){s.c.inAppCenter.open(e)}close(){s.c.inAppCenter.close()}isOpened(){return s.c.inAppCenter.isOpened()}hide(){s.c.inAppCenter.hide()}show(){s.c.inAppCenter.show()}isSuppressed(){return s.c.inAppCenter.isSuppresed()}attachToCustomElement(e){if(!e||!e.appendChild)throw new Error("You must pass a valid HTMLElement instance as the first parameter");s.c.inAppCenter.attachToCustomLauncher(e)}listen(e,t){return"closed"==e?Object(c.c)("pf-inappcenter-closed",t):"opened"==e?Object(c.c)("pf-inappcenter-opened",t):void 0}}class w{forwardEvent(e){return Object(c.c)("pf_custom_event_fired",t=>{e(t.event,t.data)})}}class g{track(e,t,n){window.productFruits.eventsFactory.trackEvent(e,t,n)}}class f{constructor(){this.last_isChecklistEligible_call={},this.isChecklistEligibleCache={}}markItemAsDone(e,t){const n=window.productFruits.checklistsFactory.getItemsByInternalId(e);if(n&&n.length>0){if(n.forEach(e=>window.productFruits.checklistsFactory.markItemAsDoneByItemIdAndAdvance(e.id,!t)),t){[...new Set(n.map(e=>e.checklistId))].forEach(e=>window.productFruits.checklistsFactory.openChecklistModal(e))}return!0}return!1}injectToElement(e,t,{checkEligibility:n}={}){if(!t||!t.appendChild)throw new Error("You must pass a JS HTML element instance.");const i=window.productFruits.checklistsFactory.getChecklistInstanceById(e);if(!i)throw new Error("Checklist not found. Possible reasons: 1) wrong ID, 2) checklist was dismissed, 3) checklist is not published");if("embd"!=i.config.displayMode)throw new Error("The checklist is not set to Embeddable mode");!0===n?this.isChecklistEligible(e).then(e=>{"eligible"==e&&i.injectToElement(t)}):i.injectToElement(t)}isChecklistEligible(e){const t=window.productFruits.checklistsFactory.getChecklistInstanceById(e);if(!t)throw new Error("Checklist not found. Possible reasons: 1) wrong ID, 2) checklist was dismissed, 3) checklist is not published");if("embd"!=t.config.displayMode)throw new Error("This method can be used only when using Embeddable mode");const n=new Date;return n-this.last_isChecklistEligible_call[e]<700?(console.warn("You are checking checklist eligibility too often. Please check your code. Returning a cached value. ChecklistId: "+e),new Promise(t=>t(this.isChecklistEligibleCache[e]||"not_eligible"))):(this.last_isChecklistEligible_call[e]=n,new Promise(n=>{t.checkVisibilityAsync().then(t=>{this.isChecklistEligibleCache[e]=t,n(t)})}))}listen(e,t){if(t)return"item-launched"==e?u.a.attachChecklistItemLaunched_disposable(e=>{t(e.id,e.internalId)}):"item-completed"==e?u.a.attachChecklistItemCompleted_disposable(e=>{t(e.id,e.internalId)}):"dismissed"==e?u.a.attachChecklistDismissed_disposable((e,n)=>{t(e,n)}):"eligibility-changed"==e?u.a.attachChecklistEligibilityChanged_disposable((e,n)=>{t(e,n)}):void 0}getChecklists(){return window.productFruits.checklistsFactory&&window.productFruits.checklistsFactory.config?window.productFruits.checklistsFactory.checklistConfigs.filter(e=>!e.isDismissed).map(n=>({id:n.id,name:n.name,description:n.description?n.description[window.productFruits.language]:void 0,title:n.title?n.title[window.productFruits.language]:void 0,state:e(n.state),items:n.items&&n.items.map&&n.items.map(e=>({id:e.id,internalId:e.customId,title:e.title,description:e.description?e.description[window.productFruits.language]:void 0,state:t(e.state)}))})):[];function e(e){switch(e){case 0:return"not_touched";case 1:return"finished";case 2:return"in_progress";case 3:return"empty"}}function t(e){switch(e){case"done":return"done";case"wip":return"open";default:return"tbd"}}}resetForCurrentUser(e){if(!Object(d.a)("chk_rst_jsapi"))return;var t=i.a.getCurrentIdentity();const n=Object(o.a)(async()=>{var n,o,c,a;await Object(r.c)(Object(s.d)()+"/api/v1/stats/"+s.a.code+"/checklists/restart",{username:i.a.user.username,groupId:null===(n=i.a.group)||void 0===n?void 0:n.groupId,checklistId:e,hmac:null!==(o=null==t||null===(c=t.user)||void 0===c||null===(a=c.data)||void 0===a?void 0:a.hmac)&&void 0!==o?o:void 0})},500);s.c.checklistsFactory.resetChecklist(e),n(e)}}class m{constructor(){this.last_isTourEligible_call={},this.isTourEligibleCache={}}tryStartTour(e,{noRedirect:t}={}){window.productFruits.toursFactory.startTour(e,{forceForUser:!0,autoStartRedirect:!t})}suspendAllTours(){window.productFruits.toursFactory.stopAllTours()}getTours(){return window.productFruits.toursFactory.getTours().map(t=>{const n=t.currentCardInfo&&t.currentCardInfo.currentCard?t.currentCardInfo.currentCard:null;return{id:t.getId(),name:t.getName(),userState:e(t.userState),isRunning:t.isRunning(),rulesValid:()=>t.allRulesValid(),currentCard:t.isRunning()&&n&&n.getId?{id:n.getId(),name:n.getName()}:null}});function e(e){switch(e){case 0:return"not_finished";case 1:return"finished";case 2:return"skipped";default:return"unknown"}}}isTourEligible(e){const t=window.productFruits.toursFactory.getTours().find(t=>t.getId()==e);if(!t)return new Promise(e=>e("not_eligible"));const n=new Date;return n-this.last_isTourEligible_call[e]<700?(console.warn("You are checking tour eligibility too often. Please check your code. Returning a cached value. TourId: "+e),new Promise(t=>t(this.isTourEligibleCache[e]||"not_eligible"))):(this.last_isTourEligible_call[e]=n,new Promise(e=>{Object(d.c)()?t.allRulesValidAsync().then(t=>{e(i(t))}):e(i(t.allRulesValid()))}));function i(e){return e?"eligible":"not_eligible"}}markAs(e,t,n=!0){function i(){switch(t){case"finished":return 1;case"skipped":return 2;default:throw new Error("Only finished and skipped states are supported.")}}const s=window.productFruits.toursFactory.getTour(e);if(!s)throw new Error("Tour not found");s.userState=i(),Object(l.d)(e,i()),n&&this.kill(e)}advanceToNextStep(e){const t=window.productFruits.toursFactory.getTour(e);if(!t)throw new Error("Tour not found");t.currentClearAdvanceHandlersFn&&t.currentClearAdvanceHandlersFn(),t.sendStatAndShowNextCard()}goToPreviousStep(e){const t=window.productFruits.toursFactory.getTour(e);if(!t)throw new Error("Tour not found");t.currentClearAdvanceHandlersFn&&t.currentClearAdvanceHandlersFn(),t.showNextCard({showPrevious:!0})}kill(e){window.productFruits.toursFactory.killTour(e)}listen(e,t){if(t)return"tour-finished"==e?u.a.attachTourFinished_disposable(e=>{t(e.originalConfig.id)}):"tour-skipped"==e?u.a.attachTourSkipped_disposable(e=>{t(e.originalConfig.id)}):"tour-advanced"==e?u.a.attachTourAdvanced_disposable(e=>{t(e.originalConfig.id,{currentCardId:e.currentCardInfo.currentCard.getId()})}):"tour-card-completed"==e?u.a.attachTourBeforeAdvanced_disposable(e=>{t(e.originalConfig.id,{currentCardId:e.currentCardInfo.currentCard.getId()})}):void 0}}class b{updatePositions(){window.productFruits.contextHelp.updateAllPositions()}toggleVisibility(e){const t=window.productFruits.contextHelp.getDomContainer();null==e?t.style.display?t.style.display=null:t.style.display="none":t.style.display=e?null:"none"}}class C{showModal(e,t){window.productFruits.feedback.showFeedbackPopup(e,t)}hideModal(){window.productFruits.feedback.closeFeedbackPopup()}changeRecorderMode(e){window.productFruits.feedback.changeRecMode("native"==e?"capt":null)}}class F{showModal(){window.productFruits.button.openModal()}hideModal(){window.productFruits.button.hideModal()}hideButton(){window.productFruits.button.detachButton()}showButton(){window.productFruits.button.attachButton()}show(){window.productFruits.button.attachButton(),setTimeout(()=>{window.productFruits.button.openModal()},200)}hide(){window.productFruits.button.detachButton()}close(){window.productFruits.button.hideModal()}open(){window.productFruits.button.openModal()}isOpened(){return window.productFruits.button.isModalShown}openIn(e,t){if("group"==e)window.productFruits.button.openModalWithGroup(t);else{if("article"!=e)throw new Error("Only group or article types are supported");window.productFruits.button.openModalWithArticle(t)}}listen(e,t){switch(e){case"closed":return Object(c.c)("pf-life-ring-hidden",()=>t());case"opened":return Object(c.c)("pf-life-ring-opened",()=>t())}}}class k{showLatestAnnouncementModal(e){window.productFruits.changelogs.showLast()}showHistoryModal(){window.productFruits.changelogs.showHistory()}showHistory(e){window.productFruits.announcements.showHistory(e)}getCurrentBannersSpace(e){return window.productFruits.announcements.getCurrentBannerSpacing(e)}getAnnouncementsByChannel(e){return Object(a.e)().announcements.changelogs.filter(t=>t.channelId==e).map(e=>({id:e.id,titles:e.title,publishedAt:e.publishedAt,userState:t(e.userState)})).sort((e,t)=>e.publishedAt>t.publishedAt?-1:t.publishedAt<e.publishedAt?1:0);function t(e){switch(e){case 0:return"seen";case 1:return"not_seen"}}}showAnnouncement(e){window.productFruits.announcements.showAnnouncement(e)||console.error("The given announcement was not found.")}listen(e,t){t&&"banner-spacing"==e&&u.a.attachAnnouncementsBannerSpacing(e=>{t({marginTop:e.detail.marginTop,target:"top"})})}}class y{attachNewsWidgetToElement(e){if(!e||!e.appendChild)throw new Error("You must pass a valid HTMLElement instance as the first parameter");s.c.announcementsV2.appendWidget(e)}listen(e,t){if("newsfeed-unread-count-changed"==e){const e=Object(c.c)("newsfeed-unread-changed",t);return s.c.announcementsV2.unreadListenerAttached(),e}if("banner-spacing"==e)return Object(c.c)("pf_banner_spacing",t)}showAnnouncement(e){if(!e||"string"!=typeof e)throw new Error("You must pass the string survey ID as the first argument.");s.c.announcementsV2.showAnnouncement(e)}}class v{startSurvey(e){if(!e||"string"!=typeof e)throw new Error("You must pass the string survey ID as the first argument.");s.c.surveys.startSurvey(e)}listen(e,t){if("survey-closed"==e)return Object(c.c)("survey-closed",t)}}}}]);